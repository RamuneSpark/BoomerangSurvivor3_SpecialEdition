function setImage(t,a){if(t.src!==a){let e=t.getElementsByTagName("img")[0];e||(e=document.createElement("img"),t.appendChild(e)),e.src=a}}function setImageWidth(e,t,a){let n=e.getElementsByTagName("img")[0];n||(n=document.createElement("img"),e.appendChild(n)),n.src!==t&&(n.src=t),n.width!==a&&(n.width=a)}function setText(e,t){e.innerHTML!=="<nobr>"+t+"</nobr>"&&(e.innerHTML="<nobr>"+t+"</nobr>")}function Remove(e){var t=e.getElementsByTagName("img")[0];t?e.removeChild(t):""!==e.innerHTML&&(e.innerHTML="")}function putXY(e,t,a){"no"!==t&&(e.style.left=t),"no"!==a&&(e.style.top=a)}const Center="-50%",Left="0%",Top=Left,Right="-100%",Bottom=Right;function translate(e,t,a){e.style.transform="translate("+t+", "+a+") rotate(0deg) scale(100%)"}function transform(e,t,a,n,i){e.style.transform="translate("+t+", "+a+") rotate("+n+"deg) scale("+i+")"}function transformScaleXY(e,t,a,n,i,s){e.style.transform="translate("+t+", "+a+") rotate("+n+"deg) scaleX("+i+") scaleY("+s+")"}function Rb(e,t){return"<ruby>"+e+"<rt>"+t+"</rt></ruby>"}function fontSet(e,t,a,n,i,s){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t&&(t="#FFC6BB"),e.style.color!==t&&(e.style.color=t),e.style.fontFamily!==a&&(e.style.fontFamily=a),e.style.fontSize!==n&&(e.style.fontSize=n),e.style.fontWeight!==i&&(e.style.fontWeight=i),e.style.textAlign!==s&&(e.style.textAlign=s)}function fontColorSet(e,t){"green"==t?t="#BFFFB0":"blue"==t?t="#AFD0FF":"red"==t&&(t="#FFC6BB"),e.style.color!==t&&(e.style.color=t)}function textEdge(e,a,n){if(0!=a){var i=[];for(let e=1;e<=a;e++)i[e]=Math.sqrt(e);"green"==n?n="#17890B":"blue"==n?n="#012DD4":"red"==n&&(n="#CE2807");let t="";for(let e=1;e<=a;e++)t+=e+"px 0px 0px "+n+", "+-e+"px 0px 0px "+n+", 0px "+e+"px 0px "+n+", 0px "+-e+"px 0px "+n+",";for(let e=1;e<=a;e++)e!=a?t+=i[e]+"px "+i[e]+"px 0px "+n+", "+-i[e]+"px "+i[e]+"px 0px "+n+", "+i[e]+"px "+-i[e]+"px 0px "+n+", "+-i[e]+"px "+-i[e]+"px 0px "+n+",":t+=i[e]+"px "+i[e]+"px 0px "+n+", "+-i[e]+"px "+i[e]+"px 0px "+n+", "+i[e]+"px "+-i[e]+"px 0px "+n+", "+-i[e]+"px "+-i[e]+"px 0px "+n;e.style.textShadow!==t&&(e.style.textShadow=t)}else 0==a&&""!==e.style.textShadow&&(e.style.textShadow="")}let allDiv=[];function defaultSet(e,t){t.appendChild(e),allDiv.push(e),e.style.position="absolute"}let phone;function phoneCheck(){phone=!!navigator.userAgent.match(/iPhone|Android.+Mobile/)}phoneCheck();let lastVec={};function Vector(e,t,a,n){a-=e,e=n-t,n=a*a+e*e;0==(n=Math.sqrt(n))?(lastVec.x=0,lastVec.y=1,lastVec.z=1):(lastVec.x=a/n,lastVec.y=e/n,lastVec.z=n)}function VectorEasy(e,t){Vector(e.x,e.y,t.x,t.y)}function Vector2(e,t,a,n){a-=e,e=n-t,n=a*a+e*e;0==(n=Math.sqrt(n))?(lastVec.x=0,lastVec.y=1,lastVec.z=1):(lastVec.x=a,lastVec.y=e,lastVec.z=n)}function Vector3(e,t,a,n){a-=e,e=n-t;let i;return Math.abs(e)>Math.abs(a)?i=0<=e?"down":"up":Math.abs(e)<Math.abs(a)?i=0<a?"right":"left":((i=[])[0]="diagonal",i[1]=0<=e?"down":"up",i[2]=0<a?"right":"left"),console.log(i),i}function touchElement(e,t){var a=[];let n=!1,i=!1,s=!1;return a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect(),a[1].top<a[2].top&&(a[2]=e.getBoundingClientRect(),a[1]=t.getBoundingClientRect()),a[2].bottom>a[1].top&&(n=!0),a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect(),a[2].left<a[1].left&&(a[2]=e.getBoundingClientRect(),a[1]=t.getBoundingClientRect()),a[1].right>a[2].left&&(i=!0),s=1==i&&1==n}function touchElement2(e,t){var a=[],n=touchElement(e,t);let i=!1;a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect();e=[];return e[1]={},e[2]={},1==n&&(e[1].y=(a[1].top+a[1].bottom)/2,e[2].y=(a[2].top+a[2].bottom)/2,e[1].x=(a[1].left+a[1].right)/2,e[2].x=(a[2].left+a[2].right)/2,i=Vector3(e[2].x,e[2].y,e[1].x,e[1].y)),i}function exists(e){return void 0!==e}function c(e){console.log(e)}function c2(){console.log(!0)}const xxxxxxxxxx=[8,0,3,5,6,1,4,9,7,0,8,2];function r1_2(e){let t=!1;return 1==e?t=2:2==e&&(t=1),t}function player1and2(){return 0!=player[1].pad&&0!=player[2].pad}function player1or2(){return 0!=player[1].pad||0!=player[2].pad}function playerDelegate(){let e;return e=!1!==player[1].pad&&"miss"!==player[1].state||!1===player[2].pad?1:2}let missShift=0;function allPlayerMiss(){0==player[1].pad&&0==player[2].pad&&missShift++,40<=missShift&&(missShift=0,soundName[14]="pause",1==challenge?nextScene="stageSelect":1==battle?(nextScene="draw",ct=100):1<=stock?nextScene="start":(nextScene="gameOver",ct=100)),200==bs&&1==challenge&&finishChallengeBattle()}let victoryShift=0;function battleFinish(){if(1==battle){for(let e=1;e<=2;e++)0==player[e].pad||"A"!=player[e].state&&"stun"!=player[e].state&&"stunInvincible"!=player[e].state&&"stagger"!=player[e].state&&"staggerSet"!=player[e].state&&"stagger2"!=player[e].state||0!=player[r1_2(e)].pad||0!=victoryShift||(player[e].height=0,weaponBreak(e),player[e].state="clear",winPlayer=e,victoryShift=1);1<=victoryShift&&(timeShift=0,1==victoryShift&&(soundName[12]="se/gong"),120<=++victoryShift)&&(soundName[14]="pause",nextScene="scoreBoard")}}function anyoneConfirm(){return(km_1t.Start[1]||km_1t.Start[2]||km_1t.A[1]||km_1t.A[2])&&0==bs}function P1Confirm(){return(km_1t.Start[1]||km_1t.A[1])&&0==bs}function P2Confirm(){return(km_1t.Start[2]||km_1t.A[2])&&0==bs}function anyoneCancel(){return(km_1t.B[1]||km_1t.B[2])&&0==bs}function defeatAllEnemies(){let t;for(let e=0;e<enemyAllType;e++){if(0!==enemyNumber[e]){t=!1;break}t=!0}return t}function enemySum(){let t=0;for(let e=0;e<20;e++)0!==enemy[e].m&&5!==enemy[e].m&&t++;var e=enemyNumber.reduce((e,t)=>e+t,0);return t+e}function waysRandom(){return waysText[Math.floor(4*Math.random())]}function fallEnemyWaySet(e){for(;;){if(enemy[e].vec=waysRandom(),"left"==enemy[e].vec&&0==stageMap[enemy[e].yI][enemy[e].xI-1]){enemy[e].standBy=enemyFaSt[enemy[e].type];break}if("right"==enemy[e].vec&&0==stageMap[enemy[e].yI][enemy[e].xI+1]){enemy[e].standBy=enemyFaSt[enemy[e].type];break}if("down"==enemy[e].vec&&0==stageMap[enemy[e].yI+1][enemy[e].xI]){enemy[e].standBy=enemyFaSt[enemy[e].type];break}if("up"==enemy[e].vec&&0==stageMap[enemy[e].yI-1][enemy[e].xI]){enemy[e].standBy=enemyFaSt[enemy[e].type];break}if(0!=stageMap[enemy[e].yI-1][enemy[e].xI]&&0!=stageMap[enemy[e].yI+1][enemy[e].xI]&&0!=stageMap[enemy[e].yI][enemy[e].xI-1]&&0!=stageMap[enemy[e].yI][enemy[e].xI+1]){enemy[e].standBy=-10;break}}}function fallEnemyWaySetChase(t,a){if("credits"!=scene)for(let e=0;e<a&&(fallEnemyWaySet(t),!("left"==enemy[t].vec&&player[P1P2_distance(enemy[t])].xI<enemy[t].xI))&&!("right"==enemy[t].vec&&player[P1P2_distance(enemy[t])].xI>enemy[t].xI)&&!("up"==enemy[t].vec&&player[P1P2_distance(enemy[t])].yI<enemy[t].yI)&&!("down"==enemy[t].vec&&player[P1P2_distance(enemy[t])].yI>enemy[t].yI);e++);else fallEnemyWaySet(t);enemy[t].turnTime++}function fallEnemyWayWalk(e){"left"==enemy[e].vec&&(enemy[e].x-=enemy[e].v*enemy[e].slow,enemy[e].x<=xI_x(enemy[e].xI-1))&&(enemy[e].x=xI_x(enemy[e].xI-1),enemy[e].standBy=-10),"right"==enemy[e].vec&&(enemy[e].x+=enemy[e].v*enemy[e].slow,enemy[e].x>=xI_x(enemy[e].xI+1))&&(enemy[e].x=xI_x(enemy[e].xI+1),enemy[e].standBy=-10),"down"==enemy[e].vec&&(enemy[e].y+=enemy[e].v*enemy[e].slow,enemy[e].y>=yI_y(enemy[e].yI+1))&&(enemy[e].y=yI_y(enemy[e].yI+1),enemy[e].standBy=-10),"up"==enemy[e].vec&&(enemy[e].y-=enemy[e].v*enemy[e].slow,enemy[e].y<=yI_y(enemy[e].yI-1))&&(enemy[e].y=yI_y(enemy[e].yI-1),enemy[e].standBy=-10)}function timeStopEnemy(t){var a=[NaN,1e6,1e6];let e,n;for(let e=1;e<=2;e++)0!=player[e].pad&&"miss"!=player[e].state&&(VectorEasy(enemy[t],player[e]),a[e]=lastVec.z);return e=a[1]<=a[2]?a[1]:a[2],(n=1<=(n=(e-80)/320)?1:n)<=0&&(n=0),0==timeStop&&(n=1),easyLevelCheck()&&(n*=.5),hardLevelCheck()&&21!=enemy[t].type&&(n*=1.6),n}function LR_random(){let e=Math.floor(2*Math.random());return e=0===e?"left":"right"}function P1P2_randomTarget(){let e;return e=0==player[2].pad||"miss"==player[2].state?1:0==player[1].pad||"miss"==player[1].state?2:Math.floor(2*Math.random())+1}function P1P2_distance(t){let e;var a=[];if(0==player[2].pad||"miss"==player[2].state)e=1;else if(0==player[1].pad||"miss"==player[1].state)e=2;else{for(let e=1;e<=2;e++)Vector(t.x,t.y,player[e].x,player[e].y),a[e]=lastVec.z;e=a[1]<a[2]?1:a[2]<a[1]?2:Math.floor(2*Math.random())+1}return e}function P1P2_distanceTarget(){return P1P2_distance(boss)}function setImageBoss(e,t){setImage(e,t),bossBlastDisplayBasic()}function vecReverse(e){let t;return"left"==e?t="right":"right"==e&&(t="left"),"up"==e&&(t="down"),t="down"==e?"up":t}function upOrDown(e){return["up","down"][e]}function leftOrRight(e){return["left","right"][e]}function jumpChange(e){return 1==e?e=3:3==e&&(e=1),e}function randomPlusOrMinus(){let e=Math.floor(2*Math.random());return e=0===e?-1:e}function easyLevelCheck(){return 1==easyLevel&&0==challenge&&0==battle}function easySpeedGimmick(){let e;return e=easyLevelCheck()?.5:1,e=hardLevelCheck()?1.2:e}function easySpeedBoss(){let e;return e=easyLevelCheck()?.7:1,e=hardLevelCheck()?1.15:e}function easySpeedBubble(e){let t;return t=easyLevelCheck()&&20==e?.7:hardLevelCheck()?1.1:1}function findFreePositions(a){var n=[];for(let t=0;t<11;t++)for(let e=0;e<17;e++)0===a[t][e]&&n.push({xI:e,yI:t});return n}function findBooSpiPositions(a){var n=[];for(let t=0;t<11;t++)for(let e=0;e<17;e++)2===a[t][e]&&n.push({xI:e,yI:t});return n}let sound=[],soundName=[];for(let e=0;e<16;e++)sound[e]=new Audio,soundName[e]=void 0;function soundPlayer(){for(let e=0;e<16;e++)void 0!==soundName[e]&&(soundSet(e),soundName[e]=void 0)}function soundPlay(e,t,a,n){e.volume=t,e.loop=a,e.src="mp3/"+n+".mp3",e.play()}function soundSet(e){"play"==soundName[e]?sound[e].play():"pause"==soundName[e]&&sound[e].pause(),bs<=0&&("se/confirm"==soundName[e]?soundPlay(sound[e],.65,!1,soundName[e]):"se/back"==soundName[e]?soundPlay(sound[e],.6,!1,soundName[e]):"se/1up"==soundName[e]?soundPlay(sound[e],.8,!1,soundName[e]):"se/select"==soundName[e]?soundPlay(sound[e],.85,!1,soundName[e]):"se/itemGet"==soundName[e]?soundPlay(sound[e],.8,!1,soundName[e]):"se/throwWeapon"==soundName[e]||"se/itemCatch"==soundName[e]||"se/itemBlock"==soundName[e]||"se/pauseIn"==soundName[e]||"se/pauseOut"==soundName[e]||"se/friendStun"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"se/dolphinJump"==soundName[e]||"se/jump"==soundName[e]||"se/warp"==soundName[e]?soundPlay(sound[e],.6,!1,soundName[e]):"se/step"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"se/timeUp"==soundName[e]?soundPlay(sound[e],.8,!1,soundName[e]):"se/miss"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"se/gong"==soundName[e]?soundPlay(sound[e],.8,!1,soundName[e]):"se/defeatEnemy"==soundName[e]||"se/defeatEnemySuper"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"se/goal"==soundName[e]?soundPlay(sound[e],.85,!1,soundName[e]):"se/drown"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"se/energyCard"==soundName[e]?soundPlay(sound[e],.85,!1,soundName[e]):"se/madHookArm"==soundName[e]||"se/passMiss"==soundName[e]||"se/virus"==soundName[e]||"se/quake"==soundName[e]?soundPlay(sound[e],1,!1,soundName[e]):"bgm/opening"==soundName[e]?soundPlay(sound[e],.7,!0,soundName[e]):"bgm/title"==soundName[e]?soundPlay(sound[e],.5,!1,soundName[e]):"bgm/bgm1"==soundName[e]?soundPlay(sound[e],.5,!0,soundName[e]):"bgm/start"==soundName[e]||"bgm/clear"==soundName[e]?soundPlay(sound[e],.8,!1,soundName[e]):"bgm/gameOver"==soundName[e]?soundPlay(sound[e],.6,!0,soundName[e]):"bgm/stageSelect"==soundName[e]?soundPlay(sound[e],.5,!0,soundName[e]):"bgm/info"==soundName[e]||"bgm/areaSelect"==soundName[e]?soundPlay(sound[e],.6,!0,soundName[e]):"voice/1/ouch"!=soundName[e]&&"voice/2/ouch"!=soundName[e]&&"voice/1/miss"!=soundName[e]&&"voice/1/drown"!=soundName[e]&&"voice/2/miss"!=soundName[e]&&"voice/1/timeUp"!=soundName[e]&&"voice/2/timeUp"!=soundName[e]&&"voice/1/4way"!=soundName[e]&&"voice/2/4way"!=soundName[e]&&"voice/1/heart"!=soundName[e]&&"voice/2/heart"!=soundName[e]&&"voice/1/big"!=soundName[e]&&"voice/2/big"!=soundName[e]&&"voice/1/slow"!=soundName[e]&&"voice/2/slow"!=soundName[e]&&"voice/1/invincible"!=soundName[e]&&"voice/2/invincible"!=soundName[e]&&"voice/1/stop"!=soundName[e]&&"voice/2/stop"!=soundName[e]&&"voice/1/stagger"!=soundName[e]&&"voice/2/stagger"!=soundName[e]&&"voice/1/hurry"!=soundName[e]&&"voice/2/hurry"!=soundName[e]&&"voice/1/card1"!=soundName[e]&&"voice/1/card2"!=soundName[e]&&"voice/1/card3"!=soundName[e]||soundPlay(sound[e],1,!1,soundName[e]))}const loadSoundName=[["se/confirm","se/back","se/1up","se/select","se/itemGet","se/throwWeapon","se/itemCatch","se/itemBlock","se/pauseIn","se/pauseOut","se/friendStun","se/jump","se/step","se/bossBlast","se/timeUp","se/miss","se/defeatEnemy","se/defeatEnemySuper","se/goal","se/madHookArm","se/passMiss"],["bgm/title","bgm/bgm1","bgm/boss","bgm/start","bgm/clear","bgm/stageSelect","bgm/areaSelect","bgm/gameOver","bgm/info"],["voice/1/ouch","voice/1/miss","voice/1/timeUp","voice/1/heart","voice/1/invincible","voice/1/stagger","voice/1/stop","voice/1/hurry","voice/2/ouch","voice/2/miss","voice/2/timeUp","voice/2/heart","voice/2/invincible","voice/2/stagger","voice/2/stop","voice/2/hurry"]];let loadSound=[];function loadingSound(){for(let t=0;t<3;t++){loadSound[t]=[];for(let e=0;e<loadSoundName[t].length;e++)loadSound[t][e]=new Audio,loadSound[t][e].src="mp3/"+loadSoundName[t][e]+".mp3"}}function animeFrame(e,t,a){return e.k++,e.k>=t&&(e.k=0,e.p++),e.p>=a&&(e.p=0),e}function frameReset(e){return e.p=0,e.k=0,e}loadingSound();const screen=document.getElementById("screen");screen.style.opacity=1;let scene,nextScene=void 0,bs=101,shift=0,ct=50,change=0,change_level=.1,change_time=0;function blackout(){100==(bs=null!=nextScene&&100!=bs&&101!=bs&&-100!=bs&&-99!=bs&&200!=bs?100:bs)?(change-=change_level)<=0&&(change=0,bs=101):101==bs?++change_time>=ct&&(bs=200):200==bs?(scene="alert"!==nextScene&&"RAMUNE SPARK"!==copyRight?"error":nextScene,ct=50,change_level=.1,selectScene=0,selectTextReset(),change_time=0,bs=-100,shift=0,RemoveAll(),clearBlack()):-100==bs?bs=-99:-99==bs&&1<=(change+=change_level)&&(change=1,bs=0,nextScene=void 0),screen.style.opacity=change}const Player=5;let kPlayer=1,lrk=[],udk=[],k=[];const bt=["A","B","X","Y","Start","Select","L1","R1","L2","R2"];for(let e=0;e<bt.length;e++)k[bt[e]]=[];for(let t=1;t<=Player;t++){lrk[t]=!1,udk[t]=!1;for(let e=0;e<bt.length;e++)k[bt[e]][t]=!1}let keyState={},playOK=0;function keyCheck(){keyState[37]||keyState[65]?lrk[kPlayer]="left":"left"==lrk[kPlayer]&&(lrk[kPlayer]=!1),keyState[39]||keyState[68]?lrk[kPlayer]="right":"right"==lrk[kPlayer]&&(lrk[kPlayer]=!1),keyState[38]||keyState[87]?udk[kPlayer]="up":"up"==udk[kPlayer]&&(udk[kPlayer]=!1),keyState[40]||keyState[83]?udk[kPlayer]="down":"down"==udk[kPlayer]&&(udk[kPlayer]=!1),keyState[13]||keyState[90]?k.A[kPlayer]=!0:1==k.A[kPlayer]&&(k.A[kPlayer]=!1),keyState[27]||keyState[8]||keyState[88]?k.B[kPlayer]=!0:1==k.B[kPlayer]&&(k.B[kPlayer]=!1),keyState[67]||keyState[76]?k.Y[kPlayer]=!0:1==k.Y[kPlayer]&&(k.Y[kPlayer]=!1),keyState[86]||keyState[46]?k.X[kPlayer]=!0:1==k.X[kPlayer]&&(k.X[kPlayer]=!1),keyState[49]?k.L1[kPlayer]=!0:1==k.L1[kPlayer]&&(k.L1[kPlayer]=!1),keyState[48]?k.R1[kPlayer]=!0:1==k.R1[kPlayer]&&(k.R1[kPlayer]=!1),keyState[50]?k.L2[kPlayer]=!0:1==k.L2[kPlayer]&&(k.L2[kPlayer]=!1),keyState[57]?k.R2[kPlayer]=!0:1==k.R2[kPlayer]&&(k.R2[kPlayer]=!1),keyState[32]?k.Start[kPlayer]=!0:1==k.Start[kPlayer]&&(k.Start[kPlayer]=!1),keyState[116]?k.Select[kPlayer]=!0:1==k.Select[kPlayer]&&(k.Select[kPlayer]=!1)}document.onkeydown=function(e){e.preventDefault(),1==playOK&&(keyState[e.keyCode]=!0)},document.onkeyup=function(e){e.preventDefault(),keyState[e.keyCode]=!1};let connectedGamepadIndex=[null,null,null,null,null,null],gamePadLoopID,pad=[null,null,null,null,null,null],padID=[null,null,null,null,null,null],Stick={L:{V:[],H:[]},R:{V:[],H:[]}};function kPlayCheck(){for(let e=1;e<=Player;e++)if(null==padID[e]){kPlayer=e;break}}addEventListener("gamepadconnected",e=>{(e.gamepad.id.startsWith("HID 準拠ゲーム コントローラー")||e.gamepad.id.startsWith("Xbox Wireless Controller")||e.gamepad.id.startsWith("HORIPAD S")||e.gamepad.id.startsWith("Pro Controller")||e.gamepad.id.startsWith("Wireless Gamepad")||e.gamepad.id.startsWith("8BitDo SN30 Pro+"))&&(connectedGamepadIndex[kPlayer]=e.gamepad.index,pad[kPlayer]=e.gamepad,padID[kPlayer]=e.gamepad.id,kPlayCheck(),dct=0,null==gamePadLoopID)&&(gamePadLoopID=1)}),addEventListener("gamepaddisconnected",e=>{var t=e.gamepad.index;let a=null;var n=e.gamepad.id;console.log(e.gamepad);for(let e=1;e<=Player;e++)if(n===padID[e]&&t===connectedGamepadIndex[e]){a=e;break}connectedGamepadIndex[a]=null,pad[a]=null,padID[a]=null,keyReset(a),kPlayCheck(),dct=0,null==padID[1]&&null==padID[2]&&null==padID[3]&&null==padID[4]&&null==padID[5]&&(gamePadLoopID=void 0)});const BUTTON_A_INDEX=1,BUTTON_B_INDEX=0,BUTTON_X_INDEX=3,BUTTON_Y_INDEX=2,BUTTON_SELECT_INDEX=8,BUTTON_START_INDEX=9,BUTTON_UP_INDEX=12,BUTTON_DOWN_INDEX=13,BUTTON_LEFT_INDEX=14,BUTTON_RIGHT_INDEX=15,BUTTON_HOME_INDEX=16,BUTTON_L_INDEX=4,BUTTON_R_INDEX=5,BUTTON_ZL_INDEX=6,BUTTON_ZR_INDEX=7,AXIS_L_HORIZONTAL_INDEX=0,AXIS_L_VERTICAL_INDEX=1,AXIS_R_HORIZONTAL_INDEX=2,AXIS_R_VERTICAL_INDEX=3;function gamePadLoop(){var t=navigator.getGamepads(),a=gpSet(t,[]),n={a:[],b:[],x:[],y:[],start:[],select:[],up:[],down:[],left:[],right:[],l:[],r:[],zl:[],zr:[]},i={L:{Horizontal:[],Vertical:[]},R:{Horizontal:[],Vertical:[]}};for(let e=1;e<=4;e++)null!==padID[e]&&gamepadInput(e,n,a,t,i)}function keyReset(t){lrk[t]=!1,udk[t]=!1;for(let e=0;e<bt.length;e++)k[bt[e]][t]=!1}function gpSet(e,a){var n=[null,null,null,null,null,null];for(let t=0;t<4;t++){a[t+1]=e[t];for(let e=0;e<4;e++)if(null!==a[t+1]&&!a[t+1].id.startsWith("Surface Type Cover")&&null===n[e+1]){n[e+1]=a[t+1];break}}return n}function gamepadInput(e,t,a,n,i){var s;"PCEngine PAD"==padID[e].startsWith?(t.a[e]=a[e].buttons[BUTTON_A_INDEX],t.y[e]=a[e].buttons[BUTTON_Y_INDEX],t.start[e]=a[e].buttons[BUTTON_START_INDEX],t.select[e]=a[e].buttons[BUTTON_SELECT_INDEX],t.up[e]=a[e].buttons[BUTTON_UP_INDEX],t.down[e]=a[e].buttons[BUTTON_DOWN_INDEX],t.left[e]=a[e].buttons[BUTTON_LEFT_INDEX],t.right[e]=a[e].buttons[BUTTON_RIGHT_INDEX],exists(t.y[e])&&(1==t.y[e].value?k.A[e]=!0:k.A[e]=!1),exists(t.a[e])&&(1==t.a[e].value?k.B[e]=!0:k.B[e]=!1),exists(t.start[e])&&(1==t.start[e].value?k.Start[e]=!0:k.Start[e]=!1),exists(t.select[e])&&(1==t.select[e].value?k.Select[e]=!0:k.Select[e]=!1),3285==(s=Math.floor(1e3*a[e].axes[9]))&&(udk[e]=!1,lrk[e]=!1),-1e3==s&&(udk[e]="up",lrk[e]=!1),1e3==s&&(udk[e]="up",lrk[e]="left"),714==s&&(udk[e]=!1,lrk[e]="left"),428==s&&(udk[e]="down",lrk[e]="left"),142==s&&(udk[e]="down",lrk[e]=!1),-143==s&&(udk[e]="down",lrk[e]="right"),-429==s&&(udk[e]=!1,lrk[e]="right"),-715==s&&(udk[e]="up",lrk[e]="right")):exists(a[e].buttons)&&(t.a[e]=a[e].buttons[BUTTON_A_INDEX],t.b[e]=a[e].buttons[BUTTON_B_INDEX],t.x[e]=a[e].buttons[BUTTON_X_INDEX],t.y[e]=a[e].buttons[BUTTON_Y_INDEX],t.start[e]=a[e].buttons[BUTTON_START_INDEX],t.select[e]=a[e].buttons[BUTTON_SELECT_INDEX],t.up[e]=a[e].buttons[BUTTON_UP_INDEX],t.down[e]=a[e].buttons[BUTTON_DOWN_INDEX],t.left[e]=a[e].buttons[BUTTON_LEFT_INDEX],t.right[e]=a[e].buttons[BUTTON_RIGHT_INDEX],t.l[e]=a[e].buttons[BUTTON_L_INDEX],t.r[e]=a[e].buttons[BUTTON_R_INDEX],t.zl[e]=a[e].buttons[BUTTON_ZL_INDEX],t.zr[e]=a[e].buttons[BUTTON_ZR_INDEX],i.L.Horizontal[e]=a[e].axes[AXIS_L_HORIZONTAL_INDEX],i.L.Vertical[e]=a[e].axes[AXIS_L_VERTICAL_INDEX],i.R.Horizontal[e]=a[e].axes[AXIS_R_HORIZONTAL_INDEX],i.R.Vertical[e]=a[e].axes[AXIS_R_VERTICAL_INDEX],"8BitDo SN30 Pro+"==padID[e].startsWith?(exists(t.b[e])&&(1==t.b[e].value?k.A[e]=!0:k.A[e]=!1),exists(t.a[e])&&(1==t.a[e].value?k.B[e]=!0:k.B[e]=!1),exists(t.y[e])&&(1==t.y[e].value?k.X[e]=!0:k.X[e]=!1),exists(t.x[e])&&(1==t.x[e].value?k.Y[e]=!0:k.Y[e]=!1)):(exists(t.a[e])&&(1==t.a[e].value?k.A[e]=!0:k.A[e]=!1),exists(t.b[e])&&(1==t.b[e].value?k.B[e]=!0:k.B[e]=!1),exists(t.x[e])&&(1==t.x[e].value?k.X[e]=!0:k.X[e]=!1),exists(t.y[e])&&(1==t.y[e].value?k.Y[e]=!0:k.Y[e]=!1)),exists(t.start[e])&&(1==t.start[e].value?k.Start[e]=!0:k.Start[e]=!1),exists(t.select[e])&&(1==t.select[e].value?k.Select[e]=!0:k.Select[e]=!1),exists(t.l[e])&&(1==t.l[e].value?k.L1[e]=!0:k.L1[e]=!1),exists(t.r[e])&&(1==t.r[e].value?k.R1[e]=!0:k.R1[e]=!1),exists(t.zl[e])&&(1==t.zl[e].value?k.L2[e]=!0:k.L2[e]=!1),exists(t.zr[e])&&(1==t.zr[e].value?k.R2[e]=!0:k.R2[e]=!1),exists(t.left[e])&&exists(t.right[e])&&(1==t.left[e].value?lrk[e]="left":1==t.right[e].value?lrk[e]="right":lrk[e]=!1),exists(t.up[e])&&exists(t.down[e])&&(1==t.up[e].value?udk[e]="up":1==t.down[e].value?udk[e]="down":udk[e]=!1),Stick.L.H[e]=Math.trunc(1e4*i.L.Horizontal[e]),Stick.L.V[e]=-Math.trunc(1e4*i.L.Vertical[e]),Stick.R.H[e]=Math.trunc(1e4*i.R.Horizontal[e]),Stick.R.V[e]=-Math.trunc(1e4*i.R.Vertical[e]),exists(t.left[e]))&&exists(t.right[e])&&exists(t.up[e])&&exists(t.down[e])&&0==t.left[e].value&&0==t.right[e].value&&0==t.up[e].value&&0==t.down[e].value&&(Math.abs(Stick.L.H[e])>=stickSenceVar[stickSence]||Math.abs(Stick.L.V[e])>=stickSenceVar[stickSence]?Math.abs(lstTheta(e)-.25*Math.PI)<rGVar[rG]?(lrk[e]="right",udk[e]="up"):Math.abs(lstTheta(e)-.75*Math.PI)<rGVar[rG]?(lrk[e]="right",udk[e]="down"):Math.abs(lstTheta(e)-Math.PI*(5/4))<rGVar[rG]?(lrk[e]="left",udk[e]="down"):Math.abs(lstTheta(e)-Math.PI*(7/4))<rGVar[rG]?(lrk[e]="left",udk[e]="up"):0<Stick.L.V[e]&&Math.abs(Stick.L.H[e])<Math.abs(Stick.L.V[e])?(lrk[e]=!1,udk[e]="up"):Stick.L.V[e]<0&&Math.abs(Stick.L.H[e])<Math.abs(Stick.L.V[e])?(lrk[e]=!1,udk[e]="down"):Stick.L.H[e]<0&&Math.abs(Stick.L.H[e])>Math.abs(Stick.L.V[e])?(lrk[e]="left",udk[e]=!1):0<Stick.L.H[e]&&Math.abs(Stick.L.H[e])>Math.abs(Stick.L.V[e])&&(lrk[e]="right",udk[e]=!1):(udk[e]=!1,lrk[e]=!1))}function lstTheta(e){let t=Math.atan2(Stick.L.H[e],Stick.L.V[e]);return t<0&&(t+=2*Math.PI),t}let stickSence=1;const stickSenceText=["ちいさめ","ふつう","おおきめ","ON"],stickSenceVar=[4e3,8e3,9900,2e4];let rG=1;const rGText=["OFF","ふつう","つよい"],rGVar=[Math.PI*(1/8),Math.PI*(1/12),Math.PI*(1/30)];function vib(e,t,a){navigator.getGamepads&&(e=gpSet(navigator.getGamepads(),[])[e],1==vibration)&&(e&&e.hapticActuators&&e.hapticActuators[0]?(e.hapticActuators[0].reset(),e.hapticActuators[0].pulse(t,a)):e&&e.vibrationActuator&&(e.vibrationActuator.reset(),e.vibrationActuator.playEffect("dual-rumble",{startDelay:0,duration:a,weakMagnitude:t,strongMagnitude:t})))}function stopVib(e){navigator.getGamepads&&((e=gpSet(navigator.getGamepads(),[])[e])&&e.hapticActuators&&e.hapticActuators[0]?e.hapticActuators[0].reset():e&&e.vibrationActuator&&e.vibrationActuator.reset())}function attackVib(e){vib(e,.3,130)}function attackGimmickVib(e){vib(e,.3,130)}function missVib(e){vib(e,.4,400)}function itemVib(e){vib(e,.3,130)}function catchVib(e){vib(e,.2,130)}function lossVib(e){vib(e,.25,250)}function stunVib(e){vib(e,.35,300)}function staggerVib(e){vib(e,.25,500)}function hyperVib(e){vib(e,.3,500)}function onVib(){for(let e=1;e<=2;e++)vib(e,.25,500)}function endingVib(){for(let e=1;e<=2;e++)0!=player[e].pad&&vib(e,.25,1e4)}function endingVib2(){for(let e=1;e<=2;e++)0!=player[e].pad&&vib(e,.3,400)}let lCount=[],rCount=[],uCount=[],dCount=[],lm=[],rm=[],um=[],dm=[],lCount_1t=[],rCount_1t=[],uCount_1t=[],dCount_1t=[],lm_1t=[],rm_1t=[],um_1t=[],dm_1t=[],kCount=[],kCount_1t=[],km=[],km_1t=[];for(let e=0;e<bt.length;e++)kCount[bt[e]]=[],kCount_1t[bt[e]]=[],km[bt[e]]=[],km_1t[bt[e]]=[];for(let t=1;t<=Player;t++){lCount[t]=0,rCount[t]=0,uCount[t]=0,dCount[t]=0,lCount_1t[t]=0,rCount_1t[t]=0,uCount_1t[t]=0,dCount_1t[t]=0,lm[t]=!1,rm[t]=!1,um[t]=!1,dm[t]=!1,lm_1t[t]=!1,rm_1t[t]=!1,um_1t[t]=!1,dm_1t[t]=!1;for(let e=0;e<bt.length;e++)kCount[bt[e]][t]=0,kCount_1t[bt[e]][t]=0,km[bt[e]][t]=!1,km_1t[bt[e]][t]=!1}let k2ndTime=40,k3rdTime=8;function hold_down(){holdDownDpad(),holdDownButton()}function holdDownButton(){for(let t=1;t<=Player;t++)for(let e=0;e<bt.length;e++)kCount[bt[e]][t]>=k2ndTime&&(kCount[bt[e]][t]-=k3rdTime,kCount_1t[bt[e]][t]-=k3rdTime),1==k[bt[e]][t]?(kCount[bt[e]][t]++,kCount_1t[bt[e]][t]++):(kCount[bt[e]][t]=0,kCount_1t[bt[e]][t]=0),100!=bs&&101!=bs&&-100!=bs?(1==kCount[bt[e]][t]||kCount[bt[e]][t]==k2ndTime?km[bt[e]][t]=!0:km[bt[e]][t]=!1,1==kCount_1t[bt[e]][t]?km_1t[bt[e]][t]=!0:km_1t[bt[e]][t]=!1):(kCount[bt[e]][t]=0,km_1t[bt[e]][t]=!1)}function holdDownDpad(){for(let e=1;e<=Player;e++)lCount[e]>=k2ndTime&&(lCount[e]-=k3rdTime,lCount_1t[e]-=k3rdTime),"left"==lrk[e]?(lCount[e]++,lCount_1t[e]++):(lCount[e]=0,lCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==lCount[e]||lCount[e]==k2ndTime?lm[e]=!0:lm[e]=!1,1==lCount_1t[e]?lm_1t[e]=!0:lm_1t[e]=!1):(lCount[e]=0,lm_1t[e]=!1),rCount[e]>=k2ndTime&&(rCount[e]-=k3rdTime,rCount_1t[e]-=k3rdTime),"right"==lrk[e]?(rCount[e]++,rCount_1t[e]++):(rCount[e]=0,rCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==rCount[e]||rCount[e]==k2ndTime?rm[e]=!0:rm[e]=!1,1==rCount_1t[e]?rm_1t[e]=!0:rm_1t[e]=!1):(rCount[e]=0,rm_1t[e]=!1),dCount[e]>=k2ndTime&&(dCount[e]-=k3rdTime,dCount_1t[e]-=k3rdTime),"down"==udk[e]?(dCount[e]++,dCount_1t[e]++):(dCount[e]=0,dCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==dCount[e]||dCount[e]==k2ndTime?dm[e]=!0:dm[e]=!1,1==dCount_1t[e]?dm_1t[e]=!0:dm_1t[e]=!1):(dCount[e]=0,dm_1t[e]=!1),uCount[e]>=k2ndTime&&(uCount[e]-=k3rdTime,uCount_1t[e]-=k3rdTime),"up"==udk[e]?(uCount[e]++,uCount_1t[e]++):(uCount[e]=0,uCount_1t[e]=0),100!=bs&&101!=bs&&-100!=bs?(1==uCount[e]||uCount[e]==k2ndTime?um[e]=!0:um[e]=!1,1==uCount_1t[e]?um_1t[e]=!0:um_1t[e]=!1):(uCount[e]=0,um_1t[e]=!1)}let mouseX,mouseY,mouseC="no",dcy=(screen.addEventListener("mousedown",e=>{mouseC="click!"}),screen.addEventListener("mouseup",e=>{mouseC="no"}),screen.addEventListener("mousemove",e=>{e.preventDefault,mouseX=e.offsetX,mouseY=e.offsetY}),-300),dct=3e3,dco=0,div_controller=[];for(let e=1;e<=Player;e++)document.write("<div id= controller"+e+"> </div>"),div_controller[e]=document.getElementById("controller"+e),defaultSet(div_controller[e],screen),putXY(div_controller[e],100*e+800,dcy),translate(div_controller[e],Left,Top),div_controller[e].style.zIndex=1e9,div_controller[e].style.mixBlendMode="normal",setImage(div_controller[e],"");let div_controllerType=[];for(let e=1;e<=Player;e++)document.write("<div id= controllerType"+e+"> </div>"),div_controllerType[e]=document.getElementById("controllerType"+e),defaultSet(div_controllerType[e],screen),putXY(div_controllerType[e],100*e+800,dcy),translate(div_controllerType[e],Left,Top),div_controllerType[e].style.zIndex=1000000001,div_controllerType[e].style.mixBlendMode="normal",setImage(div_controllerType[e],"");function displayController(){0==dct&&(dcy=-300,dco=1),dct<3e3&&(dct++,dcy+=20),20<=dcy&&(dcy=20),220<dct&&(dco-=.1),dco<0&&(dct=3e3,dcy=-300,dco=0),playerNumber=0;for(let e=1;e<=2;e++)3e3!=dct?(setImage(div_controller[e],"sys/"+e+"P.png"),e==kPlayer?setImage(div_controllerType[e],"sys/keyboard.png"):null!==padID[e]?setImage(div_controllerType[e],"sys/gamepad.png"):Remove(div_controllerType[e])):(Remove(div_controllerType[e]),Remove(div_controller[e])),putXY(div_controller[e],100*e+1100,dcy),putXY(div_controllerType[e],100*e+1100,dcy),div_controller[e].style.opacity=dco,div_controllerType[e].style.opacity=dco}function setDeviceNumber(){let t=0;for(let e=1;e<=2;e++)(e==kPlayer||null!==padID[e])&&t++;return t}function wasd(e){let t;var a="WASD/"+Rb("矢印","やじるし")+"キー",n=Rb("方向","ほうこう")+"キー";return t=0==e?1==kPlayer?a:n:e==kPlayer?a:n}function aButton(e){let t;var a="Enter/Z";return t=0==e?1==kPlayer?a:"Aボタン":e==kPlayer?a:"Aボタン"}function bButton(e){let t;var a="BackSpace/X/Esc";return t=0==e?1==kPlayer?a:"Bボタン":e==kPlayer?a:"Bボタン"}function xButton(e){let t;return t=0==e?1==kPlayer?"Del/V":"Xボタン":e==kPlayer?"Del/V":"Xボタン"}function yButton(e){let t;return t=0==e?1==kPlayer?"L/C":"Yボタン":e==kPlayer?"L/C":"Yボタン"}function rButton(e){let t;return t=0==e?1==kPlayer?"0キー":"Rボタン":e==kPlayer?"0キー":"Rボタン"}function selectButton(e,t){let a;var n={jpn:"F5キー",enJp:"F5キー",en:"F5 KEY",no:"F5"},i={jpn:"セレクトボタン",enJp:"SELECTボタン",en:"SELECT BUTTON",no:"SELECT"};return a=(0==e?1==kPlayer?n:i:e==kPlayer?n:i)[t]}function startButton(e,t){let a;var n={jpn:"スペースキー",enJp:"SPACEキー",en:"SPACE KEY",no:"SPACE"},i={jpn:"スタートボタン",enJp:"STARTボタン",en:"START BUTTON",no:"START"};return a=(0==e?1==kPlayer?n:i:e==kPlayer?n:i)[t]}function selectButton(e,t){let a;var n={jpn:"F5キー",enJp:"F5キー",en:"F5 KEY",no:"F5"},i={jpn:"セレクトボタン",enJp:"SELECTボタン",en:"SELECT BUTTON",no:"SELECT"};return a=(0==e?1==kPlayer?n:i:e==kPlayer?n:i)[t]}function allClearButton(e){let t;var a="SELECT+X+Y",n="[F5]+[Del or V]+[L or C]";return t=0==e?1==kPlayer?n:a:e==kPlayer?n:a}const fps=50,fps2=1e3/fps;function move(){monitorResize(),mouseCursorHidden(),displayController(),1==gamePadLoopID&&gamePadLoop(),keyCheck();for(let e=1;e<=2;e++)"game"==scene&&virusAwaAwa(e);hold_down(),run(),blackout(),debug()}function itemDesign(){1==stage.s&&1==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=0,item[2].type=1,item[19].type=0,item[20].type=1),1==stage.s&&2==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=1,item[2].type=1,item[19].type=0,item[20].type=1),1==stage.s&&3==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=1,item[2].type=5,item[19].type=0,item[20].type=1),1==stage.s&&4==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=1,item[2].type=8,item[19].type=0,item[20].m=-200),1==stage.s&&5==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=1,item[2].type=4,item[19].type=1,item[20].m=-200),1==stage.s&&6==stage.a&&(itemNumber=3,item[0].type=0,item[1].type=1,item[2].type=9,item[19].type=1,item[20].type=0),1==stage.s&&7==stage.a&&(itemNumber=2,item[0].type=1,item[1].type=3,item[19].type=1,item[20].m=-200),1==stage.s&&8==stage.a&&(itemNumber=5,item[0].type=0,item[1].type=0,item[2].type=0,item[3].type=1,item[4].type=1,item[19].type=0,item[20].type=1)}function enemyDesign(){gimmickRemove(),lightGimmick=0,wind=0,booSpiReset(),boss.stage=!1;for(let e=0;e<enemyDisplayMax;e++)enemy[e].m=0,Remove(div_enemy[e]),Remove(div_enemyShadow[e]),Remove(div_enemyScore[e]),Remove(div_enemyLine[e]);for(let e=goal.m=0;e<enemyAllType;e++)enemyNumber[e]=0;enemyAppear=.03,1==stage.s&&1==stage.a&&(enemyNumber[0]=8,screenEnemyMax=4,stageMap=[[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9]],mapWall(),skin="Prison",startLocation[1]={xI:4,yI:2},startLocation[2]={xI:12,yI:9},goal.xI=8,goal.yI=8),1==stage.s&&2==stage.a&&(enemyNumber[0]=12,screenEnemyMax=5,stageMap=[[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9]],mapWall(),skin="Prison",startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},goal.xI=8,goal.yI=6),1==stage.s&&3==stage.a&&(enemyNumber[1]=14,screenEnemyMax=4,stageMap=[[9,9,1,1,1,1,1,9,9,9,1,1,1,1,1,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9],[9,9,1,0,0,0,0,1,1,1,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,1,1,1,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,1,1,1,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,1,1,1,0,0,0,0,1,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9]],mapWall(),skin="Prison",startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},goal.xI=3,goal.yI=9),1==stage.s&&4==stage.a&&(enemyNumber[0]=8,enemyNumber[1]=6,screenEnemyMax=5,stageMap=[[9,9,1,1,1,1,1,9,9,9,1,1,1,1,9,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,1,9,9,9],[9,9,1,0,0,0,0,0,0,0,1,0,0,1,9,9,9],[9,9,1,0,0,0,0,0,0,0,1,0,0,1,9,9,9],[9,9,1,1,0,0,1,0,0,0,1,0,0,1,9,9,9],[9,9,9,1,0,0,1,0,0,0,1,0,0,1,1,9,9],[9,9,9,1,0,0,1,0,0,0,0,0,0,0,1,9,9],[9,9,9,1,0,0,1,0,0,0,0,0,0,0,1,9,9],[9,9,9,1,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,9,1,1,1,1,1,1,1,1,1,1,1,1,9,9]],mapWall(),skin="Prison",startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},goal.xI=7,goal.yI=8),1==stage.s&&5==stage.a&&(enemyNumber[2]=10,enemyNumber[0]=6,screenEnemyMax=7,stageMap=[[9,9,1,1,1,1,1,9,9,9,1,1,1,1,1,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,1,1,1,1,1,0,0,0,1,9,9],[9,9,1,0,0,0,1,9,9,9,1,0,0,0,1,9,9],[9,9,1,0,0,0,1,9,9,9,1,0,0,0,1,9,9],[9,9,1,0,0,0,1,1,1,1,1,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9]],mapWall(),skin="Prison",startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},goal.xI=8,goal.yI=3),1==stage.s&&6==stage.a&&(enemyNumber[2]=6,enemyNumber[3]=12,screenEnemyMax=6,stageMap=[[9,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,9],[9,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,9],[9,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9],[9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9],[9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9],[9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9]],mapWall(),skin="Prison",startLocation[1]={xI:2,yI:9},startLocation[2]={xI:14,yI:9},goal.xI=8,goal.yI=6),1==stage.s&&7==stage.a&&(enemyNumber[0]=2,enemyNumber[1]=3,enemyNumber[2]=4,enemyNumber[3]=5,screenEnemyMax=6,stageMap=[[9,9,1,1,1,1,1,9,9,9,1,1,1,1,1,9,9],[9,9,1,1,1,1,1,9,1,1,1,1,1,1,1,9,9],[9,9,1,0,0,0,1,9,1,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,1,9,1,0,0,0,0,0,1,9,9],[9,9,1,0,0,1,1,9,1,1,1,0,1,1,1,9,9],[9,9,1,0,0,1,9,9,9,9,1,0,1,9,9,9,9],[9,9,1,0,0,1,9,9,9,9,1,0,1,9,9,9,9],[9,9,1,0,0,1,1,1,1,1,1,0,1,1,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,0,0,0,0,0,0,0,0,0,0,0,1,9,9],[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9]],mapWall(),skin="Prison",startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},goal.xI=9,goal.yI=3),1==stage.s&&8==stage.a&&(boss.stage=!0,boss.name="madHook",boss.HP=12,boss.m=0,stageMap=[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,0,0,0,0,0,0,0,0,0,9,9,9,9],[9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9],[9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9],[9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9],[9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9],[9,9,9,0,0,0,0,0,0,0,0,0,0,0,9,9,9],[9,9,9,1,0,0,0,0,0,0,0,0,0,1,9,9,9],[9,9,9,9,1,1,1,1,1,1,1,1,1,9,9,9,9]],mapWall(),skin="Prison",startLocation[1]={xI:6,yI:8},startLocation[2]={xI:10,yI:8},goal.xI=8,goal.yI=8),player1and2()&&boss.stage&&(boss.HP+=4),easyLevelCheck()&&(stageDesignEasy(),boss.stage)&&(boss.HP-=3,boss.HP<=1)&&(boss.HP=1),hardLevelCheck()&&stageDesignHard(),stageEnemyMax=enemySum()}function stageDesignEasy(){}function stageDesignHard(){}function itemDesignBattle(){}function enemyDesignBattle(){}setTimeout(()=>{setInterval("move()",fps2)},600);let booSpi={};function booSpiReset(){}function displaySpeed(e){}document.write("<div id= booSpiText> </div>");const div_booSpiText=document.getElementById("booSpiText"),div_booSpiText2=(defaultSet(div_booSpiText,screen),translate(div_booSpiText,Right,Bottom),fontSet(div_booSpiText,"#646444","Higashi","80","normal","right"),div_booSpiText.style.zIndex=-5,setText(div_booSpiText,""),document.write("<div id= booSpiText2> </div>"),document.getElementById("booSpiText2"));function bsc(e,t){}function speedToScore(e){}function booSpiDis(e){}function boomerangSpeed(e,t){}defaultSet(div_booSpiText2,screen),translate(div_booSpiText2,Right,Bottom),fontSet(div_booSpiText2,"#646444","Higashi","30","normal","right"),div_booSpiText2.style.zIndex=-5,setText(div_booSpiText2,"");let side=window.innerWidth,tate=window.innerHeight,screenOption=1,ri=0,p_scale=40,p_scaleX=40,p_scaleY=40;const rotate_switch=["0","90"],div_screenMax=(document.write("<div id= screenMax> </div>"),document.getElementById("screenMax"));function monitorResize(){phoneCheck();var e=div_screenMax.getBoundingClientRect();side=e.left,tate=e.top,ri=side>=tate?0:(tate=e.left,side=e.top,1),0!=screenOption&&1!=screenOption||(p_scale=1.5<=side/tate?tate/960:side/1440),2==screenOption&&(side/tate>=1280/960?(p_scaleY=tate/960,p_scaleX=tate/960,p_scaleX*=4/3/1.5):(p_scaleX=side/1440,p_scaleY=side/1440,p_scaleY*=1.125)),3==screenOption&&(1<=side/tate?(p_scaleY=tate/960,p_scaleX=tate/960,p_scaleX*=1/1.5):(p_scaleX=side/1440,p_scaleY=side/1440,p_scaleY*=1.5)),4==screenOption&&(1.85<=side/tate?(p_scaleY=tate/960,p_scaleX=tate/960,p_scaleX*=1.85/1.5):(p_scaleX=side/1440,p_scaleY=side/1440,p_scaleY*=1/1.85/(1/1.5))),5==screenOption&&(p_scaleY=tate/960,p_scaleX=side/1440),0==screenOption?transform(screen,Center,Center,rotate_switch[ri],.88*p_scale):1==screenOption?transform(screen,Center,Center,rotate_switch[ri],p_scale):3==screenOption?transformScaleXY(screen,Center,Center,rotate_switch[ri],.88*p_scaleX,.88*p_scaleY):transformScaleXY(screen,Center,Center,rotate_switch[ri],p_scaleX,p_scaleY)}div_screenMax.style.position="absolute",div_screenMax.style.right=0,div_screenMax.style.bottom=0,translate(div_screenMax,Left,Top),div_screenMax.style.zIndex=-100,div_screenMax.style.mixBlendMode="normal",setImage(div_screenMax,"");let debug_message=[],div_debug=[];for(let e=0;e<=Player+1;e++)debug_message[e]="",document.write("<div id= debug"+e+"> </div>"),div_debug[e]=document.getElementById("debug"+e),defaultSet(div_debug[e],screen),e==Player+1?(putXY(div_debug[e],0,"100%"),translate(div_debug[e],Left,Bottom)):0==e?(putXY(div_debug[e],"100%","100%"),translate(div_debug[e],Right,Bottom)):(putXY(div_debug[e],20*(e-1)+"%",20),translate(div_debug[e],Left,Top)),0==e?fontSet(div_debug[e],"#FFFFFF","Higashi","30","normal","right"):fontSet(div_debug[e],"#FFFFFF","Higashi","30","normal","left"),div_debug[e].style.zIndex=1e4,setText(div_debug[e],"");function debugMessage(){debug_message[0]="",debug_message[Player+1]=""}function debug(){debugMessage();for(let e=0;e<=Player+1;e++)setText(div_debug[e],debug_message[e])}document.write("<div id= bg> </div>");const div_bg=document.getElementById("bg"),div_test=(defaultSet(div_bg,screen),putXY(div_bg,"50%","50%"),translate(div_bg,Center,Center),div_bg.style.zIndex=-1e3,setImage(div_bg,""),document.write("<div id= test> </div>"),document.getElementById("test")),div_test2=(defaultSet(div_test,screen),putXY(div_test,0,0),transform(div_test,Center,Center,0,100),div_test.style.zIndex=1001,setImage(div_test,""),document.write("<div id= test2> </div>"),document.getElementById("test2"));defaultSet(div_test2,screen),putXY(div_test2,500,500),transform(div_test2,Center,Center,0,100),div_test2.style.zIndex=1e3,setImage(div_test2,"");let test={x:100,y:100},t=0;function run(){0==playOK&&(playOK=1),t++,"alert"==scene?sceneAlert():"game"==scene?sceneGame():"start"==scene?sceneStart():"stageSelect"==scene?sceneStageSelect():"gameOver"==scene?sceneGameOver():"title"==scene?sceneTitle():"option"==scene?sceneOption():"fileSelect"==scene?sceneFileSelect():"error"==scene?sceneError():"howToPlay"==scene?sceneHowToPlay():"ramune"==scene?sceneRamune():"info"==scene&&sceneInfo(),soundPlayer()}document.write("<div id= mapBase> </div>");const div_mapBase=document.getElementById("mapBase");defaultSet(div_mapBase,screen),putXY(div_mapBase,720,480),translate(div_mapBase,Center,Center),div_mapBase.style.zIndex=-10,div_mapBase.style.mixBlendMode="normal",setImage(div_mapBase,""),div_mapBase.style.imageRendering="pixelated";let div_floor=[];for(let t=0;t<11;t++){div_floor[t]=[];for(let e=0;e<17;e++)document.write("<div id= floor"+t+"_"+e+"> </div>"),div_floor[t][e]=document.getElementById("floor"+t+"_"+e),defaultSet(div_floor[t][e],div_mapBase),div_floor[t][e].style.boxSizing="border-box",div_floor[t][e].style.objectFit="fill",putXY(div_floor[t][e],xI_x(e),yI_y(t)),translate(div_floor[t][e],Center,Center),div_floor[t][e].style.zIndex=-10,div_floor[t][e].style.imageRendering="pixelated",div_floor[t][e].style.mixBlendMode="normal",setImage(div_floor[t][e],"")}const clearMapDefault=[NaN,[NaN,.5,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0]];let clearMap=JSON.parse(JSON.stringify(clearMapDefault)),historyMap=JSON.parse(JSON.stringify(clearMapDefault)),startLocation=[],stage=(startLocation[1]={xI:3,yI:2},startLocation[2]={xI:13,yI:9},{s:1,a:1});function xI_x(e){return 720+92*(e-8)}function yI_y(e){return 480+92*(e-5)+40}function x_xI(t){let a,n=1e4;for(let e=-1;e<=17;e++){var i=xI_x(e),i=Math.abs(t-i);i<n&&(n=i,a=e)}return a}function y_yI(t){let a,n=1e4;for(let e=-1;e<=11;e++){var i=yI_y(e),i=Math.abs(t-i);i<n&&(n=i,a=e)}return a}let stageMap=[[9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9],[9,1,1,0,1,0,0,0,1,0,0,0,0,0,1,1,9],[9,1,1,0,1,0,0,0,1,0,0,0,0,0,1,1,9],[9,1,1,0,1,0,0,0,1,0,0,0,0,0,1,1,9],[9,1,1,0,1,0,0,0,1,0,0,0,1,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,1,0,1,1,9],[9,1,1,0,1,0,0,0,1,0,0,0,1,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,1,0,1,1,9],[9,1,1,0,0,0,0,0,0,0,0,0,1,0,1,1,9],[9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9]],skin="Prison",smooth;function mapWall(){for(let e=0;e<11;e++)stageMap[e][-1]=1,stageMap[e][17]=1;stageMap[-1]=[],stageMap[11]=[];for(let e=0;e<17;e++)stageMap[-1][e]=1,stageMap[11][e]=1}function mapSet(){if(-100==bs){setImage(div_mapBase,"sys/screen.png");for(let t=0;t<11;t++)for(let e=0;e<17;e++)div_mapBase.appendChild(div_floor[t][e])}boss.stage&&"darkAcero"==boss.name?setImage(div_bg,"image/stageBG/bgDarkAcero.png"):!boss.stage||"bootOrbit"!=boss.name&&"bootOrbitB"!=boss.name?setImage(div_bg,"image/stageBG/bg"+skin+".png"):setImage(div_bg,"image/stageBG/bgFinal.png"),putXY(div_mapBase,720+quake(),480),mapDisplay(stageMap,11,17,div_floor,skin)}function mapDisplay(n,e,i,s,r){for(let a=0;a<e;a++)for(let t=0;t<i;t++){let e;0!=n[a][t]&&2!=n[a][t]||("Conveyer"==r||"Sky"==r?(e="",1!=n[a-1][t]&&5!=n[a-1][t]&&9!=n[a-1][t]||(e="u"),1!=n[a+1][t]&&5!=n[a+1][t]&&9!=n[a+1][t]||(e+="d"),1!=n[a][t-1]&&5!=n[a][t-1]&&9!=n[a][t-1]||(e+="l"),1!=n[a][t+1]&&5!=n[a][t+1]&&9!=n[a][t+1]||(e+="r"),setImageWidth(s[a][t],"image/floor/skin"+r+0+e+".png",94)):1==n[a-1][t]||5==n[a-1][t]&&"Neon"!=r?setImageWidth(s[a][t],"image/floor/skin"+r+"2.png",94):setImageWidth(s[a][t],"image/floor/skin"+r+"0.png",94)),1==n[a][t]&&(e="",1!=n[a-1][t]&&(e="u"),1!=n[a+1][t]&&needWallVecSkin(r)&&(e+="d"),1!=n[a][t-1]&&needWallVecSkin(r)&&(e+="l"),1!=n[a][t+1]&&needWallVecSkin(r)&&(e+="r"),setImageWidth(s[a][t],"image/floor/skin"+r+n[a][t]+e+".png",94)),5==n[a][t]&&setImageWidth(s[a][t],"image/floor/skin"+r+n[a][t]+".png",94),9==n[a][t]&&Remove(s[a][t],"")}}function needWallVecSkin(e){return"Water"!=e&&"Boss"!=e&&"Usual"!=e&&"Conveyer"!=e&&"Sky"!=e&&"Toy"!=e&&"Fruit"!=e}mapWall();let div_conveyerLight=[],conveyerLight=[],conveyerFrame=0;for(let t=0;t<5;t++){div_conveyerLight[t]=[];for(let e=0;e<2;e++)document.write("<div id= conveyerLight"+t+"_"+e+"> </div>"),div_conveyerLight[t][e]=document.getElementById("conveyerLight"+t+"_"+e),defaultSet(div_conveyerLight[t][e],screen),0==e?(putXY(div_conveyerLight[t][e],0,100*t),translate(div_conveyerLight[t][e],Left,Center)):(putXY(div_conveyerLight[t][e],1440,100*t),translate(div_conveyerLight[t][e],Right,Center)),div_conveyerLight[t][e].style.zIndex=-15,div_conveyerLight[t][e].style.mixBlendMode="normal",setImage(div_conveyerLight[t][e],"")}const conveyerSpeedArray=[12,36];let conveyerSpeed=0;function conveyerLightDisplay(){}function windMove(){}let wind=0,windStatus,leaf=[],div_leaf=[];for(let e=0;e<16;e++)document.write("<div id= leaf"+e+"> </div>"),div_leaf[e]=document.getElementById("leaf"+e),defaultSet(div_leaf[e],screen),putXY(div_leaf[e],100,100*e),translate(div_leaf[e],Center,Center),div_leaf[e].style.zIndex=1e4,div_leaf[e].style.filter="blur(1px)",div_leaf[e].style.mixBlendMode="normal",setImage(div_leaf[e],"");function leafSet(){}function leafMove(){}function windMax(){}document.write("<div id= red> </div>");const div_red=document.getElementById("red");defaultSet(div_red,screen),putXY(div_red,"50%","50%"),translate(div_red,Center,Center),div_red.style.zIndex=99999,div_red.style.opacity=1,div_red.style.mixBlendMode="multiply",setImage(div_red,"");let blast=0,blastM=0,blastQuake=0;function stageBlast(){}function quake(){}let alertSound=0;function gibaAlert(){}let player=[],playerStatus=[],playerFrame=[],missPlayer=1;function playerFrameReset(e){playerFrame[e]={},playerFrame[e].p=0,playerFrame[e].k=0}const waysText=["up","right","down","left"];let speed=[3.5];for(let e=1;e<8;e++)speed[e]=speed[e-1]+1.1;let div_player=[],div_playerShadow=[],playerLostScore=[],div_playerLostScore=[];for(let e=2;1<=e;e--)player[e]={pad:"man",state:"A",xI:3,yI:2,x:0,y:0,height:0,walk:0,vec:"down",stunTime:0,timeUp:0,drown:0,jumpV:0,jumpDV:0,jump:0,last_UDInput:!1,last_LRInput:!1,idle:0,hyper:0,hyperxI:0,hyperyI:0,oneTimeWeapon:"no",warpNo:"no"},2==e&&(player[2].pad=!1),playerFrameReset(e),document.write("<div id= player"+e+"> </div>"),div_player[e]=document.getElementById("player"+e),defaultSet(div_player[e],screen),putXY(div_player[e],player[e].x,player[e].y+46),translate(div_player[e],Center,Bottom),div_player[e].style.zIndex=0,div_player[e].style.mixBlendMode="normal",setImage(div_player[e],""),document.write("<div id= playerShadow"+e+"> </div>"),div_playerShadow[e]=document.getElementById("playerShadow"+e),defaultSet(div_playerShadow[e],screen),putXY(div_playerShadow[e],player[e].x,player[e].y+46),translate(div_playerShadow[e],Center,Bottom),div_playerShadow[e].style.zIndex=-5,div_playerShadow[e].style.mixBlendMode="normal",setImage(div_playerShadow[e],""),document.write("<div id= playerLostScore"+e+"> </div>"),div_playerLostScore[e]=document.getElementById("playerLostScore"+e),defaultSet(div_playerLostScore[e],screen),putXY(div_playerLostScore[e],0,0),translate(div_playerLostScore[e],Center,Center),fontSet(div_playerLostScore[e],"#FFFFFF","Higashi","35","bold","right"),textEdge(div_playerLostScore[e],"3","#000000"),div_playerLostScore[e].style.zIndex=0,setText(div_playerLostScore[e],""),playerLostScore[e]={};function playerSetLocation(e){player[e].xI=startLocation[e].xI,player[e].yI=startLocation[e].yI,player[e].x=xI_x(player[e].xI),player[e].y=yI_y(player[e].yI),player[e].height=0,player[e].idle=0,playerFrameReset(e),putXY(div_player[e],player[e].x,player[e].y+46-player[e].height),playerStatus[e].virusTime=0,playerStatus[e].itemTime=0,player[e].oneTimeWeapon="no"}function missItem(e){playerStatus[e].wType="normal",playerStatus[e].life=0,player[e].oneTimeWeapon="no"}function playerItemStatusReset(e){playerStatus[e]={speedLevel:0,weaponLevel:0,wType:"normal",life:0,score:0,invincible:200,upChain:1,virusTime:0,virusType:0,easyLevel:0,itemTime:0},player[e].idle=0,player[e].oneTimeWeapon="no"}function easyLife(e){easyLevelCheck()&&0==playerStatus[e].life&&"game"==scene?("A"==player[e].state&&0!=player[e].pad&&playerStatus[e].easyLevel++,playerStatus[e].easyLevel>=10*fps&&(soundName[0]="se/itemGet",playerStatus[e].life=1)):playerStatus[e].easyLevel=0}function playerSetStart(e){playerFrameReset(e),playerStatus[e].invincible=200,player[e].state="A",boss.stage?player[e].vec="up":player[e].vec="down",player[e].last_UDInput=player[e].vec,player[e].last_LRInput=!1,player[e].walk=0,player[e].drown=0}let stock=3,timeStop=0;function playerOBJECT(){"game"==scene&&playerControl();for(let e=2;1<=e;e--){if(!1!==player[e].pad){if(scoreUp(e),missSpriteLoading(e),playerStatus[e].itemTime++,0<=playerStatus[e].itemTime&&(playerStatus[e].itemTime=0),virusCompute(e),"game"==scene?"A"==player[e].state&&0==lrk[e]&&0==udk[e]&&0==k.B[e]&&0==k.A[e]&&0==k.X[e]&&0==k.Y[e]&&0==k.L1[e]&&0==k.R1[e]?(player[e].idle++,player[e].idle==8*fps&&(player[e].idle=2e3*fps,playerFrameReset(e))):player[e].idle=0:"stageSelect"==scene&&(player[e].idle=2e3*fps),0<playerStatus[e].invincible&&"game"==scene&&"miss"!=player[e].state&&"clear"!=player[e].state&&playerStatus[e].invincible--,virusSukeSuke(e)&&"miss"!=player[e].state&&"clear"!=player[e].state?playerStatus[e].virusTime%350<=50?(div_player[e].style.opacity=playerStatus[e].virusTime%2,div_playerShadow[e].style.opacity=playerStatus[e].virusTime%2):(div_player[e].style.opacity=0,div_playerShadow[e].style.opacity=0):0<playerStatus[e].invincible&&"game"==scene&&"miss"!=player[e].state&&"clear"!=player[e].state?100<playerStatus[e].invincible?(playerStatus[e].invincible+1)%4==0||(playerStatus[e].invincible+1)%4==1?(div_player[e].style.opacity=0,div_playerShadow[e].style.opacity=0):(div_player[e].style.opacity=1,div_playerShadow[e].style.opacity=1):(div_player[e].style.opacity=(playerStatus[e].invincible+1)%2,div_playerShadow[e].style.opacity=(playerStatus[e].invincible+1)%2):("game"==scene&&(playerStatus[e].invincible=0),div_player[e].style.opacity=1,div_playerShadow[e].style.opacity=1),"A"==player[e].state)2==player[e].walk?animeFrame(playerFrame[e],9,4):player[e].idle>=2e3*fps&&(1==e?animeFrame(playerFrame[e],7,8):animeFrame(playerFrame[e],12,4)),playerStandard_XYSet(e),setImage(div_playerShadow[e],"image/playerShadow.png");else if("miss"==player[e].state||"missSet"==player[e].state)playerStandard_XYSet(e),"miss"==player[e].state&&(150<=player[e].drown?(player[e].drown++,1==e?animeFrame(playerFrame[e],5,2):animeFrame(playerFrame[e],12,2)):(playerFrame[e].k++,6<=playerFrame[e].k&&(playerFrame[e].p++,playerFrame[e].k=0))),"missSet"==player[e].state&&(player[e].state="miss",weaponBreak(e),player[e].idle=0,missVib(e),1==cheat.bossRush&&missLate[e]++,playerFrameReset(e),150<=player[e].drown?(player[e].drown=150,soundName[0]="se/drown",1==e&&(soundName[15]="voice/"+e+"/drown")):(player[e].drown=0,soundName[0]="se/miss",soundName[15]="voice/"+e+"/miss")),0==player[e].drown?playerFrame[e].p<=4?(div_player[e].style.opacity=1,setImage(div_player[e],"image/"+e+"Pmiss"+playerFrame[e].p+".png")):(Remove(div_player[e]),player[e].pad=!1,player[e].idle=0,playerFrameReset(e),player[e].state="A",missItem(e),missPlayer=e):player[e].drown<=230?(player[e].drown<=190?div_player[e].style.opacity=1:div_player[e].style.opacity=player[e].drown%2,setImage(div_player[e],"image/"+e+"Pdrown"+playerFrame[e].p+".png")):(Remove(div_player[e]),player[e].pad=!1,player[e].idle=0,playerFrameReset(e),player[e].state="A",missItem(e),missPlayer=e),Remove(div_playerShadow[e]);else if("stun"==player[e].state||"stunSet"==player[e].state||"stunInvincible"==player[e].state||"stunSetInvincible"==player[e].state||"stunSuper"==player[e].state||"stunSetSuper"==player[e].state)playerStandard_XYSet(e),"stun"!=player[e].state&&"stunInvincible"!=player[e].state&&"stunSuper"!=player[e].state||(1==e&&animeFrame(playerFrame[e],20,2),player[e].stunTime--,player[e].stunTime<=0&&"stunSuper"!=player[e].state&&(player[e].stunTime=0,"stunInvincible"==player[e].state&&playerStatus[e].invincible<100&&(playerStatus[e].invincible=100),player[e].state="A")),"stunSet"!=player[e].state&&"stunSetInvincible"!=player[e].state&&"stunSetSuper"!=player[e].state||(playerFrameReset(e),player[e].stunTime=60,"stunSetInvincible"==player[e].state?(player[e].state="stunInvincible",soundName[15]="voice/"+e+"/ouch",stunVib(e)):"stunSetSuper"==player[e].state?(player[e].state="stunSuper",playerStatus[e].invincible=0):(player[e].state="stun",soundName[15]="voice/"+e+"/ouch",stunVib(e))),setImage(div_player[e],"image/"+e+"Pstun"+playerFrame[e].p+".png");else if("stagger"==player[e].state||"stagger2"==player[e].state||"staggerSet"==player[e].state)playerStandard_XYSet(e),"stagger"==player[e].state?(animeFrame(playerFrame[e],5,2),player[e].drown++,("left"==player[e].vec&&rm_1t[e]||"up"==player[e].vec&&dm_1t[e]||"down"==player[e].vec&&um_1t[e]||"right"==player[e].vec&&lm_1t[e])&&(player[e].state="stagger2"),("left"==player[e].vec&&lm_1t[e]||"up"==player[e].vec&&um_1t[e]||"down"==player[e].vec&&dm_1t[e]||"right"==player[e].vec&&rm_1t[e])&&(player[e].drown+=50)):"stagger2"==player[e].state&&(animeFrame(playerFrame[e],5,2),0==lrk[e])&&0==udk[e]&&(player[e].drown=0,player[e].state="A",player[e].vec=vecReverse(player[e].vec)),150<=player[e].drown&&(easyLevelCheck()||1==battle&&0==suddenDeath?player[e].drown=player[e].drown%140:("left"==player[e].vec?(player[e].xI--,player[e].x=xI_x(player[e].xI)):"up"==player[e].vec?(player[e].yI--,player[e].y=yI_y(player[e].yI)):"down"==player[e].vec?(player[e].yI++,player[e].y=yI_y(player[e].yI)):"right"==player[e].vec&&(player[e].xI++,player[e].x=xI_x(player[e].xI)),player[e].state="missSet")),"staggerSet"==player[e].state&&(staggerVib(e),playerFrameReset(e),player[e].state="stagger",player[e].drown=0,soundName[e]="voice/"+e+"/stagger",player[e].xI=x_xI(player[e].x),player[e].yI=y_yI(player[e].y)),setImage(div_player[e],"image/"+e+"P"+player[e].vec+"Stagger"+playerFrame[e].p+".png"),Remove(div_playerShadow[e]);else if("clear"==player[e].state)playerStandard_XYSet(e),div_player[e].style.opacity=1,div_playerShadow[e].style.opacity=1,setImage(div_player[e],"image/"+e+"Pclear.png");else if("jumpSet"==player[e].state)"down"==udk[e]?(0!=lrk[e]&&"up"!=player[e].vec||(player[e].vec="down"),"down"!=player[e].last_UDInput&&1==sensitive[e]&&(player[e].vec="down")):"up"==udk[e]?(0!=lrk[e]&&"down"!=player[e].vec||(player[e].vec="up"),"up"!=player[e].last_UDInput&&1==sensitive[e]&&(player[e].vec="up")):"left"==lrk[e]?(0!=udk[e]&&"right"!=player[e].vec||(player[e].vec="left"),"left"!=player[e].last_LRInput&&1==sensitive[e]&&(player[e].vec="left")):"right"==lrk[e]&&(0!=udk[e]&&"left"!=player[e].vec||(player[e].vec="right"),"right"!=player[e].last_LRInput)&&1==sensitive[e]&&(player[e].vec="right"),player[e].last_UDInput=udk[e],player[e].last_LRInput=lrk[e],playerFrame[e].p=0,player[e].height-=10/30,weaponBreak(e),player[e].height<=-10&&(player[e].height=0,calculateJump(e,30,80),player[e].state="jump",soundName[10]="se/jump",player[e].jump=1,playerFrame[e].p=1),playerStandard_XYSet(e),setImage(div_playerShadow[e],"image/playerShadow.png");else if("jump"==player[e].state)1==player[e].jump?("right"==player[e].vec&&(player[e].x+=9.2),"up"==player[e].vec&&(player[e].y-=9.2),"down"==player[e].vec&&(player[e].y+=9.2),"left"==player[e].vec&&(player[e].x-=9.2)):("right"==player[e].vec&&(player[e].x+=4.6),"up"==player[e].vec&&(player[e].y-=4.6),"down"==player[e].vec&&(player[e].y+=4.6),"left"==player[e].vec&&(player[e].x-=4.6)),player[e].height+=player[e].jumpV,player[e].jumpV-=player[e].jumpDV,player[e].height<=0&&player[e].jumpV<0&&(player[e].height=0,player[e].xI=x_xI(player[e].x),player[e].yI=y_yI(player[e].y),-1==player[e].xI?player[e].xI=17:17==player[e].xI&&(player[e].xI=-1),-1==player[e].yI?player[e].yI=11:11==player[e].yI&&(player[e].yI=-1),player[e].x=xI_x(player[e].xI),player[e].y=yI_y(player[e].yI),player[e].xI=x_xI(player[e].x),player[e].yI=y_yI(player[e].y),1==stageMap[y_yI(player[e].y)][x_xI(player[e].x)]||9==stageMap[y_yI(player[e].y)][x_xI(player[e].x)]||5==stageMap[y_yI(player[e].y)][x_xI(player[e].x)]||2==stageMap[y_yI(player[e].y)][x_xI(player[e].x)]?(calculateJump(e,20,40),player[e].jump++,soundName[10]="se/step",playerFrame[e].p=jumpChange(playerFrame[e].p)):(player[e].jump=0,player[e].state="A",playerFrame[e].p=0,playerStatus[e].invincible<70&&(playerStatus[e].invincible=70))),playerStandard_XYSet(e),setImage(div_playerShadow[e],"image/playerShadow.png");else if("warp"==player[e].state||"warp2"==player[e].state){if("warp"==player[e].state&&(player[e].height+=40,960<=player[e].height)){for(var t=player[e].warpNo;;)if(player[e].warpNo=Math.floor(Math.random()*gimmickMax),1==gimmick[player[e].warpNo].m&&10==gimmick[player[e].warpNo].type&&t!=player[e].warpNo){player[e].state="warp2",player[e].xI=gimmick[player[e].warpNo].xI,player[e].yI=gimmick[player[e].warpNo].yI,player[e].x=xI_x(player[e].xI),player[e].y=yI_y(player[e].yI);break}gimmick[player[e].warpNo].type=11,gimmick[player[e].warpNo].time=3*fps,player[e].height=960}"warp2"==player[e].state&&(player[e].height-=20,player[e].height<=0)&&(player[e].height=0,player[e].state="A",playerStatus[e].invincible<40)&&(playerStatus[e].invincible=40),playerStandard_XYSet(e),setImage(div_playerShadow[e],"image/playerShadow.png")}}else Remove(div_playerShadow[e]),Remove(div_player[e]);div_player[e].style.zIndex=Math.round(10*player[e].y+5*player[e].height),easyLife(e)}}function playerControl(){for(let e=1;e<=2;e++)"A"==player[e].state&&"man"==player[e].pad&&("down"==udk[e]?(player[e].y+=realSpeed(e),0!=lrk[e]&&"up"!=player[e].vec||(player[e].vec="down"),"down"!=player[e].last_UDInput&&1==sensitive[e]&&(player[e].vec="down"),0!=stageMap[player[e].yI+1][player[e].xI]&&player[e].y>=yI_y(player[e].yI)&&(player[e].x>=xI_x(player[e].xI)-15||0!=stageMap[player[e].yI+1][player[e].xI-1])&&(player[e].x<=xI_x(player[e].xI)+15||0!=stageMap[player[e].yI+1][player[e].xI+1])?(player[e].y=yI_y(player[e].yI),staggerSetting(e,udk[e])):0==stageMap[player[e].yI][player[e].xI-1]&&0!=stageMap[player[e].yI+1][player[e].xI-1]&&0==stageMap[player[e].yI+1][player[e].xI]&&player[e].y>=yI_y(player[e].yI)&&player[e].x<xI_x(player[e].xI)||0==stageMap[player[e].yI][player[e].xI+1]&&0==stageMap[player[e].yI+1][player[e].xI+1]&&0!=stageMap[player[e].yI+1][player[e].xI]&&player[e].y>=yI_y(player[e].yI)&&player[e].x>xI_x(player[e].xI)+15?(player[e].y=yI_y(player[e].yI),!1===lrk[e]&&(player[e].x+=realSpeed(e)),player[e].x>=xI_x(player[e].xI)&&0==stageMap[player[e].yI+1][player[e].xI]&&(player[e].x=xI_x(player[e].xI))):(0==stageMap[player[e].yI][player[e].xI+1]&&0!=stageMap[player[e].yI+1][player[e].xI+1]&&0==stageMap[player[e].yI+1][player[e].xI]&&player[e].y>=yI_y(player[e].yI)&&player[e].x>xI_x(player[e].xI)||0==stageMap[player[e].yI][player[e].xI-1]&&0==stageMap[player[e].yI+1][player[e].xI-1]&&0!=stageMap[player[e].yI+1][player[e].xI]&&player[e].y>=yI_y(player[e].yI)&&player[e].x<xI_x(player[e].xI)-15)&&(player[e].y=yI_y(player[e].yI),!1===lrk[e]&&(player[e].x-=realSpeed(e)),player[e].x<=xI_x(player[e].xI))&&0==stageMap[player[e].yI+1][player[e].xI]&&(player[e].x=xI_x(player[e].xI)),0==player[e].walk&&(player[e].walk=1),1==player[e].walk&&(playerFrameReset(e),player[e].walk=2)):"up"==udk[e]&&(player[e].y-=realSpeed(e),0!=lrk[e]&&"down"!=player[e].vec||(player[e].vec="up"),"up"!=player[e].last_UDInput&&1==sensitive[e]&&(player[e].vec="up"),0!=stageMap[player[e].yI-1][player[e].xI]&&player[e].y<=yI_y(player[e].yI)&&(player[e].x>=xI_x(player[e].xI)-15||0!=stageMap[player[e].yI-1][player[e].xI-1])&&(player[e].x<=xI_x(player[e].xI)+15||0!=stageMap[player[e].yI-1][player[e].xI+1])?(player[e].y=yI_y(player[e].yI),staggerSetting(e,udk[e])):0==stageMap[player[e].yI][player[e].xI-1]&&0!=stageMap[player[e].yI-1][player[e].xI-1]&&player[e].y<=yI_y(player[e].yI)&&0==stageMap[player[e].yI-1][player[e].xI]&&player[e].x<xI_x(player[e].xI)||0==stageMap[player[e].yI][player[e].xI+1]&&0==stageMap[player[e].yI-1][player[e].xI+1]&&0!=stageMap[player[e].yI-1][player[e].xI]&&player[e].y<=yI_y(player[e].yI)&&player[e].x>xI_x(player[e].xI)+15?(player[e].y=yI_y(player[e].yI),!1===lrk[e]&&(player[e].x+=realSpeed(e)),player[e].x>=xI_x(player[e].xI)&&0==stageMap[player[e].yI-1][player[e].xI]&&(player[e].x=xI_x(player[e].xI))):(0==stageMap[player[e].yI][player[e].xI+1]&&0!=stageMap[player[e].yI-1][player[e].xI+1]&&player[e].y<=yI_y(player[e].yI)&&0==stageMap[player[e].yI-1][player[e].xI]&&player[e].x>xI_x(player[e].xI)||0==stageMap[player[e].yI][player[e].xI-1]&&0==stageMap[player[e].yI-1][player[e].xI-1]&&0!=stageMap[player[e].yI-1][player[e].xI]&&player[e].y<=yI_y(player[e].yI)&&player[e].x<xI_x(player[e].xI)-15)&&(player[e].y=yI_y(player[e].yI),!1===lrk[e]&&(player[e].x-=realSpeed(e)),player[e].x<=xI_x(player[e].xI))&&0==stageMap[player[e].yI-1][player[e].xI]&&(player[e].x=xI_x(player[e].xI)),0==player[e].walk&&(player[e].walk=1),1==player[e].walk)&&(playerFrameReset(e),player[e].walk=2),"left"==lrk[e]?(player[e].x-=realSpeed(e),0!=udk[e]&&"right"!=player[e].vec||(player[e].vec="left"),"left"!=player[e].last_LRInput&&1==sensitive[e]&&(player[e].vec="left"),0!=stageMap[player[e].yI][player[e].xI-1]&&player[e].x<=xI_x(player[e].xI)&&(player[e].y>=yI_y(player[e].yI)-15||0!=stageMap[player[e].yI-1][player[e].xI-1])&&(player[e].y<=yI_y(player[e].yI)+15||0!=stageMap[player[e].yI+1][player[e].xI-1])?(player[e].x=xI_x(player[e].xI),staggerSetting(e,lrk[e])):0==stageMap[player[e].yI-1][player[e].xI]&&0!=stageMap[player[e].yI-1][player[e].xI-1]&&0==stageMap[player[e].yI][player[e].xI-1]&&player[e].x<=xI_x(player[e].xI)&&player[e].y<yI_y(player[e].yI)||0==stageMap[player[e].yI+1][player[e].xI]&&0==stageMap[player[e].yI+1][player[e].xI-1]&&0!=stageMap[player[e].yI][player[e].xI-1]&&player[e].x<=xI_x(player[e].xI)&&player[e].y>yI_y(player[e].yI)+15?(player[e].x=xI_x(player[e].xI),!1===udk[e]&&(player[e].y+=realSpeed(e)),player[e].y>=yI_y(player[e].yI)&&0==stageMap[player[e].yI][player[e].xI-1]&&(player[e].y=yI_y(player[e].yI))):(0==stageMap[player[e].yI+1][player[e].xI]&&0!=stageMap[player[e].yI+1][player[e].xI-1]&&0==stageMap[player[e].yI][player[e].xI-1]&&player[e].x<=xI_x(player[e].xI)&&player[e].y>yI_y(player[e].yI)||0==stageMap[player[e].yI-1][player[e].xI]&&0==stageMap[player[e].yI-1][player[e].xI-1]&&0!=stageMap[player[e].yI][player[e].xI-1]&&player[e].x<=xI_x(player[e].xI)&&player[e].y<yI_y(player[e].yI)-15)&&(player[e].x=xI_x(player[e].xI),!1===udk[e]&&(player[e].y-=realSpeed(e)),player[e].y<=yI_y(player[e].yI))&&0==stageMap[player[e].yI][player[e].xI-1]&&(player[e].y=yI_y(player[e].yI)),0==player[e].walk&&(player[e].walk=1),1==player[e].walk&&(playerFrameReset(e),player[e].walk=2)):"right"==lrk[e]&&(player[e].x+=realSpeed(e),0!=udk[e]&&"left"!=player[e].vec||(player[e].vec="right"),"right"!=player[e].last_LRInput&&1==sensitive[e]&&(player[e].vec="right"),0!=stageMap[player[e].yI][player[e].xI+1]&&player[e].x>=xI_x(player[e].xI)&&(player[e].y>=yI_y(player[e].yI)-15||0!=stageMap[player[e].yI-1][player[e].xI+1])&&(player[e].y<=yI_y(player[e].yI)+15||0!=stageMap[player[e].yI+1][player[e].xI+1])?(player[e].x=xI_x(player[e].xI),staggerSetting(e,lrk[e])):0==stageMap[player[e].yI-1][player[e].xI]&&0!=stageMap[player[e].yI-1][player[e].xI+1]&&0==stageMap[player[e].yI][player[e].xI+1]&&player[e].x>=xI_x(player[e].xI)&&player[e].y<yI_y(player[e].yI)||0==stageMap[player[e].yI+1][player[e].xI]&&0==stageMap[player[e].yI+1][player[e].xI+1]&&0!=stageMap[player[e].yI][player[e].xI+1]&&player[e].x>=xI_x(player[e].xI)&&player[e].y>yI_y(player[e].yI)+15?(player[e].x=xI_x(player[e].xI),!1===udk[e]&&(player[e].y+=realSpeed(e)),player[e].y>=yI_y(player[e].yI)&&0==stageMap[player[e].yI][player[e].xI+1]&&(player[e].y=yI_y(player[e].yI))):(0==stageMap[player[e].yI+1][player[e].xI]&&0!=stageMap[player[e].yI+1][player[e].xI+1]&&0==stageMap[player[e].yI][player[e].xI+1]&&player[e].x>=xI_x(player[e].xI)&&player[e].y>yI_y(player[e].yI)||0==stageMap[player[e].yI-1][player[e].xI]&&0==stageMap[player[e].yI-1][player[e].xI+1]&&0!=stageMap[player[e].yI][player[e].xI+1]&&player[e].x>=xI_x(player[e].xI)&&player[e].y<yI_y(player[e].yI)-15)&&(player[e].x=xI_x(player[e].xI),!1===udk[e]&&(player[e].y-=realSpeed(e)),player[e].y<=yI_y(player[e].yI))&&0==stageMap[player[e].yI][player[e].xI+1]&&(player[e].y=yI_y(player[e].yI)),0==player[e].walk&&(player[e].walk=1),1==player[e].walk)&&(playerFrameReset(e),player[e].walk=2),player[e].last_UDInput=udk[e],player[e].last_LRInput=lrk[e],0==udk[e])&&0==lrk[e]&&player[e].idle<2e3*fps&&(playerFrameReset(e),player[e].walk=0),player[e].xI=x_xI(player[e].x),player[e].yI=y_yI(player[e].y)}function realSpeed(e){let t;return t=virusKraKra(e,t=virusNoroNoro(e,t=0==lrk[e]||0==udk[e]?speed[playerStatus[e].speedLevel]:Math.sqrt(2)/2*speed[playerStatus[e].speedLevel]))}function playerDamage(e){0==playerStatus[e].invincible&&(1<=playerStatus[e].life?(1==cheat.bossRush&&damageLate[e]++,playerStatus[e].life=0,playerStatus[e].invincible=200,lossVib(e)):(playerStatus[e].life=0,1!=battle||0!=suddenDeath||"A"!=player[e].state&&"stagger"!=player[e].state&&"stagger2"!=player[e].state&&"staggerSet"!=player[e].state?1!=suddenDeath&&0!=battle||(player[e].state="missSet"):(itemGetOut(e),soundName[5]="se/friendStun",player[e].state="stunSetInvincible",playerLostScore[e].score=playerStatus[e].score-10*Math.floor(playerStatus[e].score/20),playerLostScore[e].PorM="-",playerStatus[e].score-=playerLostScore[e].score,playerLostScore[e].x=player[e].x,playerLostScore[e].y=player[e].y-60,playerLostScore[e].m=60)))}function playerLostScoreDisplay(){for(let e=1;e<=2;e++)0<playerLostScore[e].m?(playerLostScore[e].y-=.3,--playerLostScore[e].m,putXY(div_playerLostScore[e],playerLostScore[e].x,playerLostScore[e].y),div_playerLostScore[e].style.zIndex=Math.round(10*player[e].y+1),"-"==playerLostScore[e].PorM?setText(div_playerLostScore[e],"-"+playerLostScore[e].score):setText(div_playerLostScore[e],playerLostScore[e].score)):Remove(div_playerLostScore[e])}function staggerSetting(e,t){"Water"==skin&&(player[e].state="staggerSet",player[e].vec=t)}function playerStandard_XYSet(e){"stagger"==player[e].state||"stagger2"==player[e].state||"staggerSet"==player[e].state?"left"==player[e].vec?putXY(div_player[e],player[e].x-30,player[e].y+46-player[e].height-10):"right"==player[e].vec?putXY(div_player[e],player[e].x+30,player[e].y+46-player[e].height-10):"up"==player[e].vec?putXY(div_player[e],player[e].x,player[e].y+46-player[e].height-10-25):putXY(div_player[e],player[e].x,player[e].y+46-player[e].height-10+25):putXY(div_player[e],player[e].x,player[e].y+46-player[e].height),putXY(div_playerShadow[e],player[e].x,player[e].y+46),"A"==player[e].state&&player[e].idle<2e3*fps||"jumpSet"==player[e].state||"jump"==player[e].state||"warp"==player[e].state||"warp2"==player[e].state?setImage(div_player[e],"image/"+e+"P"+player[e].vec+playerFrame[e].p+".png"):"A"==player[e].state&&setImage(div_player[e],"image/"+e+"Pidle"+playerFrame[e].p+".png")}function playerHitOK_State(e){return"A"==player[e].state||"stun"==player[e].state||"stunInvincible"==player[e].state||"stunSet"==player[e].state||"stunInvincibleSet"==player[e].state||"stagger"==player[e].state||"stagger2"==player[e].state||"staggerSet"==player[e].state}function scoreUp(e){0==cheat.extend?playerStatus[e].score>=1e4*Math.pow(2,playerStatus[e].upChain)&&(oneUp(),playerStatus[e].upChain++):playerStatus[e].score>=5e3*playerStatus[e].upChain&&(oneUp(),playerStatus[e].upChain++)}function calculateJump(e,t,a){a=2*a/Math.pow(t/2,2),t=t/2*a;player[e].jumpV=t,player[e].jumpDV=a}function virusCompute(e){playerStatus[e].virusTime<0&&"miss"!=player[e].state&&(playerStatus[e].virusTime++,0<=playerStatus[e].virusTime)&&(playerStatus[e].virusTime=0),1<=playerStatus[e].virusTime&&"miss"!=player[e].state&&(playerStatus[e].virusTime++,playerStatus[e].virusTime%6<3)?div_player[e].style.filter="grayscale(100%) brightness(0)":div_player[e].style.filter=""}let hyperNavi=0;function hyperState(e){return"hyper"==player[e].state||"hyperSet"==player[e].state}let time=180,ktime=-1,timeUpSound=0,timeShift=0,hurryBattle=0,timeLocation={x:0,y:0,m:0,r:0,theta:0};document.write("<div id= hurryText> </div>");const div_hurryText=document.getElementById("hurryText");function hurryDisplay(){32<time&&time<=40&&(timeLocation.theta=Math.PI/2,timeLocation.r=760,div_hurryText.style.opacity=1),time<=32&&30<=time&&(0==hurryBattle&&(1==battle&&(screenEnemyMax+=3,enemyNumber[13]+=3),soundName[15]="voice/"+playerDelegate()+"/hurry",hurryBattle=1),timeLocation.theta+=.65,timeLocation.r-=20,timeLocation.r<=0&&(timeLocation.r=0),timeLocation.x=720+timeLocation.r*Math.cos(timeLocation.theta),timeLocation.y=528+timeLocation.r*Math.sin(timeLocation.theta),putXY(div_hurryText,timeLocation.x,timeLocation.y),div_hurryText.style.opacity=t%2,setText(div_hurryText,"HURRY UP !")),time<30&&10<time&&(Remove(div_hurryText),div_hurryText.style.opacity=1)}function timeUpDisplay(){1<=time&&time<=5&&(timeUpSound=1,timeLocation.y="55%",timeLocation.x=1800),time<=0&&(1==timeUpSound&&(timeUpSound=0,1==battle&&playerStatus[1].score!=playerStatus[2].score||(soundName[14]="se/timeUp",soundName[15]="voice/"+playerDelegate()+"/timeUp"),timeShift=0),timeLocation.x-=50,timeLocation.x<=720&&(timeLocation.x=720),putXY(div_hurryText,timeLocation.x,timeLocation.y),setText(div_hurryText,"TIME UP !"))}function timeLimit(){if((0!=player[1].pad&&("miss"!=player[1].state&&"clear"!=player[1].state||0==player[1].pad)||0!=player[2].pad&&("miss"!=player[2].state&&"clear"!=player[2].state||0==player[2].pad))&&(0!=player[1].pad&&("miss"!=player[1].state&&"clear"!=player[1].state||0==player[1].pad)&&0!=player[2].pad&&("miss"!=player[2].state&&"clear"!=player[2].state||0==player[2].pad)||1!=battle)&&("infinity"!=time&&0==timeStop&&0==hyperState(1)?(++ktime>=fps&&(0==challenge?time--:1==challenge&&time++,ktime=0),599<=(time=time<=0?0:time)&&(time=599)):0<timeStop&&--timeStop<=0&&(timeStop=0)),(time<=0||1==battle&&1==limitBattleScore&&(7e3<=playerStatus[1].score||7e3<=playerStatus[2].score))&&(0==challenge||1==battle)){timeShift++;for(let e=1;e<=2;e++)1==battle&&playerStatus[e].score>playerStatus[r1_2(e)].score&&0==victoryShift&&(winPlayer=e,victoryShift=1);for(let e=1;e<=2;e++)0!=player[e].pad&&"miss"!=player[e].state&&"jump"!=player[e].state&&"jumpSet"!=player[e].state&&"warp"!=player[e].state&&"warp2"!=player[e].state&&"clear"!=player[e].state&&"stunSetSuper"!=player[e].state&&"stunSuper"!=player[e].state&&(player[e].height=0,1==battle&&1<=victoryShift&&winPlayer==e?player[e].state="clear":player[e].state="stunSetSuper"),weaponBreak(e),0!=player[e].pad&&0==battle&&(player[e].timeUp=1);120<=timeShift&&(1<=stock||1==battle?nextScene="start":(nextScene="gameOver",ct=100))}0==challenge&&(timeUpDisplay(),hurryDisplay()),200==bs&&(timeShift=0)}defaultSet(div_hurryText,screen),putXY(div_hurryText,0,0),translate(div_hurryText,Center,Center),fontSet(div_hurryText,"#EB9888","Higashi","80","bold","right"),textEdge(div_hurryText,"5","#CE2807"),div_hurryText.style.zIndex=2e5,setText(div_hurryText,"");let div_weapon=[],wepState=[],wep=[],weaponStun;for(let t=1;t<=2;t++){div_weapon[t]=[],wepState[t]={type:"normal",level:0},wep[t]=[];for(let e=0;e<4;e++)document.write("<div id= weapon"+t+"_"+e+"> </div>"),div_weapon[t][e]=document.getElementById("weapon"+t+"_"+e),defaultSet(div_weapon[t][e],screen),putXY(div_weapon[t][e],0,0),translate(div_weapon[t][e],Center,Center),div_weapon[t][e].style.zIndex=0,div_weapon[t][e].style.mixBlendMode="normal",setImage(div_weapon[t][e],""),wep[t][e]={m:0,x:0,y:0,v:0,dv:0,vec:"up",deg:0,av:0,lastX:0,lastY:0,size:1,frameP:0,frameK:0,chain:1}}function before1FrameWeaponXY(e,t){wep[e][t].lastX=wep[e][t].x,wep[e][t].lastY=wep[e][t].y}function weaponBreak(t){for(let e=0;e<4;e++)1<=wep[t][e].m&&(wep[t][e].m=-10)}function weaponSetUp(t){taktChain=0;var a=15.2*Math.pow(1.12,wepState[t].level),n=.48*Math.pow(1.12,wepState[t].level),a=virusWeaponSpeed(t,a),n=virusWeaponDownSpeed(t,n);if("4way"!=wepState[t].type)wep[t][0].m=1,wep[t][0].x=player[t].x,wep[t][0].y=player[t].y,wep[t][0].lastX=player[t].x,wep[t][0].lastY=player[t].y,wep[t][0].v=a,wep[t][0].av=a,wep[t][0].dv=n,wep[t][0].deg=0,"big"==wepState[t].type?wep[t][0].size=46/34:wep[t][0].size=1;else for(let e=0;e<4;e++)wep[t][e].m=1,wep[t][e].x=player[t].x,wep[t][e].y=player[t].y,wep[t][e].lastX=player[t].x,wep[t][e].lastY=player[t].y,wep[t][e].v=a,wep[t][e].av=a,wep[t][e].dv=n,wep[t][e].deg=0,wep[t][e].vec=waysText[e],wep[t][e].size=1}function weaponReset(){for(let t=1;t<=2;t++)for(let e=0;e<4;e++)wep[t][e].m=0}function weaponMove(){for(let t=1;t<=2;t++){0==wep[t][0].m&&0==wep[t][1].m&&0==wep[t][2].m&&0==wep[t][3].m&&("A"==player[t].state&&1==km_1t.A[t]&&"man"==player[t].pad?(wepState[t].level=playerStatus[t].weaponLevel,"no"==player[t].oneTimeWeapon?wepState[t].type=playerStatus[t].wType:wepState[t].type=player[t].oneTimeWeapon,wep[t][0].vec=player[t].vec,soundName[1]="se/throwWeapon",weaponSetUp(t)):"A"==player[t].state&&1==km_1t.Y[t]&&"man"==player[t].pad&&(wepState[t].level=playerStatus[t].weaponLevel,wepState[t].type="normal",wep[t][0].vec=player[t].vec,soundName[1]="se/throwWeapon",weaponSetUp(t)));for(let e=0;e<4;e++)k.B[t]&&"slow"==wepState[t].type?wep[t][e].av=.2*wep[t][e].v:wep[t][e].av=wep[t][e].v,1<=wep[t][e].m?(before1FrameWeaponXY(t,e),"up"==wep[t][e].vec&&(wep[t][e].x=player[t].x,wep[t][e].y-=wep[t][e].av,wep[t][e].y>=player[t].y)&&(wep[t][e].m=0),"down"==wep[t][e].vec&&(wep[t][e].x=player[t].x,wep[t][e].y+=wep[t][e].av,wep[t][e].y<=player[t].y)&&(wep[t][e].m=0),"left"==wep[t][e].vec&&(wep[t][e].y=player[t].y,wep[t][e].x-=wep[t][e].av,wep[t][e].x>=player[t].x)&&(wep[t][e].m=0),"right"==wep[t][e].vec&&(wep[t][e].y=player[t].y,wep[t][e].x+=wep[t][e].av,wep[t][e].x<=player[t].x)&&(wep[t][e].m=0),hitWeapon(t,e,player[r1_2(t)])<=36*wep[t][e].size&&("A"==player[r1_2(t)].state||"stagger"==player[r1_2(t)].state||"stagger2"==player[r1_2(t)].state||"staggerSet"==player[r1_2(t)].state)&&0==playerStatus[r1_2(t)].invincible&&0!=player[r1_2(t)].pad&&weaponStun&&0==cheat.noHit&&(attackVib(t),player[r1_2(t)].state="stunSetInvincible",soundName[5]="se/friendStun",1==battle&&(50<=playerStatus[r1_2(t)].score?playerLostScore[r1_2(t)].score=50:playerLostScore[r1_2(t)].score=playerStatus[r1_2(t)].score,playerLostScore[r1_2(t)].PorM="-",playerStatus[r1_2(t)].score-=playerLostScore[r1_2(t)].score,playerLostScore[r1_2(t)].x=player[r1_2(t)].x,playerLostScore[r1_2(t)].y=player[r1_2(t)].y-60,playerLostScore[r1_2(t)].m=60,itemGetOut(r1_2(t)),playerStatus[t].itemTime=-10),1<=playerStatus[t].virusTime)&&(playerStatus[r1_2(t)].virusTime=1,playerStatus[r1_2(t)].virusType=playerStatus[t].virusType,playerStatus[t].virusTime=0),k.B[t]&&"slow"==wepState[t].type?wep[t][e].deg-=40:wep[t][e].deg+=8,k.B[t]&&"slow"==wepState[t].type?wep[t][e].v-=.2*wep[t][e].dv:virusFuwaFuwa(t)?virusFuwaFuwaDownSpeed(t,e):wep[t][e].v-=wep[t][e].dv,putXY(div_weapon[t][e],wep[t][e].x,wep[t][e].y),div_weapon[t][e].style.zIndex=Math.round(10*wep[t][e].y)-1,"big"!=wepState[t].type?transform(div_weapon[t][e],Center,Center,wep[t][e].deg,1):transform(div_weapon[t][e],Center,Center,wep[t][e].deg,1.8),"slow"==wepState[t].type?setImage(div_weapon[t][e],"image/weaponSlow.png"):setImage(div_weapon[t][e],"image/weapon.png")):-10==wep[t][e].m&&(wep[t][e].frameP=0,wep[t][e].frameK=0,wep[t][e].m=-11,transform(div_weapon[t][e],Center,Center,0,1)),-11==wep[t][e].m&&(wep[t][e].frameK++,5<wep[t][e].frameK&&(wep[t][e].frameP++,wep[t][e].frameK=0),wep[t][e].frameP<=2?setImage(div_weapon[t][e],"image/weaponBreak"+wep[t][e].frameP+".png"):wep[t][e].m=0),0==wep[t][e].m&&(wep[t][e].chain=1,Remove(div_weapon[t][e]))}}document.write("<div id= statusBar> </div>");const div_statusBar=document.getElementById("statusBar"),div_stockIcon=(defaultSet(div_statusBar,screen),putXY(div_statusBar,"50%",0),translate(div_statusBar,Center,Top),div_statusBar.style.zIndex=1e5,div_statusBar.style.mixBlendMode="normal",setImage(div_statusBar,""),document.write("<div id= stockIcon> </div>"),document.getElementById("stockIcon")),div_timeIcon=(defaultSet(div_stockIcon,screen),putXY(div_stockIcon,60,60),translate(div_stockIcon,Center,Center),div_stockIcon.style.zIndex=100001,div_stockIcon.style.mixBlendMode="normal",setImage(div_stockIcon,""),document.write("<div id= timeIcon> </div>"),document.getElementById("timeIcon")),div_stockText=(defaultSet(div_timeIcon,screen),putXY(div_timeIcon,650,60),transform(div_timeIcon,Center,Center,0,.8),div_timeIcon.style.zIndex=100001,div_timeIcon.style.mixBlendMode="normal",setImage(div_timeIcon,""),document.write("<div id= stockText> </div>"),document.getElementById("stockText")),div_timeText=(defaultSet(div_stockText,screen),putXY(div_stockText,60,60),translate(div_stockText,Center,Center),fontSet(div_stockText,"#FFFFFF","Higashi","70","bold","right"),textEdge(div_stockText,"3","#000000"),div_stockText.style.zIndex=100002,setText(div_stockText,""),document.write("<div id= timeText> </div>"),document.getElementById("timeText"));defaultSet(div_timeText,screen),putXY(div_timeText,770,60),translate(div_timeText,Center,Center),fontSet(div_timeText,"#FFFFFF","Higashi","60","normal","right"),textEdge(div_timeText,"3","#000000"),div_timeText.style.zIndex=100002,div_timeText.style.letterSpacing="0px",setText(div_timeText,"");let div_scoreWindow=[];for(let e=1;e<=2;e++)document.write("<div id= scoreWindow"+e+"> </div>"),div_scoreWindow[e]=document.getElementById("scoreWindow"+e),defaultSet(div_scoreWindow[e],screen),putXY(div_scoreWindow[e],800*(e-1)+140,60),translate(div_scoreWindow[e],Left,Center),div_scoreWindow[e].style.zIndex=100002,div_scoreWindow[e].style.mixBlendMode="normal",setImage(div_scoreWindow[e],"");let div_scoreText=[];for(let e=1;e<=2;e++)document.write("<div id= scoreText"+e+"> </div>"),div_scoreText[e]=document.getElementById("scoreText"+e),defaultSet(div_scoreText[e],screen),putXY(div_scoreText[e],800*(e-1)+140+420,60),translate(div_scoreText[e],Right,Center),fontSet(div_scoreText[e],"#FFFFFF","Higashi","45","bold","right"),textEdge(div_scoreText[e],"3","#000000"),div_scoreText[e].style.zIndex=100003,div_scoreText[e].style.letterSpacing="4px",setText(div_scoreText[e],"");let div_winsText=[];for(let e=1;e<=2;e++)document.write("<div id= winsText"+e+"> </div>"),div_winsText[e]=document.getElementById("winsText"+e),defaultSet(div_winsText[e],screen),putXY(div_winsText[e],800*(e-1)+140+420,60),translate(div_winsText[e],Right,Center),fontSet(div_winsText[e],"#FFFFFF","Higashi","45","bold","right"),textEdge(div_winsText[e],"3","#000000"),div_winsText[e].style.zIndex=100003,div_winsText[e].style.letterSpacing="4px",setText(div_winsText[e],"");let div_heartIcon=[];for(let e=1;e<=2;e++)document.write("<div id= heartIcon"+e+"> </div>"),div_heartIcon[e]=document.getElementById("heartIcon"+e),defaultSet(div_heartIcon[e],screen),putXY(div_heartIcon[e],800*(e-1)+140,60),translate(div_heartIcon[e],Left,Center),div_heartIcon[e].style.zIndex=100004,div_heartIcon[e].style.mixBlendMode="normal",setImage(div_heartIcon[e],"");document.write("<div id= enemyText> </div>");const div_enemyText=document.getElementById("enemyText");defaultSet(div_enemyText,screen),putXY(div_enemyText,340,130),translate(div_enemyText,Center,Center),fontSet(div_enemyText,"#FFFFFF","Higashi","30","bold","right"),textEdge(div_enemyText,"2","#000000"),div_enemyText.style.zIndex=100006,setText(div_enemyText,"");let div_enemyDisplay=[];for(let e=0;e<13;e++)document.write("<div id= enemyDisplay"+e+"> </div>"),div_enemyDisplay[e]=document.getElementById("enemyDisplay"+e),defaultSet(div_enemyDisplay[e],screen),putXY(div_enemyDisplay[e],460+60*(11-e),130),transform(div_enemyDisplay[e],Center,Center,0,.8),div_enemyDisplay[e].style.zIndex=100006,div_enemyDisplay[e].style.mixBlendMode="normal",setImage(div_enemyDisplay[e],"");document.write("<div id= easyLevel> </div>");const div_easyLevel=document.getElementById("easyLevel");function easyDisplay(){easyLevelCheck()?(setImage(div_easyLevel,"image/easyLevel.png"),div_easyLevel.style.opacity=.4):Remove(div_easyLevel)}defaultSet(div_easyLevel,screen),putXY(div_easyLevel,0,960),translate(div_easyLevel,Left,Bottom),div_easyLevel.style.zIndex=1000003,div_easyLevel.style.mixBlendMode="normal",setImage(div_easyLevel,"");let statusFrame={p:0,k:0},stageEnemyRatio=0,stageEnemyRatioLight=0;function enemyLight(){if(1==(stageEnemyRatio=enemySum()/stageEnemyMax))stageEnemyRatioLight=12;else if(0==stageEnemyRatio)stageEnemyRatioLight=0;else for(let e=1;e<12;e++)if(stageEnemyRatio<e/11){stageEnemyRatioLight=e;break}}function displayStatus(){if(animeFrame(statusFrame,50,2),setImage(div_statusBar,"image/statusBar.png"),0==battle&&(setImage(div_stockIcon,"image/stockIcon.png"),setText(div_stockText,stock)),setImage(div_timeIcon,"image/timeIcon.png"),0==boss.stage&&0==battle&&setText(div_enemyText,"ENEMY"),enemyLight(),0==boss.stage&&0==battle)for(let e=0;e<12;e++)e>=stageEnemyRatioLight?setImage(div_enemyDisplay[e],"image/enemyBlack.png"):setImage(div_enemyDisplay[e],"image/enemyWhite.png");div_enemyDisplay[12].style.opacity=0,setImage(div_enemyDisplay[12],"image/enemyBlack.png"),"infinity"==time?(setText(div_timeText,"∞"),fontSet(div_timeText,"#FFFFFF","Higashi","90","normal","right"),putXY(div_timeText,"no",52)):(setText(div_timeText,Math.floor(time/60)+":"+Math.floor(time/10)%6+time%10),fontSet(div_timeText,"#FFFFFF","Higashi","60","normal","right"),putXY(div_timeText,"no",60)),0==battle?(putXY(div_timeIcon,650,60),putXY(div_timeText,770,60)):(putXY(div_timeIcon,200,75),putXY(div_timeText,320,75));for(let e=1;e<=2;e++)setImage(div_heartIcon[e],"image/heartIcon.png");for(let e=1;e<=2;e++)0==player[e].pad&&0==battle?(Remove(div_scoreWindow[e]),div_heartIcon[e].style.opacity=0,putXY(div_scoreText[e],800*(e-1)+140+400,60),translate(div_scoreText[e],Right,Center),fontSet(div_scoreText[e],"#FFFFFF","Higashi","70","normal","right"),textEdge(div_scoreText[e],"3","#000000"),div_scoreText[e].style.letterSpacing="0px",1==challenge&&2==e?(setText(div_scoreText[e],"PLEASE WAIT !"),0==pause&&"start"!=scene&&(div_scoreText[e].style.opacity=statusFrame.p)):0!=stock&&0!=player[r1_2(e)].pad&&0!=time?(setText(div_scoreText[e],"PUSH "+startButton(e,"no")),0==pause&&"start"!=scene&&(div_scoreText[e].style.opacity=statusFrame.p)):(0==stock?setText(div_scoreText[e],"GAME OVER"):Remove(div_scoreText[e]),div_scoreText[e].style.opacity=1)):(0==battle?(setImage(div_scoreWindow[e],"image/"+e+"pScore.png"),putXY(div_scoreWindow[e],800*(e-1)+140,60),putXY(div_heartIcon[e],800*(e-1)+140,60),putXY(div_scoreText[e],800*(e-1)+140+420,60),fontSet(div_scoreText[e],"#FFFFFF","Higashi","45","bold","right"),textEdge(div_scoreText[e],"3","#000000")):(setImage(div_scoreWindow[e],"image/"+e+"pScoreBattle.png"),putXY(div_scoreWindow[e],400*(e-1)+440,75),putXY(div_heartIcon[e],400*(e-1)+440,75),putXY(div_winsText[e],400*(e-1)+440+220,65),translate(div_winsText[e],Right,Center),setText(div_winsText[e],wins[e]),putXY(div_scoreText[e],400*(e-1)+440+220,105),fontSet(div_scoreText[e],"#FFFFFF","Higashi","25","bold","right"),textEdge(div_scoreText[e],"2","#000000")),translate(div_scoreText[e],Right,Center),div_scoreText[e].style.letterSpacing="4px",div_scoreText[e].style.opacity=1,playerStatus[e].score<10?setText(div_scoreText[e],"0"+playerStatus[e].score):99999999<playerStatus[e].score?setText(div_scoreText[e],"99999999"):setText(div_scoreText[e],playerStatus[e].score),1<=playerStatus[e].life?div_heartIcon[e].style.opacity=1:div_heartIcon[e].style.opacity=0)}let item=[],itemBlock=[0,0,1,1,0,1,1,1,1,1,1,1],div_item=[],div_itemWindow=[];for(let e=0;e<21;e++)item[e]={m:0,x:0,fx:0,y:0,v:0,height:0,t:0,t2:0,type:0,p:0,w:0,dx:0,dy:0,size:1,rotate:0},document.write("<div id= item"+e+"> </div>"),div_item[e]=document.getElementById("item"+e),defaultSet(div_item[e],screen),putXY(div_item[e],100,100*e),transform(div_item[e],Center,Center,0,65/32),div_item[e].style.zIndex=0,div_item[e].style.mixBlendMode="normal",div_item[e].style.imageRendering="pixelated",setImage(div_item[e],""),document.write("<div id= itemWindow"+e+"> </div>"),div_itemWindow[e]=document.getElementById("itemWindow"+e),defaultSet(div_itemWindow[e],screen),putXY(div_itemWindow[e],100,100*e),transform(div_itemWindow[e],Center,Center,0,65/32),div_itemWindow[e].style.zIndex=0,div_itemWindow[e].style.mixBlendMode="normal",div_itemWindow[e].style.imageRendering="pixelated",setImage(div_itemWindow[e],"");let itemNumber,itemRatio,big,clear=0,iN=0;function itemSetUp(){1==virus?itemBlock[10]=0:itemBlock[10]=1,itemRatio=0==battle?(itemDesign(),.005):(itemDesignBattle(),.002),itemSetUpOnOff()}let itemTime=0;function itemDisplay(){if(itemTime++,Math.random()<itemRatio||0==battle&&0==enemySum()||1==battle&&itemTime%(7*fps)==7*fps-1&&0==victoryShift)for(;;){if(iN=Math.floor(21*Math.random()),0==item[iN].m){item[iN].m=1,item[iN].fx=Math.floor(1120*Math.random())+160,item[iN].x=item[iN].fx,item[iN].v=2*Math.random()+2,item[iN].y=50,item[iN].t=Math.random()*Math.PI*2,item[iN].t2=0;break}if(item.slice(0,21).every(e=>0!==e.m))break}for(let a=0;a<21;a++){if(1==item[a].m){item[a].y+=item[a].v,item[a].t+=.02*item[a].v,item[a].x=item[a].fx+60*Math.sin(item[a].t);for(let t=1;t<=2;t++)for(let e=0;e<4;e++)hitWeapon(t,e,item[a])<=34*wep[t][e].size&&1<=wep[t][e].m&&0!=player[t].pad&&playerHitOK_State(t)&&(0<=playerStatus[t].virusTime||10!=item[a].type)&&0==playerStatus[t].itemTime&&(0==itemBlock[item[a].type]?(item[a].m=-100,itemGet(t,item[a].type)):(item[a].m=2,item[a].p=t,item[a].w=e,item[a].dx=itemDX_DY(t,e,item[a]).x,item[a].dy=itemDX_DY(t,e,item[a]).y,soundName[1]="se/itemCatch",catchVib(t)))}if(2==item[a].m&&(item[a].x=wep[item[a].p][item[a].w].x+item[a].dx,item[a].y=wep[item[a].p][item[a].w].y+item[a].dy,0==wep[item[a].p][item[a].w].m&&(item[a].x=player[item[a].p].x,item[a].y=player[item[a].p].y),-10!=wep[item[a].p][item[a].w].m&&-11!=wep[item[a].p][item[a].w].m||(item[a].fx=item[a].x,item[iN].t=Math.floor(2*Math.random())*Math.PI,item[a].m=1)),1<=item[a].m){for(let e=1;e<=2;e++)hitBody(e,item[a],37)&&0!=player[e].pad&&playerHitOK_State(e)&&(0<=playerStatus[e].virusTime||10!=item[a].type)&&0==playerStatus[e].itemTime&&((k.X[e]||k.R1[e])&&1==itemBlock[item[a].type]?(item[a].m=-50,soundName[0]="se/itemBlock",catchVib(e)):(item[a].m=-100,itemGet(e,item[a].type)));992.5<=item[a].y&&1==item[a].m&&(item[a].m=0),2==item[a].m?(div_item[a].style.zIndex=Math.round(10*wep[item[a].p][item[a].w].y-3),div_itemWindow[a].style.zIndex=Math.round(10*wep[item[a].p][item[a].w].y-2)):(div_item[a].style.zIndex=Math.round(10*item[a].y-3),div_itemWindow[a].style.zIndex=Math.round(10*item[a].y-2)),transform(div_item[a],Center,Center,0,65/32),transform(div_itemWindow[a],Center,Center,0,65/32),putXY(div_item[a],item[a].x,item[a].y),setImage(div_item[a],"image/item"+item[a].type+".png"),putXY(div_itemWindow[a],item[a].x,item[a].y)}-50==item[a].m&&(item[a].rotate=0,item[a].size=1,item[a].m=-51),-51==item[a].m&&(item[a].rotate+=20,item[a].size-=1/30,transform(div_item[a],Center,Center,item[a].rotate,65*item[a].size/32),transform(div_itemWindow[a],Center,Center,item[a].rotate,65*item[a].size/32),item[a].size<=0)&&(item[a].size=1,item[a].m=-100),(1<=item[a].m||-51==item[a].m)&&(9!=item[a].type?(item[a].t2++,item[a].t2%4<=1?div_itemWindow[a].style.opacity=0:div_itemWindow[a].style.opacity=1,setImage(div_itemWindow[a],"image/itemWindow.png")):(div_itemWindow[a].style.opacity=1,Remove(div_itemWindow[a]))),0!=item[a].m&&-100!=item[a].m||(Remove(div_item[a]),Remove(div_itemWindow[a]))}}function itemGet(e,t){4!=t&&10!=t&&(soundName[0]="se/itemGet"),10!=t&&1<=playerStatus[e].virusTime&&(playerStatus[e].virusTime=-60,item[19].m=1,item[19].fx=player[e].x,item[19].x=item[19].fx,item[19].v=2*Math.random()+2,item[19].y=player[e].y,item[19].t=Math.floor(2*Math.random())*Math.PI,item[19].t2=0),10!=t&&itemVib(e),0==t&&(playerStatus[e].speedLevel++,7<playerStatus[e].speedLevel)&&(playerStatus[e].speedLevel=7),1==t&&(playerStatus[e].weaponLevel++,7<playerStatus[e].weaponLevel)&&(playerStatus[e].weaponLevel=7),3==t&&(playerStatus[e].life=1,soundName[15]="voice/"+e+"/heart"),4==t&&oneUp(),5==t&&(playerStatus[e].wType="big",soundName[15]="voice/"+e+"/big"),7==t&&(playerStatus[e].speedLevel+=4,7<playerStatus[e].speedLevel)&&(playerStatus[e].speedLevel=7),8==t&&(timeStop=16*fps,soundName[15]="voice/"+e+"/stop"),9==t&&(playerStatus[e].invincible=800,soundName[15]="voice/"+e+"/invincible"),10==t&&(stunVib(e),soundName[0]="se/virus",playerStatus[e].virusTime=1,playerStatus[e].virusType=virusRandom())}function itemSetUpOnOff(){for(let e=0;e<19;e++)!(e<itemNumber)||-200==item[e].m?item[e].m=-100:(1<=item[e].m||1<=clear||0!=item[e].type&&1!=item[e].type&&7!=item[e].type)&&(item[e].m=0);for(let e=19;e<21;e++)!player1and2()||-200==item[e].m?item[e].m=-100:(1<=item[e].m||1<=clear||0!=item[e].type&&1!=item[e].type&&7!=item[e].type)&&(item[e].m=0)}function oneUp(){0==battle&&(soundName[2]="se/1up",9<++stock)&&(stock=9)}function itemGetOut(e){let t;if("normal"!=playerStatus[e].wType){for(let e=0;e<21;e++){if(-100==item[e].m){t=e;break}t="no"}"no"!=t&&(playerStatus[e].itemTime=-60,item[t].m=1,item[t].fx=player[e].x,item[t].x=item[t].fx,item[t].v=2*Math.random()+2,item[t].y=player[e].y,item[t].t=Math.floor(2*Math.random())*Math.PI,item[t].t2=0,"4way"==playerStatus[e].wType?item[t].type=2:"big"==playerStatus[e].wType?item[t].type=5:"slow"==playerStatus[e].wType&&(item[t].type=6)),playerStatus[e].wType="normal"}}function hitWeapon(e,t,a){var n=wep[e][t].x,i=wep[e][t].y,s=(wep[e][t].lastX+n)/2,e=(wep[e][t].lastY+i)/2,t=a.x,a=a.y,r=e-i,l=n-s;let o=Math.abs(r*t+l*a+(i*s-n*e))/Math.sqrt(r**2+l**2);var r=(t-n)*(s-n)+(a-i)*(e-i);return(r<0||(s-n)**2+(e-i)**2<r)&&(l=Math.sqrt((t-n)**2+(a-i)**2),r=Math.sqrt((t-s)**2+(a-e)**2),o=Math.min(l,r)),o}function itemDX_DY(e,t,a){hitWeapon(e,t,a);var n=wep[e][t].x,i=wep[e][t].y,s=(wep[e][t].lastX+n)/2,e=(wep[e][t].lastY+i)/2,t=a.x,a=a.y,r={};return r.x=Math.abs(t-(n+(s-n)*((t-n)*(s-n)+(a-i)*(e-i))/((s-n)**2+(e-i)**2))),r.y=Math.abs(a-(i+(e-i)*((t-n)*(s-n)+(a-i)*(e-i))/((s-n)**2+(e-i)**2))),r}function hitBody(e,t,a){return Math.abs(player[e].x-t.x)<a&&Math.abs(player[e].y-t.y)<a&&0==player[e].height&&t.height<=20}let pause=0;function pushStart(){if(0==pause)for(let e=1;e<=2;e++)km_1t.Start[e]&&"man"==player[e].pad&&0!=time&&"miss"!=player[e].state&&"clear"!=player[e].state&&0==toEnding?(pause=1,soundName[0]="se/pauseIn"):km_1t.Start[e]&&0==player[e].pad&&0!=player[r1_2(e)].pad&&0!=time&&"miss"!=player[r1_2(e)].state&&"clear"!=player[r1_2(e)].state&&0==challenge&&1!=battle&&1<=stock&&(playerSetLocation(e),playerSetStart(e),player[e].pad="man",playerFrameReset(e),stock--);else if(1==pause)for(let e=1;e<=2;e++)km_1t.Start[e]&&(pause=0,soundName[0]="se/pauseOut");pauseDisplay()}document.write("<div id= pauseDisplay> </div>");const div_pauseDisplay=document.getElementById("pauseDisplay");function pauseDisplay(){0==pause?Remove(div_pauseDisplay):1==pause&&setImage(div_pauseDisplay,"image/pause.png")}defaultSet(div_pauseDisplay,screen),putXY(div_pauseDisplay,"50%","60%"),translate(div_pauseDisplay,Center,Center),div_pauseDisplay.style.zIndex=15e5,div_pauseDisplay.style.mixBlendMode="normal",setImage(div_pauseDisplay,"");let enemyNumber=[];const enemyV=[2,4,7,"X"],enemyVec=[1,1,1,1],enemySC=[100,150,150,150],enemyFall=[1,0,1,0],enemyFaSt=[40,"LR",30,"D"],enemyArts=[4,3,4,6],enemyAnSp=[12,8,13,6],enemyAllType=enemyV.length;let screenEnemyMax=4,stageEnemyMax,enemy=[],enemySprite=[],div_enemy=[],div_enemyShadow=[],div_enemyLine=[],div_enemyScore=[],enemyScore=[];const enemyDisplayMax=20;for(let e=0;e<enemyAllType;e++)enemyNumber[e]=0;for(let e=0;e<enemyDisplayMax;e++)enemy[e]={m:0,x:0,y:0,xI:0,yI:0,height:0,vec:"down",v:3,type:0,standBy:0,life:1,invincible:0,defeatPlayer:1,score:0,slow:1,t:0,vx:0,turnTime:0,vy:0,battleBall:0},enemySprite[e]={p:0,k:0},enemyScore[e]={x:0,y:0,m:0},document.write("<div id= enemy"+e+"> </div>"),div_enemy[e]=document.getElementById("enemy"+e),defaultSet(div_enemy[e],screen),putXY(div_enemy[e],100,100*e),translate(div_enemy[e],Center,Bottom),div_enemy[e].style.zIndex=0,div_enemy[e].style.mixBlendMode="normal",setImage(div_enemy[e],""),document.write("<div id= enemyShadow"+e+"> </div>"),div_enemyShadow[e]=document.getElementById("enemyShadow"+e),defaultSet(div_enemyShadow[e],screen),putXY(div_enemyShadow[e],100,100*e),translate(div_enemyShadow[e],Center,Bottom),div_enemyShadow[e].style.zIndex=-5,div_enemyShadow[e].style.mixBlendMode="normal",setImage(div_enemyShadow[e],""),document.write("<div id= enemyLine"+e+"> </div>"),div_enemyLine[e]=document.getElementById("enemyLine"+e),defaultSet(div_enemyLine[e],screen),putXY(div_enemyLine[e],100,100*e),translate(div_enemyLine[e],Center,Center),div_enemyLine[e].style.zIndex=-4,div_enemyLine[e].style.mixBlendMode="normal",setImage(div_enemyLine[e],""),document.write("<div id= enemyScore"+e+"> </div>"),div_enemyScore[e]=document.getElementById("enemyScore"+e),defaultSet(div_enemyScore[e],screen),putXY(div_enemyScore[e],0,0),translate(div_enemyScore[e],Center,Center),fontSet(div_enemyScore[e],"#FFFFFF","Higashi","35","bold","right"),textEdge(div_enemyScore[e],"3","#000000"),div_enemyScore[e].style.zIndex=0,setText(div_enemyScore[e],"");let enemyAppear=.03;function enemies(){if(Math.random()<enemyAppear)for(let e=0;e<screenEnemyMax;e++)if(0==enemy[e].m&&!1===defeatAllEnemies()){for(;;)if(enemy[e].type=Math.floor(Math.random()*enemyAllType),0!=enemyNumber[enemy[e].type]){enemy[e].m=1,enemyNumber[enemy[e].type]--;break}break}for(let a=0;a<screenEnemyMax;a++){if(0==enemy[a].m&&(enemy[a].invincible=0,frameReset(enemySprite[a])),1==enemy[a].m){if(enemy[a].t=Math.random()*(2*Math.PI),1==enemyFall[enemy[a].type]){for(let e=0;e<1e3;e++){var n=Math.floor(Math.random()*findFreePositions(stageMap).length);for(let e=1;e<=2;e++){if(!(3<Math.abs(player[e].xI+player[e].yI-(findFreePositions(stageMap)[n].xI+findFreePositions(stageMap)[n].yI))||0==player[e].pad)){enemy[a].m=1;break}enemy[a].m=1.5}if(1.5==enemy[a].m){enemy[a].xI=findFreePositions(stageMap)[n].xI,enemy[a].yI=findFreePositions(stageMap)[n].yI;break}}1.5==enemy[a].m?(enemy[a].x=xI_x(enemy[a].xI),enemy[a].y=yI_y(enemy[a].yI),enemy[a].height=2880,enemy[a].turnTime=-1,9==enemy[a].type?enemy[a].life=2:22==enemy[a].type?enemy[a].life=3:enemy[a].life=1):(enemy[a].m=0,enemyNumber[enemy[a].type]++)}else enemy[a].height=0,enemy[a].life=1,"LR"==enemyFaSt[enemy[a].type]&&(enemy[a].vec=LR_random(),"left"==enemy[a].vec?enemy[a].x=1540:enemy[a].x=-100,"Conveyer"==skin?enemy[a].y=Math.floor(650*Math.random())+200:enemy[a].y=Math.floor(750*Math.random())+200,15==enemy[a].type?(enemy[a].m=1.8,enemy[a].t=0):enemy[a].m=2,20==enemy[a].type?enemy[a].v=Math.floor(4*Math.random())+3:enemy[a].v=enemyV[enemy[a].type]),"D"==enemyFaSt[enemy[a].type]&&(enemy[a].vec="down",14==enemy[a].type?enemy[a].x=400+Math.floor(640*Math.random()):enemy[a].x=50+Math.floor(1340*Math.random()),enemy[a].y=0,enemy[a].m=2,7==enemy[a].type?(enemy[a].v=enemyV[enemy[a].type],enemy[a].vx=Math.floor(5*Math.random())-2):3==enemy[a].type?enemy[a].v=Math.floor(3*Math.random())+3:enemy[a].v=enemyV[enemy[a].type]),"U"==enemyFaSt[enemy[a].type]&&(enemy[a].vec="up",enemy[a].x=50+Math.floor(1340*Math.random()),enemy[a].y=1102,0==bs&&17==enemy[a].type&&0==conveyerSpeed&&("game"==scene&&(soundName[8]="se/dolDash"),enemy[a].t=0),enemy[a].m=2,enemy[a].v=enemyV[enemy[a].type]);translate(div_enemyShadow[a],Center,Bottom)}if("Conveyer"==skin&&0==enemyFall[enemy[a].type]&&1<enemy[a].m&&0==timeStop&&0==battle&&(1==conveyerSpeed?enemy[a].y+=2*easySpeedGimmick():enemy[a].y+=+easySpeedGimmick()),1.5==enemy[a].m&&(enemy[a].height-=30,enemy[a].standBy=-10,enemy[a].v=enemyV[enemy[a].type],frameReset(enemySprite[a]),enemy[a].height<=0)&&(enemy[a].height=0,enemy[a].battleBall=0,enemy[a].m=2),1.8==enemy[a].m&&(enemyLineDisplay15(a),120<enemy[a].t)&&((enemy[a].t=0)==bs&&"game"==scene&&(soundName[8]="se/dolDash"),enemy[a].m=2),2==enemy[a].m){enemy[a].slow=timeStopEnemy(a),0<enemy[a].invincible?enemy[a].invincible--:enemy[a].invincible=0,14==enemy[a].type&&600<=enemy[a].y?animeFrame(enemySprite[a],2,enemyArts[enemy[a].type]+2):animeFrame(enemySprite[a],enemyAnSp[enemy[a].type],enemyArts[enemy[a].type]),1==enemyFall[enemy[a].type]?(0==enemy[a].standBy&&fallEnemyWayWalk(a),-10==enemy[a].standBy?(enemy[a].xI=x_xI(enemy[a].x),enemy[a].yI=y_yI(enemy[a].y),22==enemy[a].type||16==enemy[a].type?fallEnemyWaySetChase(a,1):19==enemy[a].type?fallEnemyWaySetChase(a,2):21==enemy[a].type?fallEnemyWaySetChase(a,33):(fallEnemyWaySet(a),enemy[a].turnTime++),8==enemy[a].type&&3<=enemy[a].turnTime&&(enemy[a].turnTime=0,enemy[a].standBy=20),16==enemy[a].type&&5<=enemy[a].turnTime&&(enemy[a].turnTime=0,enemy[a].standBy=50)):0<enemy[a].standBy&&(enemy[a].standBy--,enemy[a].standBy<=0)&&(enemy[a].standBy=0),18==enemy[a].type&&(8<=enemy[a].turnTime&&(enemy[a].turnTime=0),2<=enemy[a].turnTime&&enemy[a].turnTime<6?(enemy[a].height+=6,138<=enemy[a].height&&(enemy[a].height=138)):(enemy[a].height-=2,enemy[a].height<=0&&(enemy[a].height=0)))):("LR"==enemyFaSt[enemy[a].type]&&(6==enemy[a].type&&(enemy[a].t+=.1,enemy[a].y+=7*Math.sin(enemy[a].t)*enemy[a].slow),10==enemy[a].type&&(enemy[a].t+=.1,easyLevelCheck()?enemy[a].height=30*Math.sin(enemy[a].t)+30:enemy[a].height=60*Math.sin(enemy[a].t)+60),15==enemy[a].type&&enemyLineDisplay15(a),"left"==enemy[a].vec?enemy[a].x-=enemy[a].v*enemy[a].slow:enemy[a].x+=enemy[a].v*enemy[a].slow),"D"==enemyFaSt[enemy[a].type]&&(7==enemy[a].type&&(enemy[a].x+=enemy[a].vx*enemy[a].slow),5==enemy[a].type&&(Math.abs(enemy[a].x-player[1].x)<=35&&0!=player[1].pad&&enemy[a].y<player[1].y||Math.abs(enemy[a].x-player[2].x)<=35&&0!=player[2].pad&&enemy[a].y<player[2].y)?enemy[a].y+=(enemy[a].v+3)*enemy[a].slow:14==enemy[a].type&&enemy[a].y<300?enemy[a].y+=5*enemy[a].slow:enemy[a].y+=enemy[a].v*enemy[a].slow),"U"==enemyFaSt[enemy[a].type]&&(17==enemy[a].type?(enemyLineDisplay17(a),1==conveyerSpeed?enemy[a].y-=+enemy[a].slow:enemy[a].y-=9*enemy[a].slow):enemy[a].y-=enemy[a].v*enemy[a].slow),14==enemy[a].type&&960<enemy[a].y&&(blast=1),(enemy[a].x<-101||1541<enemy[a].x||enemy[a].y<0||1102<enemy[a].y)&&(enemy[a].m=0,enemyNumber[enemy[a].type]++));for(let t=1;t<=2;t++)for(let e=0;e<4;e++)hitWeapon(t,e,enemy[a])<=34*wep[t][e].size&&1<=wep[t][e].m&&0!=player[t].pad&&playerHitOK_State(t)&&0==enemy[a].invincible&&enemy[a].height<=20&&(attackVib(t),22==enemy[a].type&&0<wep[t][e].v&&(wep[t][e].v*=-1),enemy[a].life--,soundName[7]="se/defeatEnemy",enemy[a].life<=0?(Remove(div_enemyLine[a]),enemy[a].defeatPlayer=t,enemy[a].score=enemySC[enemy[a].type]*wep[t][e].chain,wep[t][e].chain+=1,enemy[a].invincible=20):enemy[a].invincible=70,13==enemy[a].type&&frameReset(enemySprite[a]),enemy[a].m=3)}if(3==enemy[a].m&&(enemy[a].invincible--,enemy[a].invincible<=35&&0<enemy[a].life?enemy[a].m=2:enemy[a].invincible<=0&&enemy[a].life<=0&&(13==enemy[a].type?enemy[a].m=6:(enemy[a].m=4,soundName[8]="se/defeatEnemySuper"),enemyScore[a].x=enemy[a].x,enemyScore[a].y=enemy[a].y-60,enemyScore[a].m=60,playerStatus[enemy[a].defeatPlayer].score+=enemy[a].score,frameReset(enemySprite[a]))),2==enemy[a].m||3==enemy[a].m)for(let e=1;e<=2;e++)hitBody(e,enemy[a],40)&&0!=player[e].pad&&playerHitOK_State(e)&&0<enemy[a].life&&playerDamage(e),hitBody(e,enemy[a],40)&&0!=player[e].pad&&hyperState(e)&&0<enemy[a].life&&0==enemy[a].invincible&&enemy[a].height<=20&&(attackVib(e),enemy[a].life--,soundName[7]="se/defeatEnemy",enemy[a].life<=0?(Remove(div_enemyLine[a]),enemy[a].defeatPlayer=e,enemy[a].score=enemySC[enemy[a].type],enemy[a].invincible=20):enemy[a].invincible=70,13==enemy[a].type&&frameReset(enemySprite[a]),enemy[a].m=3);4==enemy[a].m&&(enemySprite[a].k++,5<=enemySprite[a].k&&(enemySprite[a].p++,enemySprite[a].k=0),3<=enemySprite[a].p)&&(enemy[a].m=5),4!=enemy[a].m&&5!=enemy[a].m&&6!=enemy[a].m&&7!=enemy[a].m||(enemyScore[a].y-=.3,--enemyScore[a].m,putXY(div_enemyScore[a],enemyScore[a].x,enemyScore[a].y),div_enemyScore[a].style.zIndex=Math.round(10*enemy[a].y)-3,setText(div_enemyScore[a],enemy[a].score),enemyScore[a].m<=0&&6!=enemy[a].m&&7!=enemy[a].m&&(enemyScore[a].m=0,enemy[a].m=0,1==battle)&&enemyNumber[enemy[a].type]++),6==enemy[a].m&&(enemy[a].battleBall++,30<=enemy[a].battleBall)&&(Vector(enemy[a].x,enemy[a].y,player[r1_2(enemy[a].defeatPlayer)].x,player[r1_2(enemy[a].defeatPlayer)].y),enemy[a].vx=lastVec.x,enemy[a].vy=lastVec.y,soundName[8]="se/defeatEnemySuper",enemy[a].m=7),7==enemy[a].m&&(enemy[a].x+=enemy[a].vx*battleBallSpeed[battleBallLevel],enemy[a].y+=enemy[a].vy*battleBallSpeed[battleBallLevel],hitBody(r1_2(enemy[a].defeatPlayer),enemy[a],40)&&0!=player[r1_2(enemy[a].defeatPlayer)].pad&&playerHitOK_State(r1_2(enemy[a].defeatPlayer))&&playerDamage(r1_2(enemy[a].defeatPlayer)),enemy[a].x<-101||1541<enemy[a].x||enemy[a].y<0||1102<enemy[a].y)&&(enemy[a].m=0,enemyNumber[enemy[a].type]++),1<enemy[a].m&&1.8!=enemy[a].m&&(enemy[a].height<=970&&(putXY(div_enemy[a],enemy[a].x,enemy[a].y+46-enemy[a].height),div_enemy[a].style.zIndex=Math.round(10*enemy[a].y+5*enemy[a].height)-3,3!=enemy[a].m&&6!=enemy[a].m&&7!=enemy[a].m||13!=enemy[a].type?3==enemy[a].m?setImage(div_enemy[a],"image/enemy/"+enemy[a].type+"_D.png"):4==enemy[a].m?setImage(div_enemy[a],"image/enemy/D_"+enemySprite[a].p+".png"):5==enemy[a].m?Remove(div_enemy[a]):0<enemy[a].m&&(1==enemyVec[enemy[a].type]?setImage(div_enemy[a],"image/enemy/"+enemy[a].type+"_"+enemySprite[a].p+".png"):setImage(div_enemy[a],"image/enemy/"+enemy[a].type+"_"+enemySprite[a].p+"_"+enemy[a].vec+".png")):(animeFrame(enemySprite[a],6,2),setImage(div_enemy[a],"image/enemy/"+enemy[a].type+"_D"+enemySprite[a].p+"_"+enemy[a].defeatPlayer+".png"))),putXY(div_enemyShadow[a],enemy[a].x,enemy[a].y+46),4==enemy[a].m||5==enemy[a].m?Remove(div_enemyShadow[a]):0<enemy[a].m&&setImage(div_enemyShadow[a],"image/playerShadow.png"),0<enemy[a].invincible&&0<enemy[a].life?div_enemy[a].style.opacity=t%2:0<timeStop&&2==enemy[a].m?timeStop>3*fps?t%32==0?div_enemy[a].style.opacity=0:div_enemy[a].style.opacity=1:t%3==0?div_enemy[a].style.opacity=0:div_enemy[a].style.opacity=1:div_enemy[a].style.opacity=1,1.5==enemy[a].m||0<enemy[a].invincible&&0<enemy[a].life?div_enemyShadow[a].style.opacity=t%2:0<timeStop&&2==enemy[a].m?timeStop>3*fps?t%32==0?div_enemyShadow[a].style.opacity=0:div_enemyShadow[a].style.opacity=1:t%3==0?div_enemyShadow[a].style.opacity=0:div_enemyShadow[a].style.opacity=1:div_enemyShadow[a].style.opacity=1),0==enemy[a].m&&(Remove(div_enemy[a]),Remove(div_enemyShadow[a]),Remove(div_enemyScore[a]),Remove(div_enemyLine[a]))}}function enemyLineDisplay15(e){enemy[e].t++,putXY(div_enemyLine[e],"50%",enemy[e].y),translate(div_enemyLine[e],Center,Center),setImage(div_enemyLine[e],"image/enemy/15_line"+enemy[e].m+".png"),enemy[e].t%4==0?div_enemyLine[e].style.opacity=0:div_enemyLine[e].style.opacity=1}function enemyLineDisplay17(e){enemy[e].t++,putXY(div_enemyLine[e],enemy[e].x,"50%"),translate(div_enemyLine[e],Center,Center),setImage(div_enemyLine[e],"image/enemy/17_line"+enemy[e].m+".png"),enemy[e].t%4==0?div_enemyLine[e].style.opacity=0:div_enemyLine[e].style.opacity=1}let boss={stage:!1,m:0,x:0,y:0,name:"",HP:0,height:0,vec:"left",invincible:0,pattern:"walk",time:0,destroy:0,defeatPlayer:0,jumpV:0,vx:0,vy:0,targetX:0,targetY:0,fx:0,fy:0,theta:0,theta2:0,r:0,warpTime:0,shift:0,target:0},bossFrame={};document.write("<div id= boss> </div>");const div_boss=document.getElementById("boss"),div_bossShadow=(defaultSet(div_boss,screen),putXY(div_boss,0,0),translate(div_boss,Center,Bottom),div_boss.style.zIndex=0,div_boss.style.mixBlendMode="normal",setImage(div_boss,""),document.write("<div id= bossShadow> </div>"),document.getElementById("bossShadow"));defaultSet(div_bossShadow,screen),putXY(div_bossShadow,0,0),translate(div_bossShadow,Center,Bottom),div_bossShadow.style.zIndex=0,div_bossShadow.style.mixBlendMode="normal",setImage(div_bossShadow,"");let hitBoss=[];function bossReset(){frameReset(bossFrame),boss.x=720,boss.y=370,boss.height=0,boss.m=1,boss.invincible=80,boss.time=0,boss.destroy=0}function bossDisplay(){if(boss.stage){if(0==boss.m&&(bossReset(),"madHook"==boss.name)){boss.vec=LR_random(),boss.pattern="walk";for(let e=0;e<2;e++)madHookArms[e]={HP:5,m:1,x:boss.x-300*(e-.5),y:400,invincible:80,height:0,time:0,speed:1,target:1}}if(1==boss.m){for(let t=1;t<=2;t++){hitBody(t,boss,hitBoss[boss.name][1])&&0!=player[t].pad&&playerHitOK_State(t)&&0<boss.HP&&("darkAcero"==boss.name&&warpHitState()||("taktMan"==boss.name&&"turn"==boss.pattern?"stun"!=player[t].state&&"stunSet"!=player[t].state&&"stunInvincible"!=player[t].state&&"stunSetInvincible"!=player[t].state&&(taktStun=1,player[t].state="stunSetInvincible",soundName[5]="se/friendStun"):playerDamage(t)));for(let e=0;e<4;e++)hitWeapon(t,e,boss)<=hitBoss[boss.name][0]*wep[t][e].size&&1<=wep[t][e].m&&0!=player[t].pad&&playerHitOK_State(t)&&0==boss.invincible&&0<boss.HP&&boss.height<=20&&(attackVib(t),boss.defeatPlayer=t,boss.HP--,boss.invincible=80,soundName[7]="se/defeatEnemy")}bossInvincible(boss),"madHook"==boss.name?madHookMove():"bubbleDolphin"==boss.name?bubbleDolphinMove():"taktMan"==boss.name?taktManMove():"darkAcero"==boss.name?darkAceroMove():"bootOrbit"==boss.name?bootMove():"bootOrbitB"==boss.name&&bootBMove()}bossBlastDisplay(),bossBasicDisplay(),"madHook"==boss.name&&madHookDisplay(),0==boss.HP&&0==boss.invincible&&"darkAcero"!=boss.name&&(boss.destroy++,200<=boss.destroy)&&(boss.destroy-=100)}}function bossBasicDisplay(){putXY(div_boss,boss.x,boss.y+90-boss.height),putXY(div_bossShadow,boss.x,boss.y+90),div_boss.style.zIndex=Math.round(10*boss.y-4),0==boss.invincible&&0<boss.HP?(div_boss.style.opacity=1,div_bossShadow.style.opacity=1):0==boss.HP&&0==boss.invincible?(div_boss.style.opacity=boss.destroy%2,div_bossShadow.style.opacity=boss.destroy%2):(div_boss.style.opacity=boss.invincible%2,div_bossShadow.style.opacity=boss.invincible%2),boss.destroy<400?(setImageBoss(div_boss,"image/boss/"+boss.name+bossFrame.p+".png"),setImage(div_bossShadow,"image/boss/shadow.png")):(Remove(div_boss,""),Remove(div_bossShadow,""))}function bossInvincible(e){0<e.invincible&&(e.invincible--,e.invincible<=0)&&(e.invincible=0)}function bossActionOK(){return boss.invincible<=40&&0<boss.HP}function bubbleCheck(){let t;for(let e=0;e<20;e++){if(5!=bubble[e].m&&4!=bubble[e].m){t=!1;break}t=!0}return t}hitBoss.madHook=[56,60],hitBoss.bubbleDolphin=[56,60],hitBoss.taktMan=[35,37.5],hitBoss.darkAcero=[36,60/56*36],hitBoss.bootOrbit=[56,60],hitBoss.bootOrbitB=[56,60];let madHookArms=[],div_madHookArms=[];for(let e=0;e<2;e++)document.write("<div id= madHookArms"+e+"> </div>"),div_madHookArms[e]=document.getElementById("madHookArms"+e),defaultSet(div_madHookArms[e],screen),putXY(div_madHookArms[e],100,100*e),translate(div_madHookArms[e],Center,Center),div_madHookArms[e].style.zIndex=0,div_madHookArms[e].style.mixBlendMode="normal",setImage(div_madHookArms[e],"");function madHookMove(){if("walk"==boss.pattern&&("left"==boss.vec&&bossActionOK()&&(boss.x-=2),"right"==boss.vec&&bossActionOK()&&(boss.x+=2),boss.x<=400&&(boss.vec="right",boss.pattern="stop"),1040<=boss.x&&(boss.vec="left",boss.pattern="stop"),Math.random()<.05)){var t=Math.floor(2*Math.random());for(let e=1;e<=2;e++)Math.abs(player[e].x-madHookArms[t].x)<=45&&0!=player[e].pad&&1==madHookArms[t].m&&bossActionOK()&&(madHookArms[t].m=2,boss.pattern="superStop")}"stop"==boss.pattern&&(boss.time++,20<=boss.time)&&(boss.pattern="walk",boss.time=0);for(let a=0;a<2;a++){bossInvincible(madHookArms[a]),2==madHookArms[a].m?(madHookArms[a].time++,20<=madHookArms[a].time&&(madHookArms[a].y+=5*easySpeedBoss(),20==madHookArms[a].time)&&(soundName[6]="se/madHookArm"),900<=madHookArms[a].y&&(madHookArms[a].y=900,madHookArms[a].m=3)):3==madHookArms[a].m&&(madHookArms[a].y-=9*easySpeedBoss(),madHookArms[a].y<=400)&&(madHookArms[a].y=400,madHookArms[a].time=0,madHookArms[a].m=1,boss.pattern="walk"),madHookArms[a].x=boss.x-300*(a-.5);for(let t=1;t<=2;t++){hitBody(t,madHookArms[a],45)&&0!=player[t].pad&&playerHitOK_State(t)&&0<boss.HP&&playerDamage(t),hitBody(t,madHookArms[a],45)&&0!=player[t].pad&&hyperState(t)&&0==madHookArms[a].invincible&&0<madHookArms[a].HP&&(2==madHookArms[a].m||3==madHookArms[a].m)&&0<boss.HP&&(attackVib(t),madHookArms[a].HP--,madHookArms[a].invincible=80,soundName[7]="se/defeatEnemy");for(let e=0;e<4;e++)hitWeapon(t,e,madHookArms[a])<=40*wep[t][e].size&&1<=wep[t][e].m&&0!=player[t].pad&&playerHitOK_State(t)&&0==madHookArms[a].invincible&&0<madHookArms[a].HP&&(2==madHookArms[a].m||3==madHookArms[a].m)&&0<boss.HP&&(attackVib(t),madHookArms[a].HP--,madHookArms[a].invincible=80,soundName[7]="se/defeatEnemy")}}}function madHookDisplay(){for(let e=0;e<2;e++)putXY(div_madHookArms[e],madHookArms[e].x,madHookArms[e].y),div_madHookArms[e].style.zIndex=Math.floor(10*madHookArms[e].y)-4,0==boss.HP&&0==boss.invincible?div_madHookArms[e].style.opacity=boss.destroy%2:0==madHookArms[e].invincible?div_madHookArms[e].style.opacity=1:div_madHookArms[e].style.opacity=madHookArms[e].invincible%2,boss.destroy<400?1<=madHookArms[e].m&&(madHookArms[e].HP<=0?setImage(div_madHookArms[e],"image/boss/madHookArmBroken.png"):setImage(div_madHookArms[e],"image/boss/madHookArm.png")):Remove(div_madHookArms[e],"")}let bubbleFrame=[],div_bubble=[];for(let e=0;e<=20;e++)document.write("<div id= bubble"+e+"> </div>"),div_bubble[e]=document.getElementById("bubble"+e),defaultSet(div_bubble[e],screen),putXY(div_bubble[e],100,100*e),translate(div_bubble[e],Center,Center),div_bubble[e].style.zIndex=0,div_bubble[e].style.mixBlendMode="normal",setImage(div_bubble[e],""),bubbleFrame[e]={};let bubble=[];document.write("<div id= wave> </div>");const div_wave=document.getElementById("wave");defaultSet(div_wave,screen),putXY(div_wave,0,0),translate(div_wave,Center,Bottom),div_wave.style.zIndex=0,div_wave.style.mixBlendMode="normal",setImage(div_wave,"");let wave;function bubbleDolphinMove(){}function bubbleDisplay(){}document.write("<div id= takt> </div>");const div_takt=document.getElementById("takt");defaultSet(div_takt,screen),putXY(div_takt,0,0),translate(div_takt,Center,Bottom),div_takt.style.zIndex=0,div_takt.style.mixBlendMode="normal",setImage(div_takt,"");let takt={},taktFrame={};function taktManMove(){}function taktManDisplay(){}const noteNum=7;let taktStun=0,taktChain=0,noteW=[1,"go"],note=[],noteSin=0,div_note=[],div_noteShadow=[],noteFrame=[];for(let e=0;e<noteNum;e++)document.write("<div id= note"+e+"> </div>"),div_note[e]=document.getElementById("note"+e),defaultSet(div_note[e],screen),putXY(div_note[e],0,0),translate(div_note[e],Center,Center),div_note[e].style.zIndex=0,div_note[e].style.mixBlendMode="normal",setImage(div_note[e],""),document.write("<div id= noteShadow"+e+"> </div>"),div_noteShadow[e]=document.getElementById("noteShadow"+e),defaultSet(div_noteShadow[e],screen),putXY(div_noteShadow[e],0,0),translate(div_noteShadow[e],Center,Center),div_noteShadow[e].style.zIndex=0,div_noteShadow[e].style.mixBlendMode="normal",setImage(div_noteShadow[e],""),noteFrame[e]={};function darkAceroMove(){}function darkAceroArt(){}let darkAceroAttack=0;function darkAceroBasicDisplay(){}let beforeWarp={},afterWarp={},warpGet={},wT;function getNearestDirection(e,t){let a=Math.atan2(t,e);a<0&&(a+=2*Math.PI);var n=Math.PI/8,i=5*n/9;let s=0,r=2*Math.PI;for(let t=0;t<8;t++){var l=t*Math.PI/4,o=Math.abs(a-l);let e;(o=Math.min(o,2*Math.PI-o))<=(e=t%2==0?n:i)&&o<r&&(r=o,s=l)}return s}function bootMove(){boss.HP<=0&&"clear"!=boss.pattern&&(boss.pattern="clear",boss.time=0),"clear"==boss.pattern&&0==boss.invincible?(boss.height+=2,100<boss.height&&(boss.height=100),450<boss.y?(boss.y-=3,boss.y<=450&&(boss.y=450)):boss.y<450&&(boss.y+=3,450<=boss.y)&&(boss.y=450),720<boss.x?(boss.x-=3,boss.x<=720&&(boss.x=720)):boss.x<720&&(boss.x+=3,720<=boss.x)&&(boss.x=720)):"walk"==boss.pattern?(boss.theta+=.03*easySpeedBoss(),boss.theta2+=.03*easySpeedBoss(),boss.theta2>=2*Math.PI&&(boss.theta=0,boss.theta2=0,boss.pattern=Math.random(),boss.pattern<=.4?(boss.time=0,boss.vy=0,boss.pattern="dash"):(bootOrbitWalkSettingArray(),boss.time=0,boss.pattern="shotWalk",boss.shift=0,boss.vx=0)),boss.x=720+300*Math.sin(boss.theta),boss.y=400+200*Math.sin(2*boss.theta)):"dash"==boss.pattern||"dash2"==boss.pattern?(boss.time++,50<=boss.time&&(50==boss.time&&(soundName[8]="se/darkAceroHover"),boss.y+=boss.vy*easySpeedBoss(),boss.vy+=.3),1200<=boss.y&&"dash"==boss.pattern&&(boss.y=-10,boss.pattern="dash2"),400<=boss.y&&"dash2"==boss.pattern&&(boss.y=400,boss.time=0,boss.pattern="stopWalk")):"stopWalk"==boss.pattern||"stopWalk"==boss.pattern?(boss.time++,20<=boss.time&&(boss.time=0,boss.theta=Math.PI*Math.floor(2*Math.random()),boss.theta2=0,boss.pattern="walk")):"shotWalk"==boss.pattern?(50==boss.time&&(boss.pattern="shot",boss.time=0),boss.x+=boss.vx,boss.vx<0&&boss.x<=xI_x(bootOrbitWalkX(boss.shift))&&(boss.x=xI_x(bootOrbitWalkX(boss.shift)),boss.pattern="shot",boss.time=0),0<boss.vx&&boss.x>=xI_x(bootOrbitWalkX(boss.shift))&&(boss.x=xI_x(bootOrbitWalkX(boss.shift)),boss.pattern="shot",boss.time=0),boss.time++):"shot"==boss.pattern&&(1==boss.time&&(bootShot[boss.shift%bootShotMax].m=1),20<=boss.time&&(boss.time=55,boss.pattern="shotWalk",boss.shift++,boss.shift>=bootShotArray.length?(boss.time=0,boss.pattern="stopWalk"):(Vector2(boss.x,boss.y,xI_x(bootOrbitWalkX(boss.shift)),400),boss.vx=lastVec.x/10)),boss.time++),animeFrame(bossFrame,13,4),bootShotMove()}function bootOrbitWalkSettingArray(){var e=Math.floor(5*Math.random());bootShotArray=0==e?[8,7,9,6,10,5,11,4,12,3,13,4,12,5,11,6,10,7,9,8]:1==e?[8,7,6,5,4,3,4,5,6,7,8,9,10,11,12,13,12,11,10,9,8]:2==e?[8,9,10,11,12,13,12,11,10,9,8,7,6,5,4,3,4,5,6,7,8]:3==e?[8,3,5,4,6,5,7,6,8,7,9,8,10,9,11,10,12,11,13,11,12,10,11,9,10,8,9,7,8,6,7,5,6,4,5,3,5,4,6,5,7,6,8]:[8,13,11,12,10,11,9,10,8,9,7,8,6,7,5,6,4,5,3,5,4,6,5,7,6,8,7,9,8,10,9,11,10,12,11,13,11,12,10,11,9,10,8]}function bootOrbitWalkX(e){return bootShotArray[e]}let bootShotArray=[8,7,9,6,10,5,11,4,12,3,13,4,12,5,11,6,10,7,9,8];const bootShotMax=8;let bootShot=[],bootShotSprite=[],div_bootShot=[],div_bootShotShadow=[];for(let e=0;e<bootShotMax;e++)document.write("<div id= bootShot"+e+"> </div>"),div_bootShot[e]=document.getElementById("bootShot"+e),defaultSet(div_bootShot[e],screen),putXY(div_bootShot[e],100,100*e),translate(div_bootShot[e],Center,Center),div_bootShot[e].style.zIndex=0,div_bootShot[e].style.mixBlendMode="normal",setImage(div_bootShot[e],""),bootShotSprite[e]={};for(let e=0;e<bootShotMax;e++)document.write("<div id= bootShotShadow"+e+"> </div>"),div_bootShotShadow[e]=document.getElementById("bootShotShadow"+e),defaultSet(div_bootShotShadow[e],screen),putXY(div_bootShotShadow[e],100,100*e),translate(div_bootShotShadow[e],Center,Center),div_bootShotShadow[e].style.zIndex=-5,div_bootShotShadow[e].style.mixBlendMode="normal",setImage(div_bootShotShadow[e],"");function bootShotMove(){for(let t=0;t<bootShotMax;t++){if(1==bootShot[t].m&&(bootShot[t].x=boss.x,bootShot[t].y=boss.y,bootShot[t].m=2,0==bs)&&(soundName[8]="se/bootShot"),2==bootShot[t].m){bootShot[t].y+=18*easySpeedBoss(),putXY(div_bootShotShadow[t],bootShot[t].x,bootShot[t].y),putXY(div_bootShot[t],bootShot[t].x,bootShot[t].y),div_bootShot[t].style.zIndex=Math.floor(10*bootShot[t].y)-5,animeFrame(bootShotSprite[t],4,2),setImage(div_bootShot[t],"image/boss/bootShot"+bootShotSprite[t].p+".png"),setImage(div_bootShotShadow[t],"image/boss/noteShadow.png");for(let e=1;e<=2;e++)hitBody(e,bootShot[t],40)&&0!=player[e].pad&&playerHitOK_State(e)&&playerDamage(e);1e3<bootShot[t].y&&(bootShot[t].m=0)}0==bootShot[t].m&&(Remove(div_bootShot[t]),Remove(div_bootShotShadow[t]))}}function bootBset(){}function bootBMove(){}let bootShotWhich;function bootBshotFunc(){}function bootB_Walk(){}function bossCenterGo(){}let div_bossBlast=[];for(let e=0;e<4;e++)document.write("<div id= bossBlast"+e+"> </div>"),div_bossBlast[e]=document.getElementById("bossBlast"+e),defaultSet(div_bossBlast[e],screen),putXY(div_bossBlast[e],100,100*e),translate(div_bossBlast[e],Center,Center),div_bossBlast[e].style.zIndex=0,div_bossBlast[e].style.mixBlendMode="normal",setImage(div_bossBlast[e],"");let bossBlast=[],bossBlastCount=0,bossBlastSprite=[];function bossBlastSetUp(){for(let e=0;e<4;e++)bossBlast[e]={x:0,y:0,m:0},bossBlastSprite[e]={p:0,k:0},defaultSet(div_bossBlast[e],div_boss);bossBlastCount=0}function bossBlastDisplayBasic(){for(let e=0;e<4;e++)defaultSet(div_bossBlast[e],div_boss)}function bossBlastDisplay(){if(0==boss.HP&&(boss.destroy<=180||"bootOrbitB"==boss.name)&&0==boss.invincible&&bossBlastCount++,20<=bossBlastCount&&"darkAcero"!=boss.name)for(let e=bossBlastCount=0;e<4;e++)if(0==bossBlast[e].m){bossBlast[e].m=1;break}for(let e=0;e<4;e++)1==bossBlast[e].m&&(soundName[7]="se/bossBlast",bossBlast[e].m=2,bossBlast[e].x=Math.floor(80*Math.random())+10+"%",bossBlast[e].y=Math.floor(80*Math.random())+10+"%",frameReset(bossBlastSprite[e])),2==bossBlast[e].m&&(bossBlastSprite[e].k++,6<=bossBlastSprite[e].k&&(bossBlastSprite[e].k=0,bossBlastSprite[e].p++),2<bossBlastSprite[e].p?bossBlast[e].m=0:(putXY(div_bossBlast[e],bossBlast[e].x,bossBlast[e].y),div_bossBlast[e].style.zIndex=Math.floor(10*boss.y)-3,setImage(div_bossBlast[e],"image/boss/bossBlast"+bossBlastSprite[e].p+".png"))),0==bossBlast[e].m&&Remove(div_bossBlast[e])}let backUpStatus={},playerPadBackUp=[],challenge=0,energyCard=[0,0,0],energyCardMax=[NaN,0,0,0,0],eCR=[],eCR2=[],eCRD=[],div_energyCard=[];for(let e=0;e<3;e++)document.write("<div id= energyCard"+e+"> </div>"),div_energyCard[e]=document.getElementById("energyCard"+e),defaultSet(div_energyCard[e],screen),putXY(div_energyCard[e],1240+80*e,900),transform(div_energyCard[e],Center,Center,0,2),div_energyCard[e].style.zIndex=1e5,div_energyCard[e].style.imageRendering="pixelated",div_energyCard[e].style.mixBlendMode="normal",setImage(div_energyCard[e],"");document.write("<div id= energyCardResult> </div>");const div_energyCardResult=document.getElementById("energyCardResult"),div_energyCardResult2=(defaultSet(div_energyCardResult,screen),putXY(div_energyCardResult,"50%","50%"),translate(div_energyCardResult,Center,Center),fontSet(div_energyCardResult,"#FFFFFF","Higashi","50","bold","center"),textEdge(div_energyCardResult,"3","#000000"),div_energyCardResult.style.zIndex=1e5,setText(div_energyCardResult,""),document.write("<div id= energyCardResult2> </div>"),document.getElementById("energyCardResult2")),div_energyCardResult3=(defaultSet(div_energyCardResult2,screen),putXY(div_energyCardResult2,"50%","50%"),translate(div_energyCardResult2,Center,Center),fontSet(div_energyCardResult2,"#FFFFFF","Higashi","40","bold","left"),textEdge(div_energyCardResult2,"3","#000000"),div_energyCardResult2.style.zIndex=1e5,setText(div_energyCardResult2,""),document.write("<div id= energyCardResult3> </div>"),document.getElementById("energyCardResult3"));defaultSet(div_energyCardResult3,screen),putXY(div_energyCardResult3,"50%","50%"),translate(div_energyCardResult3,Center,Center),fontSet(div_energyCardResult3,"#FFFFFF","Higashi","35","bold","left"),textEdge(div_energyCardResult3,"2","#000000"),div_energyCardResult3.style.zIndex=1e5,setText(div_energyCardResult3,"");let energyCardResultY=0,energyCardVoice=0;function setChallengeBattle(){}function finishChallengeBattle(){}function energyCardSound(){}function energyCardLostSound(){}function displayEnergyCard(){}function energyCardCount(){let t=0;for(let e=0;e<3;e++)1==energyCard[e]&&t++;return t}document.write("<div id= goal> </div>");const div_goal=document.getElementById("goal");defaultSet(div_goal,screen),putXY(div_goal,0,0),translate(div_goal,Center,Center),div_goal.style.zIndex=-3,div_goal.style.mixBlendMode="normal",setImage(div_goal,"");let goal={x:0,y:0,xI:0,yI:0,m:0,height:0},goalSprite={p:0,k:0};document.write("<div id= goalText> </div>");const div_goalText=document.getElementById("goalText");defaultSet(div_goalText,screen),putXY(div_goalText,0,0),translate(div_goalText,Center,Center),fontSet(div_goalText,"#FFFFFF","Higashi","30","bold","right"),textEdge(div_goalText,"2","#000000"),div_goalText.style.zIndex=99997,setText(div_goalText,"");let nextArea=[NaN,[NaN,[2,3],[1,4],[4,5],[3,5],[6,7],[8,8],[8,8],[1,2]],[NaN,[2,4,3],[1,4,3],[5,7],[1,3],[6,7],[7,8],[6,8],[1,2]],[NaN,[6,2,6,2,6,2,6,2,6,2,6,2,7,6,2,6,2,6,2],[6,3,1],[6,5,2],[8,5],[4,8],[4,2,1],[8,8],[1,2]],[NaN,[2,2,3],[1,3],[4,5],[7,6,5,1],[6,8],[7,8],[5,8],[1,2]],[NaN,[2,2],[3,3],[4,5],[6,7],[6,7],[8,8],[8,8],[1,2]]],cMC;function goalDisplay(){if(0!=enemySum()&&(goal.m=0),stageClear()&&0==goal.m&&(goal.m=1,goal.x=xI_x(goal.xI),goal.y=yI_y(goal.yI),frameReset(goalSprite),soundName[12]="se/goal"),1==goal.m&&(goalSprite.k++,6<=goalSprite.k&&(goalSprite.p++,goalSprite.k=0),14<=goalSprite.p)&&(frameReset(goalSprite),goal.m=2),2==goal.m){animeFrame(goalSprite,6,3);for(let e=1;e<=2;e++)hitBody(e,goal,40)&&0!=player[e].pad&&"A"==player[e].state&&(player[e].state="clear",soundName[14]="pause",clear=1,stageGoTo++,lightLocationReset(e),weaponBreak(e),pause=2,player[e].x=xI_x(goal.xI),player[e].y=yI_y(goal.yI),player[e].xI=x_xI(player[e].x),player[e].yI=y_yI(player[e].y));if(1<=clear){for(let e=1;e<=2;e++)0==player[e].pad||"A"!=player[e].state&&"stun"!=player[e].state&&"stunInvincible"!=player[e].state&&"stagger"!=player[e].state&&"stagger2"!=player[e].state||(player[e].state="clear",weaponBreak(e));140<=++clear&&0==challenge?nextScene=3<=stageGoTo?"info":"start":1==challenge&&anyoneConfirm()&&(nextScene="stageSelect",soundName[1]="se/confirm")}}cMC=nextArea[stage.s][stage.a].length,1<=goal.m&&0==boss.stage&&(timeStop=0,putXY(div_goalText,goal.x,goal.y+60),0==clear&&0==ktime&&0==timeStop?Remove(div_goalText):1==historyMap[stage.s][nextArea[stage.s][stage.a][time%cMC]]?setText(div_goalText,"NEXT "+stage.s+"-"+nextArea[stage.s][stage.a][time%cMC]):setText(div_goalText,"NEXT "+stage.s+"-?")),putXY(div_goal,goal.x,goal.y),0==goal.m?Remove(div_goal):1==goal.m?setImage(div_goal,"image/goalAp"+goalSprite.p+".png"):2==goal.m&&(boss.stage?setImage(div_goal,"image/Agoal"+goalSprite.p+".png"):1==clearMap[stage.s][nextArea[stage.s][stage.a][time%cMC]]||.8==clearMap[stage.s][nextArea[stage.s][stage.a][time%cMC]]&&easyLevelCheck()?setImage(div_goal,"image/Bgoal"+goalSprite.p+".png"):setImage(div_goal,"image/Cgoal"+goalSprite.p+".png")),200==bs&&1<=clear&&(1==challenge?finishChallengeBattle():(easyLevelCheck()&&1!=clearMap[stage.s][stage.a]?clearMap[stage.s][stage.a]=.8:clearMap[stage.s][stage.a]=1,0==boss.stage?(0==clearMap[stage.s][nextArea[stage.s][stage.a][time%cMC]]&&(clearMap[stage.s][nextArea[stage.s][stage.a][time%cMC]]=.5),stage.a=nextArea[stage.s][stage.a][time%cMC]):0==cheat.bossRush?(0==clearMap[stage.s+1][1]&&(clearMap[stage.s+1][1]=.5),stage.s++,stage.a=1):(stage.s++,stage.a=8)),saveFile(fileNumber))}function stageClear(){return 0==battle&&(0==enemySum()&&0==boss.stage||400==boss.destroy&&boss.stage)&&(5!=stage.s||8!=stage.a)}let select=[],div_selectText=[],div_selectTextAns=[],selectNum=0,selectScene=0;for(let e=0;e<20;e++)select[e]={txt:"",x:0,y:0},document.write("<div id= selectText"+e+"> </div>"),div_selectText[e]=document.getElementById("selectText"+e),defaultSet(div_selectText[e],screen),putXY(div_selectText[e],200,100*e),translate(div_selectText[e],Left,Center),fontSet(div_selectText[e],"#FFFFFF","Higashi","50","bold","right"),textEdge(div_selectText[e],"3","#000000"),div_selectText[e].style.zIndex=1e9,setText(div_selectText[e],""),document.write("<div id= selectTextAns"+e+"> </div>"),div_selectTextAns[e]=document.getElementById("selectTextAns"+e),defaultSet(div_selectTextAns[e],screen),putXY(div_selectTextAns[e],200,100*e),translate(div_selectTextAns[e],Right,Center),fontSet(div_selectTextAns[e],"#FFFFFF","Higashi","50","bold","right"),textEdge(div_selectTextAns[e],"3","#000000"),div_selectTextAns[e].style.zIndex=1e9,setText(div_selectTextAns[e],"");function selectTextReset(){for(let e=0;e<20;e++)fontSet(div_selectText[e],"#FFFFFF","Higashi","50","bold","right"),textEdge(div_selectText[e],"3","#000000"),fontSet(div_selectTextAns[e],"#FFFFFF","Higashi","50","bold","right"),textEdge(div_selectTextAns[e],"3","#000000")}function selectTextRemove(){Remove(div_cursor);for(let e=0;e<20;e++)Remove(div_selectText[e]),Remove(div_selectTextAns[e])}document.write("<div id= cursor> </div>");const div_cursor=document.getElementById("cursor");function selectScreenUD(e,t,a){0===bs&&(dm[1]||dm[2]?(soundName[0]="se/select",selectNum++,titleCountMinus()):(um[1]||um[2])&&(soundName[0]="se/select",selectNum--,titleCountMinus())),selectNum<0?selectNum=e-1:selectNum>e-1&&(selectNum=0),selectScreenUD2(e,e,t,a)}function selectScreenUD_Silent(e,t,a){0===bs&&(dm[1]||dm[2]?(selectNum++,titleCountMinus()):(um[1]||um[2])&&(selectNum--,titleCountMinus())),selectNum<0?selectNum=e-1:selectNum>e-1&&(selectNum=0),selectScreenUD2(e,e,t,a)}function selectScreenLR(e,t,a){0===bs&&(rm[1]||rm[2]?(soundName[0]="se/select",selectNum++):(lm[1]||lm[2])&&(soundName[0]="se/select",selectNum--)),selectNum<0?selectNum=e-1:selectNum>e-1&&(selectNum=0),selectScreenLR2(e,e,t,a)}function selectScreenUD_MaxDetail(e,t,a,n){0===bs&&(dm[1]||dm[2]?(soundName[0]="se/select",selectNum++,titleCountMinus()):(um[1]||um[2])&&(soundName[0]="se/select",selectNum--,titleCountMinus())),selectNum<0?selectNum=e-1:selectNum>e-1&&(selectNum=0),selectScreenUD2(e,t,a,n)}function selectScreenUD2(e,t,a,n){putXY(div_cursor,select[selectNum].x-n,select[selectNum].y),setImage(div_cursor,"sys/"+a+".png"),translate(div_cursor,Right,Center);for(let e=0;e<20;e++)translate(div_selectText[e],Left,Center),e<t?(putXY(div_selectText[e],select[e].x,select[e].y),setText(div_selectText[e],select[e].txt)):(Remove(div_selectText[e]),Remove(div_selectTextAns[e]))}function selectScreenLR2(e,t,a,n){putXY(div_cursor,select[selectNum].x,select[selectNum].y-n),setImage(div_cursor,"sys/"+a+".png"),translate(div_cursor,Center,Bottom);for(let e=0;e<20;e++)translate(div_selectText[e],Center,Top),e<t?(putXY(div_selectText[e],select[e].x,select[e].y),setText(div_selectText[e],select[e].txt)):(Remove(div_selectText[e]),Remove(div_selectTextAns[e]))}function ans_l_Set(){return 0===bs&&(lm_1t[1]||lm_1t[2])}function ans_r_Set(){return 0===bs&&(rm_1t[1]||rm_1t[2])}function selectAnsLocation(e,t){putXY(div_selectTextAns[e],t,select[e].y)}defaultSet(div_cursor,screen),putXY(div_cursor,0,0),translate(div_cursor,Right,Center),div_cursor.style.zIndex=1e9,div_cursor.style.mixBlendMode="normal",setImage(div_cursor,""),document.write("<div id= startNavi> </div>");const div_startNavi=document.getElementById("startNavi");defaultSet(div_startNavi,screen),putXY(div_startNavi,"50%","88%"),translate(div_startNavi,Center,Center),fontSet(div_startNavi,"#FFFFFF","Higashi","28","bold","center"),textEdge(div_startNavi,"2","#000000"),div_startNavi.style.zIndex=1e5,setText(div_startNavi,"");let naviNumber=0;function navi(){startNaviMessageSet(),1==naviOption&&(1==stage.s&&1==stage.a&&0==battle?naviNumber=0:1==stage.s&&2==stage.a&&0==battle?naviNumber=1:4==stage.s&&1==stage.a&&0==battle?naviNumber=21:naviSet(),putXY(div_startNavi,"50%","80%"),setText(div_startNavi,startNaviMessage[naviNumber]))}let startNaviMessage;function startNaviMessageSet(){startNaviMessage=[wasd(0)+"で"+Rb("移動","いどう")+"し、"+aButton(0)+"でブーメランが"+Rb("投","な")+"げられます。<br>すべての"+Rb("敵","てき")+"を"+Rb("倒","たお")+"しましょう。","アイテムでメイプルたちをパワーアップさせましょう。<br>アイテムは"+Rb("直接","ちょくせつ")+Rb("触","さわ")+"るか、ブーメランを"+Rb("当","あ")+"てると"+Rb("獲得","かくとく")+"できます。","アイテム「スピードアップ」を"+Rb("取","と")+"ると、"+Rb("移動速度","いどうそくど")+"が"+Rb("上","あ")+"がります。","アイテム「アタックアップ」を"+Rb("取","と")+"ると、ブーメランの"+Rb("飛距離","ひきょり")+"と"+Rb("速度","そくど")+"が"+Rb("上","あ")+"がります。","","アイテム「ハート」を"+Rb("取","と")+"ると、ミスを"+Rb("一度","いちど")+"だけ"+Rb("防","ふせ")+"ぐことができます。<br>ただし、"+Rb("時間","じかん")+Rb("切","ぎ")+"れなど"+Rb("防","ふせ")+"げないミスもあります。","アイテム「ビッグウェポン」を"+Rb("取","と")+"ると、ブーメランが"+Rb("大","おお")+"きくなって"+Rb("敵","てき")+"を"+Rb("攻撃","こうげき")+"しやすくなります。","","アイテム「ハイスピード」を"+Rb("取","と")+"ると、"+Rb("移動速度","いどうそくど")+"が"+Rb("大","おお")+"きく"+Rb("上昇","じょうしょう")+"します。","アイテム「ストップウォッチ」を"+Rb("取","と")+"ると、"+Rb("制限時間","せいげんじかん")+"がしばらく"+Rb("止","と")+"まります。<br>また、"+Rb("近","ちか")+"くの"+Rb("敵","てき")+"がしばらく"+Rb("遅","おそ")+"くなります。","アイテム「"+Rb("無敵","むてき")+"」を"+Rb("取","と")+"ると、"+Rb("一定時間","いっていじかん")+Rb("敵","てき")+"からの"+Rb("攻撃","こうげき")+"を"+Rb("無効化","むこうか")+"します。",Rb("要","い")+"らないアイテムに"+Rb("触","ふ")+"れるときには、"+xButton(0)+"か"+rButton(0)+"を"+Rb("押","お")+"しつづけてアイテムブロックしましょう。","ブーメランが"+Rb("変化","へんか")+"する"+Rb("特殊","とくしゅ")+"アイテムを"+Rb("取","と")+"った"+Rb("場合","ばあい")+"でも、"+yButton(0)+"で"+Rb("通常","つうじょう")+"のブーメランが"+Rb("投","な")+"げられます。",Rb("残","のこ")+"り"+Rb("数","すう")+"が0の"+Rb("状態","じょうたい")+"でステージをクリアすると、"+Rb("自動的","じどうてき")+"に1UPします。","","",Rb("敵","てき")+"をすべて"+Rb("倒","たお")+"した"+Rb("後","あと")+"は、ステージに"+Rb("潜","ひそ")+"むアイテムがすべて"+Rb("現","あらわ")+"れます。<br>"+Rb("忘","わす")+"れずに"+Rb("確認","かくにん")+"しましょう。",""+Rb("画面","がめん")+Rb("上部","じょうぶ")+"の「"+Rb("ENEMY","エネミー")+"」は、ステージにいる"+Rb("敵","てき")+"の"+Rb("割合","わりあい")+"を"+Rb("表示","ひょうじ")+"しています。","プレイヤーがハートを"+Rb("持","も")+"っているかどうかは、"+Rb("画面","がめん")+Rb("上部","じょうぶ")+"のアイコンから"+Rb("確認","かくにん")+"できます。","","","","",Rb("黄色","きいろ")+"のゴールは、まだ"+Rb("行","い")+"ったことのないステージへ"+Rb("移動","いどう")+"できます。<br>また、ゴールの"+Rb("行","い")+"き"+Rb("先","さき")+"は1"+Rb("秒","びょう")+"ごとに"+Rb("変化","へんか")+"します。"]}function naviSet(){for(;;)if(0!=(naviNumber=Math.floor(Math.random()*startNaviMessage.length))&&1!=naviNumber&&21!=naviNumber&&!(2==naviNumber&&(0==itemCheck(0)||Math.random()<.6)||3==naviNumber&&(0==itemCheck(1)||Math.random()<.6)||4==naviNumber&&0==itemCheck(2)||5==naviNumber&&0==itemCheck(3)||6==naviNumber&&0==itemCheck(5)||7==naviNumber&&0==itemCheck(6)||8==naviNumber&&0==itemCheck(7)||9==naviNumber&&0==itemCheck(8)||10==naviNumber&&0==itemCheck(9)||13==naviNumber&&0<stock&&1==battle||14==naviNumber&&"Water"!=skin||15==naviNumber&&1!=challenge||16==naviNumber&&(boss.stage||1==battle)||17==naviNumber&&(boss.stage||1==battle)||19==naviNumber&&0==itemCheck(10)||20==naviNumber&&0==battle||22==naviNumber&&0==battle||23==naviNumber&&(boss.stage||1==battle)))break}function itemCheck(t){let a;for(let e=0;e<21;e++){if(0==item[e].m&&item[e].type==t){a=!0;break}a=!1}return a}let gimmick=[],gimmickSprite=[];const gimmickMax=55;let div_gimmick=[];for(let e=0;e<gimmickMax;e++)gimmick[e]={m:0,type:0,x:0,y:0,xI:0,yI:0,height:0,time:0},gimmickSprite[e]={p:0,k:0},document.write("<div id= gimmick"+e+"> </div>"),div_gimmick[e]=document.getElementById("gimmick"+e),defaultSet(div_gimmick[e],screen),putXY(div_gimmick[e],100,100*e),translate(div_gimmick[e],Center,Center),div_gimmick[e].style.zIndex=-2,div_gimmick[e].style.mixBlendMode="normal",setImage(div_gimmick[e],"");function gimmickRemove(){for(let e=0;e<gimmickMax;e++)gimmick[e]={m:0,type:0,x:0,y:0,xI:0,yI:0,height:0,time:0,ele:1},gimmickSprite[e]={p:0,k:0},div_gimmick[e].style.opacity=1}function gimmickSet(e,t,a,n){}let beam=1;function gimmickSetBeam(e,t,a,n,i){}function gimmickMove(){}function beamSwitch(e){}function gimmickBeamHit(e,t){}const canvas=document.createElement("canvas"),ctx=(canvas.style.position="absolute",canvas.style.zIndex=99998,putXY(canvas,"50%","50%"),translate(canvas,Center,Center),canvas.width=1440,canvas.height=960,canvas.getContext("2d"));let blackDraw=!1;function drawBlack(){blackDraw||(ctx.fillStyle="black",ctx.fillRect(0,0,canvas.width,canvas.height),screen.appendChild(canvas),blackDraw=!0)}function clearBlack(){blackDraw&&(screen.removeChild(canvas),blackDraw=!1)}let lightGimmick=1,light=[];function lightLocationReset(e){light[e]={x:0,y:0}}function gimmickLight(){}function lightLocationSuperSet(e,t,a){}function lightXreset(e,t){}function lightYreset(e,t){}function createCircularMask(e,t,a){}function virusRandom(){return Math.floor(6*Math.random())}function virusAwaAwa(e){0==playerStatus[e].virusType&&1<=playerStatus[e].virusTime&&("down"==udk[e]?udk[e]="up":"up"==udk[e]&&(udk[e]="down"),"left"==lrk[e]?lrk[e]="right":"right"==lrk[e]&&(lrk[e]="left"))}function virusNoroNoro(e,t){return 1==playerStatus[e].virusType&&1<=playerStatus[e].virusTime&&(t*=2/speed[playerStatus[e].speedLevel]),t}function virusKraKra(e,t){return 2==playerStatus[e].virusType&&1<=playerStatus[e].virusTime&&(e=.3*playerStatus[e].virusTime,t*=.8*Math.sin(e)+.8),t}function virusKiriKiri(e){return 3==playerStatus[e].virusType&&1<=playerStatus[e].virusTime}function virusFuwaFuwa(e){return 4==playerStatus[e].virusType&&1<=playerStatus[e].virusTime}function virusWeaponSpeed(e,t){let a=t;return virusKiriKiri(e)?a=15.2*Math.pow(1.12,-6):virusFuwaFuwa(e)&&(a=12.2),a}function virusWeaponDownSpeed(e,t){let a=t;return virusKiriKiri(e)?a=.48*Math.pow(1.12,-6):virusFuwaFuwa(e)&&(a=.48*Math.pow(1.12,-12)),a}function virusFuwaFuwaDownSpeed(e,t){wep[e][t].v-=wep[e][t].dv,wep[e][t].v<=-12.2&&(wep[e][t].v=-12.2)}function virusSukeSuke(e){return 5==playerStatus[e].virusType&&1<=playerStatus[e].virusTime}let toEnding=0,endingQuake=0;function toEndingCheck(){}let xBT={m:0,ktime:0,time:0,push:0};function battleStageAddCheat(){}function brr_C(){}let missLate=[],damageLate=[],finalMember=0,bossRushRank="";function bossRushMemberCheck(){1==cheat.bossRush&&0!=player[1].pad&&0!=player[2].pad&&2!=finalMember&&(finalMember=2)}function missLateSum(){return missLate[1]+missLate[2]}function damageLateSum(){return damageLate[1]+damageLate[2]}function sceneGame(){pushStart(),0==pause&&(timeLimit(),mapSet(),playerOBJECT(),windMove(),weaponMove(),gimmickLight(),enemies(),bossDisplay(),gimmickMove(),itemDisplay(),goalDisplay(),conveyerLightDisplay(),1==battle)&&playerLostScoreDisplay(),bossRushMemberCheck(),allPlayerMiss(),battleFinish(),displayStatus(),displayEnergyCard(),stageBlast(),toEndingCheck(),2<=pause&&20<++pause&&(pause=0,soundName[14]="bgm/clear")}document.write("<div id= blind> </div>");const div_blind=document.getElementById("blind"),div_stageText=(defaultSet(div_blind,screen),putXY(div_blind,"50%","50%"),translate(div_blind,Center,Center),div_blind.style.zIndex=99999,div_blind.style.opacity=0,div_blind.style.mixBlendMode="normal",setImage(div_blind,""),document.write("<div id= stageText> </div>"),document.getElementById("stageText")),div_stageTextB=(defaultSet(div_stageText,screen),putXY(div_stageText,720,430),translate(div_stageText,Center,Center),fontSet(div_stageText,"#FFFFFF","Higashi","65","bold","right"),textEdge(div_stageText,"4","#FF4274"),div_stageText.style.zIndex=1e5,div_stageText.style.letterSpacing="7px",setText(div_stageText,""),document.write("<div id= stageTextB> </div>"),document.getElementById("stageTextB"));defaultSet(div_stageTextB,screen),putXY(div_stageTextB,720,530),translate(div_stageTextB,Center,Center),fontSet(div_stageTextB,"#FFFFFF","Higashi","65","bold","right"),textEdge(div_stageTextB,"4","#396894"),div_stageTextB.style.zIndex=1e5,div_stageTextB.style.letterSpacing="7px",setText(div_stageTextB,"");let stageStartText=[],blindOpacity=0;function sceneStart(){if(toEnding=0,easyDisplay(),setChallengeBattle(),gimmickMove(),playerOBJECT(),weaponReset(),-100==bs){if(1==battle){for(let e=1;e<=2;e++)player[e].pad="man";for(let e=0;e<21;e++)item[e].m=0;victoryShift=0,itemTime=0}else historyMap[stage.s][stage.a]=1;div_stageText.style.opacity=1,div_stageTextB.style.opacity=1,0==player[1].pad&&0==player[2].pad&&0==battle&&(player[missPlayer].pad="man",stock--),1!=player[1].timeUp&&2!=player[2].timeUp||stock--,timeStop=0,itemSetUp(),(0==battle?enemyDesign:enemyDesignBattle)(),bossBlastSetUp(),1==challenge?time=0:1==battle?(time=battleTimeSet[battleTime],hurryBattle=0):time=1==boss.stage?"infinity":2<stage.s?240:180;for(let e=2;1<=e;e--)lightLocationReset(e),playerSetLocation(e),playerSetStart(e),playerLostScore[e]={m:0,x:0,y:0,score:0},1==battle&&(playerItemStatusReset(e),"Full"==skin)&&(playerStatus[e].speedLevel=3,playerStatus[e].weaponLevel=7),1==player[e].timeUp&&(player[e].timeUp=0,missItem(e));setImage(div_blind,"image/black.jpg"),blindOpacity=1,(hyperNavi=0)==battle?(1==cheat.bossRush?(setText(div_stageText,"BATTLE PHASE　"+stage.s),setText(div_stageTextB,"START !")):0==challenge?(setText(div_stageText,"STAGE　"+stage.s+"-"+stage.a),setText(div_stageTextB,"START !")):1==challenge&&(setText(div_stageText,"CHALLENGE BATTLE"),setText(div_stageTextB,"START !")),stageStartText[0]={x:720,y:430},stageStartText[1]={x:720,y:530}):(setText(div_stageText,"BATTLE"),setText(div_stageTextB,"START !"),stageStartText[0]={x:540,y:480},stageStartText[1]={x:900,y:480}),blast=0,blastM=0,blastQuake=0,soundName[14]="bgm/start",navi()}if(0==bs&&(100<=++shift&&0==battle&&(stageStartText[0].x-=30,stageStartText[1].x+=30),135<=shift)&&(blindOpacity-=.05)<=0){(blindOpacity=0)<clear&&0==stock&&oneUp(),clear=0;for(let e=1;e<=2;e++)"A"==player[e].state&&0!=player[e].pad&&0==playerStatus[e].life&&easyLevelCheck()&&(soundName[0]="se/itemGet",playerStatus[e].life=1);scene="game",shift=0,1==challenge?soundName[14]="bgm/challenge":1==battle?soundName[14]="bgm/battle":boss.stage&&"darkAcero"==boss.name?soundName[14]="bgm/darkAceroBattle":boss.stage&&"bootOrbit"==boss.name?soundName[14]="bgm/final":boss.stage?soundName[14]="bgm/boss":soundName[14]="bgm/bgm"+stage.s,Remove(div_stageText),Remove(div_stageTextB),Remove(div_blind),Remove(div_startNavi)}div_blind.style.opacity=blindOpacity,div_startNavi.style.opacity=blindOpacity,putXY(div_stageText,stageStartText[0].x,stageStartText[0].y),putXY(div_stageTextB,stageStartText[1].x,stageStartText[1].y),100<=shift&&1==battle&&(div_stageText.style.opacity=t%2*blindOpacity,div_stageTextB.style.opacity=t%2*blindOpacity),mapSet(),displayStatus(),conveyerLightDisplay(),windMove(),gimmickLight()}document.write("<div id= gameOver> </div>");const div_gameOver=document.getElementById("gameOver");defaultSet(div_gameOver,screen),putXY(div_gameOver,"50%","50%"),translate(div_gameOver,Center,Center),div_gameOver.style.zIndex=0,div_gameOver.style.mixBlendMode="normal",setImage(div_gameOver,"");let div_gameOverFace=[];for(let e=1;e<=2;e++)document.write("<div id= gameOverFace"+e+"> </div>"),div_gameOverFace[e]=document.getElementById("gameOverFace"+e),defaultSet(div_gameOverFace[e],screen),putXY(div_gameOverFace[e],"50%","50%"),translate(div_gameOverFace[e],Center,Center),div_gameOverFace[e].style.zIndex=1,div_gameOverFace[e].style.mixBlendMode="normal",setImage(div_gameOverFace[e],"");const gameOverMessage=[[Rb("続","つづ")+"きから"+Rb("再挑戦","さいちょうせん")+"します。","タイトル"+Rb("画面","がめん")+"に"+Rb("戻","もど")+"ります。"],[Rb("一人","ひとり")+"でプレイします。",Rb("二人","ふたり")+"でプレイします。"]];let gameOverVolume=.5;function sceneGameOver(){if(-100==bs){gameOverVolume=.5,playerFrameReset(),selectNum=0,player[1].pad=!1,player[2].pad=!1;for(let e=0;e<21;e++)item[e].m=0;for(let e=1;e<=2;e++)playerItemStatusReset(e)}0==bs&&0==shift&&sound[14].paused&&(soundName[14]="bgm/gameOver");for(let e=0;e<2;e++)select[e].x=620,select[e].y=800+60*e;0==selectScene?(select[0].txt="CONTINUE",select[1].txt="END",anyoneConfirm()&&0==selectNum&&0==shift?(selectScene++,soundName[1]="se/confirm",selectNum=0):anyoneConfirm()&&1==selectNum&&0==shift&&(soundName[1]="se/confirm",shift=-1)):1==selectScene&&(select[0].txt="1PLAYER GAME",select[1].txt="2PLAYER GAME",anyoneCancel()&&0==shift?(selectScene--,soundName[1]="se/back",selectNum=0):P1Confirm()&&0==selectNum&&0==shift?(shift=1,player[1].pad="man",player[2].pad=!1,stock=3,soundName[1]="se/confirm"):P2Confirm()&&0==selectNum&&0==shift&&(shift=1,player[1].pad=!1,player[2].pad="man",stock=3,soundName[1]="se/confirm"),anyoneConfirm())&&1==selectNum&&0==shift&&(shift=1,player[1].pad="man",player[2].pad="man",stock=3,soundName[1]="se/confirm"),0==shift&&selectScreenUD(2,"cursor",50),naviOption&&0==shift?(putXY(div_startNavi,"50%","96%"),div_startNavi.style.opacity=1,setText(div_startNavi,gameOverMessage[selectScene][selectNum])):Remove(div_startNavi),animeFrame(playerFrame[1],15,3),setImage(div_gameOver,"image/gameOverMapleCinnamon.png"),setImage(div_bg,"image/gameOver.jpg");for(let e=1;e<=2;e++)1<=shift&&0!=player[e].pad?setImage(div_gameOverFace[e],"image/gameOver"+e+"_3.png"):setImage(div_gameOverFace[e],"image/gameOver"+e+"_"+playerFrame[1].p+".png");(1<=shift||shift<=-1)&&((gameOverVolume-=.01)<=0&&(gameOverVolume=0),sound[14].volume=gameOverVolume,1<=shift?shift++:shift--,70<=shift&&(0==cheat.bossRush?nextScene="stageSelect":(nextScene="start",finalMember=1)),shift<=-70)&&(nextScene="info")}let stageSelectBackX=0,stageSelectBackOpacity=1,div_stageSelectBack=[];for(let e=0;e<2;e++)document.write("<div id= stageSelectBack"+e+"> </div>"),div_stageSelectBack[e]=document.getElementById("stageSelectBack"+e),defaultSet(div_stageSelectBack[e],screen),putXY(div_stageSelectBack[e],100,100*e),translate(div_stageSelectBack[e],Left,Top),div_stageSelectBack[e].style.zIndex=-100,div_stageSelectBack[e].style.mixBlendMode="normal",setImage(div_stageSelectBack[e],"");let Jolokia={t:0,y:0};document.write("<div id= magentaJolokia> </div>");const div_magentaJolokia=document.getElementById("magentaJolokia"),div_stageSelectBackBlind=(defaultSet(div_magentaJolokia,screen),putXY(div_magentaJolokia,"50%",384),translate(div_magentaJolokia,Center,Center),div_magentaJolokia.style.zIndex=-99,div_magentaJolokia.style.mixBlendMode="normal",div_magentaJolokia.style.filter="blur(1px)",setImage(div_magentaJolokia,""),document.write("<div id= stageSelectBackBlind> </div>"),document.getElementById("stageSelectBackBlind"));defaultSet(div_stageSelectBackBlind,screen),putXY(div_stageSelectBackBlind,"50%","50%"),translate(div_stageSelectBackBlind,Center,Center),div_stageSelectBackBlind.style.zIndex=-95,div_stageSelectBackBlind.style.mixBlendMode="normal",setImage(div_stageSelectBackBlind,"");let div_stageName=[];for(let e=0;e<2;e++)document.write("<div id= stageName"+e+"> </div>"),div_stageName[e]=document.getElementById("stageName"+e),defaultSet(div_stageName[e],screen),div_stageName[e].style.zIndex=0,setText(div_stageName[e],"");function stageSelectNameLocation(){0==selectScene?(putXY(div_stageName[0],150,30),putXY(div_stageName[1],1290,30),translate(div_stageName[0],Left,Top),translate(div_stageName[1],Right,Top)):1!=selectScene&&2!=selectScene||(putXY(div_stageName[1],150,30),putXY(div_stageName[0],1290,30),translate(div_stageName[1],Left,Top),translate(div_stageName[0],Right,Top))}fontSet(div_stageName[0],"#D8FAA7","Higashi","70","bold","right"),textEdge(div_stageName[0],"4","#2F7B16"),fontSet(div_stageName[1],"#FFBE88","Higashi","70","bold","right"),textEdge(div_stageName[1],"4","#CF4619"),document.write("<div id= stageImage> </div>");const div_stageImage=document.getElementById("stageImage"),div_challengeBG=(defaultSet(div_stageImage,screen),putXY(div_stageImage,"50%","40%"),translate(div_stageImage,Center,Center),div_stageImage.style.zIndex=-92,div_stageImage.style.mixBlendMode="normal",setImage(div_stageImage,""),document.write("<div id= challengeBG> </div>"),document.getElementById("challengeBG")),div_challengeTitle=(defaultSet(div_challengeBG,screen),putXY(div_challengeBG,"50%","50%"),translate(div_challengeBG,Center,Center),div_challengeBG.style.zIndex=1e6,div_challengeBG.style.mixBlendMode="multiply",setImage(div_challengeBG,""),document.write("<div id= challengeTitle> </div>"),document.getElementById("challengeTitle")),div_challengeInformation=(defaultSet(div_challengeTitle,screen),putXY(div_challengeTitle,"50%","32%"),translate(div_challengeTitle,Center,Center),fontSet(div_challengeTitle,"#FFFFFF","Higashi","50","bold","right"),textEdge(div_challengeTitle,"2","#000000"),div_challengeTitle.style.zIndex=1000001,setText(div_challengeTitle,""),document.write("<div id= challengeInformation> </div>"),document.getElementById("challengeInformation")),div_stageMapGuide=(defaultSet(div_challengeInformation,screen),putXY(div_challengeInformation,"50%","41%"),translate(div_challengeInformation,Center,Top),fontSet(div_challengeInformation,"#FFFFFF","Higashi","30","normal","left"),textEdge(div_challengeInformation,"2","#000000"),div_challengeInformation.style.zIndex=1000001,setText(div_challengeInformation,""),document.write("<div id= stageMapGuide> </div>"),document.getElementById("stageMapGuide")),div_mapCursor=(defaultSet(div_stageMapGuide,screen),putXY(div_stageMapGuide,"50%",950),translate(div_stageMapGuide,Center,Bottom),fontSet(div_stageMapGuide,"#ACD0F4","Higashi","40","normal","center"),textEdge(div_stageMapGuide,"3","#396894"),div_stageMapGuide.style.zIndex=1000002,setText(div_stageMapGuide,""),document.write("<div id= mapCursor> </div>"),document.getElementById("mapCursor"));defaultSet(div_mapCursor,screen),putXY(div_mapCursor,0,0),translate(div_mapCursor,Center,Bottom),div_mapCursor.style.zIndex=4,div_mapCursor.style.mixBlendMode="normal",setImage(div_mapCursor,"");let div_areaSelect=[];for(let e=1;e<=8;e++)document.write("<div id= areaSelect"+e+"> </div>"),div_areaSelect[e]=document.getElementById("areaSelect"+e),defaultSet(div_areaSelect[e],screen),putXY(div_areaSelect[e],720+170*(e-4.5),770),translate(div_areaSelect[e],Center,Center),div_areaSelect[e].style.zIndex=0,div_areaSelect[e].style.mixBlendMode="normal",setImage(div_areaSelect[e],"");document.write("<div id= energyCardDisplay> </div>");const div_energyCardDisplay=document.getElementById("energyCardDisplay"),div_energyCardNumber=(defaultSet(div_energyCardDisplay,screen),putXY(div_energyCardDisplay,10,930),transform(div_energyCardDisplay,Left,Bottom,0,2),div_energyCardDisplay.style.zIndex=1000003,div_energyCardDisplay.style.transformOrigin="center bottom",div_energyCardDisplay.style.mixBlendMode="normal",div_energyCardDisplay.style.imageRendering="pixelated",setImage(div_energyCardDisplay,""),document.write("<div id= energyCardNumber> </div>"),document.getElementById("energyCardNumber")),stageName=(defaultSet(div_energyCardNumber,screen),putXY(div_energyCardNumber,70,930),translate(div_energyCardNumber,Left,Bottom),fontSet(div_energyCardNumber,"#FFFFFF","Higashi","50","bold","right"),textEdge(div_energyCardNumber,"3","#000000"),div_energyCardNumber.style.zIndex=1000003,setText(div_energyCardNumber,""),[NaN,"センタープリズン","アクアタンク","ミューズガーデン","メトロコンベアー","ターミナルフロア"]),stageMapLocation=[NaN,{x:960,y:260},{x:1220,y:460},{x:760,y:480},{x:330,y:400},{x:510,y:260}];function sceneStageSelect(){if(easyDisplay(),-100==bs){Jolokia={t:0,y:0},challenge=0,stageSelectBackX=0;for(let e=stageSelectBackOpacity=1;e<=2;e++)player[e].state="A",player[e].walk=0,player[e].vec="down",playerFrameReset(e);soundName[14]="bgm/stageSelect"}if(0==bs)if(0==selectScene)dm[1]||dm[2]?(1==stage.s?stage.s++:5==stage.s&&stage.s--,soundName[0]="se/select"):um[1]||um[2]?(2==stage.s?stage.s--:4==stage.s&&stage.s++,soundName[0]="se/select"):lm[1]||lm[2]?(2!=stage.s&&3!=stage.s||stage.s++,soundName[0]="se/select"):(rm[1]||rm[2])&&(3!=stage.s&&4!=stage.s||stage.s--,soundName[0]="se/select"),anyoneConfirm()?(selectScene++,soundName[1]="se/confirm",soundName[14]="bgm/areaSelect"):anyoneCancel()&&(selectScene=-1,selectNum=1,soundName[1]="se/back");else if(1==selectScene)(rm[1]||rm[2])&&(stage.a++,soundName[0]="se/select"),(lm[1]||lm[2])&&(stage.a--,soundName[0]="se/select"),anyoneCancel()?(selectScene--,soundName[1]="se/back",soundName[14]="bgm/stageSelect"):anyoneConfirm()&&(soundName[1]="se/confirm",0!=clearMap[stage.s][stage.a])&&(nextScene="start");else if(2==selectScene)anyoneCancel()?(selectScene--,soundName[1]="se/back"):anyoneConfirm()&&(soundName[1]="se/confirm",challenge=1,0!=clearMap[stage.s][stage.a])&&(nextScene="start");else if(-1==selectScene){for(let e=0;e<2;e++)fontSet(div_selectText[e],"green","Higashi","55","bold","right"),textEdge(div_selectText[e],"4","green"),select[e].x=570,select[e].y=600+65*e;select[0].txt="ゲームをやめる",select[1].txt="まだ　つづける！",selectScreenUD(2,"cursor",30),anyoneCancel()?(selectScene++,soundName[1]="se/back",selectTextRemove()):anyoneConfirm()&&(soundName[1]="se/confirm",1==selectNum?(selectScene++,selectTextRemove()):(nextScene="info",soundName[14]="pause",ct=140))}else-2==selectScene&&(fontSet(div_selectText[0],"green","Higashi","55","bold","right"),textEdge(div_selectText[0],"4","green"),fontSet(div_selectTextAns[0],"green","Higashi","55","bold","right"),textEdge(div_selectTextAns[0],"4","green"),select[0].x=320,select[0].y=730,selectAnsLocation(0,1050),1==easyLevel?(ans_l_Set()&&(soundName[0]="se/select",easyLevel=0),fontColorSet(div_selectTextAns[0],"blue"),textEdge(div_selectTextAns[0],"4","blue")):(ans_r_Set()&&(soundName[0]="se/select",easyLevel=1),fontColorSet(div_selectTextAns[0],"green"),textEdge(div_selectTextAns[0],"4","green")),setText(div_selectTextAns[0],levelText[easyLevel]),selectScreenUD(1,"cursor",30),anyoneConfirm()||anyoneCancel())&&(selectTextRemove(),selectScene=0,soundName[1]="se/confirm");for(let e=1;e<=4;e++)if(1!=clearMap[e][8]&&.8!=clearMap[e][8]&&stage.s>e){stage.s=e;break}5<stage.s&&(stage.s=5),stage.s<1&&(stage.s=1),8<stage.a&&(stage.a=8),stage.a<1&&(stage.a=1);for(let e=1;e<=2;e++)0!=player[e].pad&&(player1and2()?player[e].x=stageMapLocation[stage.s].x+100*(e-1.5):player[e].x=stageMapLocation[stage.s].x,player[e].y=stageMapLocation[stage.s].y);if(playerOBJECT(),stageSelectBackX=(stageSelectBackX+8)%1400,stageSelectNameLocation(),setText(div_stageName[1],stageName[stage.s]),0==selectScene){setText(div_stageMapGuide,wasd(0)+"でステージを"+Rb("選","えら")+"んでください<br>"+Rb("体験版","たいけんばん")+"では、ステージを3つクリアするまで"+Rb("遊","あそ")+"べます"),setText(div_stageName[0],"ステージ"+stage.s);for(let e=1;e<=8;e++)Remove(div_areaSelect[e]);Remove(div_mapCursor)}else if(1==selectScene||2==selectScene){2==selectScene?setText(div_stageMapGuide,aButton(0)+"でスタート　"+bButton(0)+"でキャンセル"):setText(div_stageMapGuide,wasd(0)+"でエリアを"+Rb("選","えら")+"んでください"),setText(div_stageName[0],"エリア"+stage.a);for(let e=1;e<=8;e++)setImage(div_areaSelect[e],"image/areaSelect"+clearMap[stage.s][e]+".png");putXY(div_mapCursor,720+170*(stage.a-4.5),740+5*Math.sin(.1*t)),setImage(div_mapCursor,"image/areaSelectCursor.png")}else setText(div_stageMapGuide,wasd(0)+"で"+Rb("選","えら")+"んでください");selectScene<=0?stageSelectBackOpacity+=.1:stageSelectBackOpacity-=.1,2==selectScene?putXY(div_challengeInformation,"50%","41%"):-1==selectScene?(putXY(div_challengeInformation,"50%","41%"),setImage(div_challengeBG,"image/stageSelectChallengeBG.png"),setText(div_challengeInformation,"ゲームをやめますか？"),setText(div_challengeTitle,"ゲームの"+Rb("終了","しゅうりょう"))):-2!=selectScene&&(Remove(div_challengeBG),Remove(div_challengeInformation),Remove(div_challengeTitle)),1!=selectScene&&2!=selectScene||1!=clearMap[stage.s][8]&&.8!=clearMap[stage.s][8]||5==stage.s?(Remove(div_energyCardDisplay),Remove(div_energyCardNumber)):(setImage(div_energyCardDisplay,"image/energyCard.png"),setText(div_energyCardNumber,"×"+energyCardMax[stage.s])),(stageSelectBackOpacity=1<=stageSelectBackOpacity?1:stageSelectBackOpacity)<=0&&(stageSelectBackOpacity=0),div_stageSelectBackBlind.style.opacity=1-stageSelectBackOpacity,Jolokia.t++,Jolokia.y=10*Math.sin(.03*Jolokia.t),putXY(div_magentaJolokia,"50%",384+Jolokia.y),setImage(div_magentaJolokia,"image/magentaJolokia.png"),setImage(div_stageSelectBackBlind,"image/blackMap.jpg"),setImage(div_stageImage,"image/stageSelectMap.png");for(let e=0;e<2;e++)putXY(div_stageSelectBack[e],stageSelectBackX-1400*e,0),setImage(div_stageSelectBack[e],"image/stageSelect.jpg")}const levelText=["ノーマル","カジュアル"],titleMessage=["メインモードです。"+Rb("全","ぜん")+"ステージクリアを"+Rb("目","め")+Rb("指","ざ")+"せ！（1～2人）","スコアを"+Rb("競","きそ")+"って"+Rb("対戦","たいせん")+"！（2人）","パスワード"+Rb("入力","にゅうりょく")+"や"+Rb("各種設定","かくしゅせってい")+"ができます。"];function sceneTitle(){(0==shift&&0==titlePhase||-100==bs)&&(titleCount=0,titleCountMax=900+Math.floor(300*Math.random()),soundName[14]="bgm/title",0==titlePhase&&(titlePhase=1),frameReset(pushStartFrame),logo={x:"50%",y:-432},title={x:1440,y:930},theaterElementReset(),theaterFrameReset(),selectNum=0,theaterElementReset(),theaterFrameReset()),1==titlePhase&&(title.x-=30,title.x<=0)&&(title.x=0,titlePhase=2),2<=titlePhase&&titlePhase<150&&30<=++titlePhase&&(titlePhase=30,logo.y+=13,0<=logo.y)&&(titlePhase=200),titleCount++,200==titlePhase&&(logo.x="50%",logo.y=0,(title.x=0)===bs&&(selectTitle(),setText(div_copyRight,""),setText(div_copyRight,"©2024　"+copyRight)),0===bs&&void 0===nextScene||(selectTextRemove(),Remove(div_pushStartOfTitle),Remove(div_copyRight))),putXY(div_logo,logo.x,logo.y),setImage(div_logo,"image/logo.png"),translate(div_title[0],Left,Bottom),translate(div_title[1],Right,Bottom),putXY(div_title[0],title.x,title.y),putXY(div_title[1],1440-title.x,title.y);for(let e=0;e<2;e++)setImage(div_title[e],"image/title"+e+".png");setImage(div_bg,"image/title.jpg"),0<bs&&(soundName[14]="pause"),void 0!==nextScene&&Remove(div_startNavi)}function selectTitle(){for(let e=0;e<3;e++)fontSet(div_selectText[e],"#FFFFFF","Higashi","45","bold","right"),select[e].x=590,select[e].y=620+55*e;animeFrame(pushStartFrame,40,2),putXY(div_pushStartOfTitle,"50%",555),fontSet(div_pushStartOfTitle,"#FFFF8E","Higashi","45","bold","right"),textEdge(div_pushStartOfTitle,"2","#7F7F37"),div_pushStartOfTitle.style.opacity=1-pushStartFrame.p,setText(div_pushStartOfTitle,"PUSH "+startButton(0,"en")+" !"),0==selectScene?(select[0].txt="SCENARIO GAME",select[1].txt="--",select[2].txt="OPTION",anyoneConfirm()&&0==selectNum?(selectScene++,soundName[1]="se/confirm",selectNum=0):anyoneConfirm()&&1==selectNum?soundName[1]="se/passMiss":anyoneConfirm()&&2==selectNum&&(soundName[1]="se/confirm",nextScene="option",ct=120,selectNum=0),selectScreenUD(3,"cursor",50),1==naviOption?(putXY(div_startNavi,"50%","86%"),div_startNavi.style.opacity=1):Remove(div_startNavi)):1==selectScene&&(500<=titleCount&&(titleCount=500),select[0].txt="1PLAYER GAME",select[1].txt="2PLAYER GAME",anyoneCancel()?(selectScene--,soundName[1]="se/back",selectNum=0):P1Confirm()&&0==selectNum&&0==shift?(ct=150,soundName[1]="se/confirm",selectNum=0,player[1].pad="man",player[2].pad=!1,trialStart()):P2Confirm()&&0==selectNum&&0==shift?(ct=150,soundName[1]="se/confirm",selectNum=0,player[1].pad=!1,player[2].pad="man",trialStart()):anyoneConfirm()&&1==selectNum&&0==shift&&(ct=150,soundName[1]="se/confirm",selectNum=0,player[1].pad="man",player[2].pad="man",trialStart()),selectScreenUD(2,"cursor",50),naviOption&&1==selectScene?(putXY(div_startNavi,"50%","86%"),div_startNavi.style.opacity=1):Remove(div_startNavi))}let pushStartFrame={};document.write("<div id= copyRight> </div>");const div_copyRight=document.getElementById("copyRight"),div_pushStartOfTitle=(defaultSet(div_copyRight,screen),putXY(div_copyRight,"50%",940),translate(div_copyRight,Center,Bottom),fontSet(div_copyRight,"#BEFFB7","Higashi","45","bold","right"),textEdge(div_copyRight,"2","#000000"),div_copyRight.style.zIndex=1e4,setText(div_copyRight,""),document.write("<div id= pushStartOfTitle> </div>"),document.getElementById("pushStartOfTitle"));defaultSet(div_pushStartOfTitle,screen),putXY(div_pushStartOfTitle,0,0),translate(div_pushStartOfTitle,Center,Center),fontSet(div_pushStartOfTitle,"#FFFF8E","Higashi","45","bold","right"),textEdge(div_pushStartOfTitle,"2","#7F7F37"),div_pushStartOfTitle.style.zIndex=1e4,setText(div_pushStartOfTitle,"");let logo={},titleCount=0,titleCountMax=0;document.write("<div id= logo> </div>");const div_logo=document.getElementById("logo");defaultSet(div_logo,screen),putXY(div_logo,0,0),translate(div_logo,Center,Top),div_logo.style.zIndex=100,div_logo.style.mixBlendMode="normal",setImage(div_logo,"");let div_title=[],title={};for(let e=0;e<2;e++)document.write("<div id= title"+e+"> </div>"),div_title[e]=document.getElementById("title"+e),defaultSet(div_title[e],screen),putXY(div_title[e],100,100*e),translate(div_title[e],Center,Bottom),div_title[e].style.zIndex=300-e,div_title[e].style.mixBlendMode="normal",setImage(div_title[e],"");const cRTxT=["A","E","K","M"," ","U","N","P","R","S"];function titleCountMinus(){500<=titleCount&&(titleCount-=100)<=500&&(titleCount=500)}let stageGoTo=0;function trialStart(){nextScene="stageSelect",clearMap=JSON.parse(JSON.stringify(clearMapDefault)),energyCardMax=[NaN,0,0,0,0],stage.s=1,stage.a=1,fileNumber=1,setGameStart(),cheat.noSave=1,stageGoTo=0}let titlePhase=0,naviOption=1,vibration=(screenOption=1,0),sensitive=[NaN,0,0];const oNoFF=["OFF","ON"],screenSizeText=["スタンダード","スタンダード拡大","4:3","スクエア","ビスタ","のばす"],optionMessage=[Rb("体験版","たいけんばん")+"では"+Rb("利用","りよう")+"できないオプションです。","ゲームの"+Rb("操作","そうさ")+Rb("方法","ほうほう")+"を"+Rb("確認","かくにん")+"できます。",Rb("画面","がめん")+"にヘルプを"+Rb("表示","ひょうじ")+"するか"+Rb("選","えら")+"ぶことができます。",Rb("画面","がめん")+"サイズやアスペクト"+Rb("比","ひ")+"を"+Rb("変更","へんこう")+"できます。","コントローラを"+Rb("振動","しんどう")+"させるかどうか"+Rb("選","えら")+"べます。","「ON」にすると、"+Rb("斜","なな")+"め"+Rb("入力時","にゅうりょくじ")+"にメイプルの"+Rb("攻撃方向","こうげきほうこう")+"が"+Rb("変","か")+"わりやすくなります。","「ON」にすると、"+Rb("斜","なな")+"め"+Rb("入力時","にゅうりょくじ")+"にシナモンの"+Rb("攻撃方向","こうげきほうこう")+"が"+Rb("変","か")+"わりやすくなります。","「ちいさめ」にすると、スティックを"+Rb("浅","あさ")+"めに"+Rb("倒","たお")+"しても"+Rb("反応","はんのう")+"するようになります。","「つよい」にすると、スティック"+Rb("操作","そうさ")+"が"+Rb("上下左右","じょうげさゆう")+"の"+Rb("四方向","よんほうこう")+"に"+Rb("補正","ほせい")+"されやすくなります。"];function sceneOption(){setImage(div_bg,"image/option/bg.jpg");for(let e=0;e<2;e++)setImage(div_optionWindow[e],"image/option/window"+e+".png");for(let e=0;e<9;e++)fontSet(div_selectText[e],"green","Higashi","55","bold","right"),textEdge(div_selectText[e],"4","green"),fontSet(div_selectTextAns[e],"green","Higashi","55","bold","right"),textEdge(div_selectTextAns[e],"4","green"),select[e].x=340,select[e].y=250+65*e;if(select[0].txt="--",select[1].txt="HOW TO PLAY",select[2].txt="ヘルプ",select[3].txt="画面",select[4].txt="バイブレーション",select[5].txt="1P センシティブモード",select[6].txt="2P センシティブモード",select[7].txt="デッドゾーン",select[8].txt="四方向補正",anyoneConfirm()&&0==selectNum?soundName[1]="se/passMiss":anyoneConfirm()&&1==selectNum&&(soundName[1]="se/confirm",nextScene="howToPlay",ct=5),selectAnsLocation(2,1150),1==naviOption?(ans_l_Set()&&2==selectNum&&(soundName[0]="se/select",naviOption=0),fontColorSet(div_selectTextAns[2],"green"),textEdge(div_selectTextAns[2],"4","green")):(ans_r_Set()&&2==selectNum&&(soundName[0]="se/select",naviOption=1),fontColorSet(div_selectTextAns[2],"blue"),textEdge(div_selectTextAns[2],"4","blue")),setText(div_selectTextAns[2],oNoFF[naviOption]),selectAnsLocation(3,1150),0!=screenOption&&ans_l_Set()&&3==selectNum&&(soundName[0]="se/select",screenOption--),screenOption!=screenSizeText.length-1&&ans_r_Set()&&3==selectNum&&(soundName[0]="se/select",screenOption++),0==screenOption||3==screenOption?(fontColorSet(div_selectTextAns[3],"blue"),textEdge(div_selectTextAns[3],"4","blue")):1==screenOption||2==screenOption?(fontColorSet(div_selectTextAns[3],"green"),textEdge(div_selectTextAns[3],"4","green")):4!=screenOption&&5!=screenOption||(fontColorSet(div_selectTextAns[3],"red"),textEdge(div_selectTextAns[3],"4","red")),setText(div_selectTextAns[3],screenSizeText[screenOption]),selectAnsLocation(4,1150),1==vibration){if(ans_l_Set()&&4==selectNum){soundName[0]="se/select",vibration=0;for(let e=1;e<=2;e++)stopVib(e)}fontColorSet(div_selectTextAns[4],"green"),textEdge(div_selectTextAns[4],"4","green")}else ans_r_Set()&&4==selectNum&&(soundName[0]="se/select",vibration=1,onVib()),fontColorSet(div_selectTextAns[4],"blue"),textEdge(div_selectTextAns[4],"4","blue");setText(div_selectTextAns[4],oNoFF[vibration]);for(let e=1;e<=2;e++)selectAnsLocation(4+e,1150),1==sensitive[e]?(ans_l_Set()&&selectNum==4+e&&(soundName[0]="se/select",sensitive[e]=0),fontColorSet(div_selectTextAns[4+e],"green"),textEdge(div_selectTextAns[4+e],"4","green")):(ans_r_Set()&&selectNum==4+e&&(soundName[0]="se/select",sensitive[e]=1),fontColorSet(div_selectTextAns[4+e],"blue"),textEdge(div_selectTextAns[4+e],"4","blue")),setText(div_selectTextAns[4+e],oNoFF[sensitive[e]]);selectAnsLocation(7,1150),0!=stickSence&&ans_l_Set()&&7==selectNum&&(soundName[0]="se/select",stickSence--),stickSence!=stickSenceText.length-1&&ans_r_Set()&&7==selectNum&&(soundName[0]="se/select",stickSence++),stickSence<=0?(fontColorSet(div_selectTextAns[7],"blue"),textEdge(div_selectTextAns[7],"4","blue")):1==stickSence?(fontColorSet(div_selectTextAns[7],"green"),textEdge(div_selectTextAns[7],"4","green")):2<=stickSence&&(fontColorSet(div_selectTextAns[7],"red"),textEdge(div_selectTextAns[7],"4","red")),setText(div_selectTextAns[7],stickSenceText[stickSence]),selectAnsLocation(8,1150),0!=rG&&ans_l_Set()&&8==selectNum&&(soundName[0]="se/select",rG--),rG!=rGText.length-1&&ans_r_Set()&&8==selectNum&&(soundName[0]="se/select",rG++),rG<=0?(fontColorSet(div_selectTextAns[8],"blue"),textEdge(div_selectTextAns[8],"4","blue")):1==rG?(fontColorSet(div_selectTextAns[8],"green"),textEdge(div_selectTextAns[8],"4","green")):2==rG&&(fontColorSet(div_selectTextAns[8],"red"),textEdge(div_selectTextAns[8],"4","red")),setText(div_selectTextAns[8],rGText[rG]),selectScreenUD(9,"cursor",30),1==naviOption?(putXY(div_startNavi,"50%","96%"),div_startNavi.style.opacity=1,setText(div_startNavi,optionMessage[selectNum])):Remove(div_startNavi),anyoneCancel()&&(nextScene="title",soundName[1]="se/back",ct=100),200==bs&&saveDataOption()}let div_optionWindow=[];for(let e=0;e<2;e++)document.write("<div id= optionWindow"+e+"> </div>"),div_optionWindow[e]=document.getElementById("optionWindow"+e),defaultSet(div_optionWindow[e],screen),putXY(div_optionWindow[e],"50%","50%"),translate(div_optionWindow[e],Center,Center),div_optionWindow[e].style.zIndex=-700+e,setImage(div_optionWindow[e],"");div_optionWindow[0].style.mixBlendMode="multiply",div_optionWindow[1].style.mixBlendMode="normal";let fileNumber=0,copyFile=0,easyLevel=0;function sceneFileSelect(){}function dataScore(e){}function dataScoreDisplay(){}function setGameStart(){for(let e=2;1<=e;e--)playerItemStatusReset(e),1==cheat.hiPower&&(playerStatus[e].speedLevel=7,playerStatus[e].weaponLevel=7,playerStatus[e].wType="normal",playerStatus[e].life=0);cheat.hiPower=0,stock=3,clear=0}function sceneLevelSelect(){}let hardLevel=0;const levelManual=[""];function hardLevelSet(e){}function hardLevelCheck(){return 1==hardLevel&&0==battle}function fileStart(e){}document.write("<div id= passwordLogo> </div>");const div_passwordLogo=document.getElementById("passwordLogo");defaultSet(div_passwordLogo,screen),putXY(div_passwordLogo,"50%",20),translate(div_passwordLogo,Center,Top),div_passwordLogo.style.zIndex=0,div_passwordLogo.style.mixBlendMode="normal",setImage(div_passwordLogo,"");let div_passwordChara=[];for(let e=0;e<2;e++)document.write("<div id= passwordChara"+e+"> </div>"),div_passwordChara[e]=document.getElementById("passwordChara"+e),defaultSet(div_passwordChara[e],screen),div_passwordChara[e].style.zIndex=0,div_passwordChara[e].style.mixBlendMode="normal",setImage(div_passwordChara[e],"");putXY(div_passwordChara[0],100,900),translate(div_passwordChara[0],Left,Bottom),putXY(div_passwordChara[1],1340,900),translate(div_passwordChara[1],Right,Bottom);let spritePasswordCursor={},pass=[0,0,0,0],correctPass=[0,0,0,0];const ptx=["0","1","2","3","4","5","6","7","8","9"];let passTime=0;function scenePassword(){}function password(){}function passOK(){}function passCheck(){}let cheat={};function sceneBattleInfo(){}function sceneBattleAlert(){}cheat.hiPower=0,cheat.extend=0,cheat.noHit=0,cheat.battleChange=0,cheat.ending=0,cheat.bossRush=0,cheat.hyper=0,cheat.battleStageAdd=0;let battleInfoGuide={};document.write("<div id= battleInfoGuide> </div>");const div_battleInfoGuide=document.getElementById("battleInfoGuide");defaultSet(div_battleInfoGuide,screen),putXY(div_battleInfoGuide,"50%","80%"),translate(div_battleInfoGuide,Center,Bottom),fontSet(div_battleInfoGuide,"#ACD0F4","Higashi","60","bold","center"),textEdge(div_battleInfoGuide,"4","#396894"),div_battleInfoGuide.style.zIndex=100,setText(div_battleInfoGuide,"");let div_battleInfo=[];for(let e=0;e<2;e++)document.write("<div id= battleInfo"+e+"> </div>"),div_battleInfo[e]=document.getElementById("battleInfo"+e),defaultSet(div_battleInfo[e],screen),translate(div_battleInfo[e],Center,Center),div_battleInfo[e].style.zIndex=100,div_battleInfo[e].style.mixBlendMode="normal",setImage(div_battleInfo[e],"");function goBattle(){}function sceneBattleRule(){}putXY(div_battleInfo[0],"50%","39%"),putXY(div_battleInfo[1],"50%","57%");let winMatch=3,battleTime=1;const battleTimeMessage=["1:00","1:30","2:00","3:00","5:00","∞"],battleTimeSet=[60,90,120,180,300,"infinity"];let limitBattleScore=0,suddenDeath=1,virus=1,battleBallLevel=1;const speedLevelText=[4,6,2,2],battleBallSpeed=[6,10,13,17];let wins=[NaN,0,0];const battleRuleMessage=[1,2,3,4];function sceneBattleStage(){}let div_battleStageSelectName=[];for(let e=0;e<3;e++)document.write("<div id= battleStageSelectName"+e+"> </div>"),div_battleStageSelectName[e]=document.getElementById("battleStageSelectName"+e),defaultSet(div_battleStageSelectName[e],screen),putXY(div_battleStageSelectName[e],200,100*e),translate(div_battleStageSelectName[e],Center,Center),div_battleStageSelectName[e].style.zIndex=0,setText(div_battleStageSelectName[e],"");div_battleStageSelectName[0].style.letterSpacing="8px";let battle=0,battleStage=1;function xI_x_StSelect(e){return 275+92*(e-2.5)}function yI_y_StSelect(e){return 275+92*(e-2.5)}let stageSelectBase={},div_stageSelectBase=[];for(let e=-2;e<3;e++)document.write("<div id= stageSelectBase"+e+"> </div>"),div_stageSelectBase[e]=document.getElementById("stageSelectBase"+e),defaultSet(div_stageSelectBase[e],screen),putXY(div_stageSelectBase[e],0,0),translate(div_stageSelectBase[e],Center,Center),div_stageSelectBase[e].style.zIndex=-100,div_stageSelectBase[e].style.overflow="hidden",div_stageSelectBase[e].style.mixBlendMode="normal",setImage(div_stageSelectBase[e],"");let div_floorSelect=[];for(let a=-2;a<3;a++){div_floorSelect[a]=[];for(let t=0;t<6;t++){div_floorSelect[a][t]=[];for(let e=0;e<6;e++)document.write("<div id= "+a+"floorSelect"+t+"_"+e+"> </div>"),div_floorSelect[a][t][e]=document.getElementById(a+"floorSelect"+t+"_"+e),defaultSet(div_floorSelect[a][t][e],div_stageSelectBase[a]),div_floorSelect[a][t][e].style.boxSizing="border-box",div_floorSelect[a][t][e].style.objectFit="fill",putXY(div_floorSelect[a][t][e],xI_x_StSelect(e),yI_y_StSelect(t)),translate(div_floorSelect[a][t][e],Center,Center),div_floorSelect[a][t][e].style.zIndex=10,div_floorSelect[a][t][e].style.mixBlendMode="normal",setImage(div_floorSelect[a][t][e],"")}}let div_drawImage=[];for(let e=0;e<3;e++)document.write("<div id= drawImage"+e+"> </div>"),div_drawImage[e]=document.getElementById("drawImage"+e),defaultSet(div_drawImage[e],screen),putXY(div_drawImage[e],"50%",0),translate(div_drawImage[e],Center,Top),div_drawImage[e].style.zIndex=0,div_drawImage[e].style.mixBlendMode="normal",setImage(div_drawImage[e],"");let drawTextY=0,drawTextV=0,vSprite={};document.write("<div id= victoryChara> </div>");const div_victoryChara=document.getElementById("victoryChara");defaultSet(div_victoryChara,screen),putXY(div_victoryChara,"50%","50%"),translate(div_victoryChara,Center,Center),div_victoryChara.style.zIndex=100,div_victoryChara.style.mixBlendMode="normal",setImage(div_victoryChara,"");let vict=[],victSprite=[],div_vict=[];for(let e=0;e<16;e++)victSprite[e]={},document.write("<div id= vict"+e+"> </div>"),div_vict[e]=document.getElementById("vict"+e),defaultSet(div_vict[e],screen),putXY(div_vict[e],100,100*e),translate(div_vict[e],Center,Center),div_vict[e].style.zIndex=101,div_vict[e].style.mixBlendMode="normal",setImage(div_vict[e],"");function sceneScoreBoard(){}let winPlayer=1,winTransform=1,div_winsLine=[];for(let t=0;t<7;t++){div_winsLine[t]=[];for(let e=1;e<=2;e++)document.write("<div id= winsLine"+t+"_"+e+"> </div>"),div_winsLine[t][e]=document.getElementById("winsLine"+t+"_"+e),defaultSet(div_winsLine[t][e],screen),putXY(div_winsLine[t][e],720+150*(t-3),480+250*(e-1.5)),translate(div_winsLine[t][e],Center,Center),div_winsLine[t][e].style.zIndex=100,div_winsLine[t][e].style.mixBlendMode="normal",setImage(div_winsLine[t][e],"")}let div_wins=[];for(let t=0;t<5;t++){div_wins[t]=[];for(let e=1;e<=2;e++)document.write("<div id= wins"+t+"_"+e+"> </div>"),div_wins[t][e]=document.getElementById("wins"+t+"_"+e),div_wins[t][e].style.imageRendering="pixelated",defaultSet(div_wins[t][e],screen),putXY(div_wins[t][e],720+150*(t+2-3),480+250*(e-1.5)),translate(div_wins[t][e],Center,Center),div_wins[t][e].style.zIndex=100,div_wins[t][e].style.mixBlendMode="normal",setImage(div_wins[t][e],"")}function transWIn_scale_to_opacity(e){}function sceneOpening(){}function sceneOpeningB(){}function sceneOpeningC(){}function sceneOpeningD(){}function sceneOpeningE(){}function sceneOpeningF(){}function sceneOpeningG(){}function sceneOpeningH(){}function sceneOpeningI(){}function sceneOpeningJ(){}const theaterMax=8;let div_theaterElement=[],theaterElement=[],theaterElementSprite=[];for(let e=0;e<theaterMax;e++)theaterElementSprite[e]={},document.write("<div id= theaterElement"+e+"> </div>"),div_theaterElement[e]=document.getElementById("theaterElement"+e),defaultSet(div_theaterElement[e],screen),putXY(div_theaterElement[e],100,100*e),translate(div_theaterElement[e],Center,Center),div_theaterElement[e].style.zIndex=0,div_theaterElement[e].style.mixBlendMode="normal",setImage(div_theaterElement[e],"");function theaterinfoReset(e){theaterElement[e]={x:0,y:0,opa:1,zIndex:0,scale:1}}function theaterFrameReset(){for(let e=0;e<theaterMax;e++)frameReset(theaterElementSprite[e])}function theaterElementReset(){for(let e=0;e<theaterMax;e++)div_theaterElement[e].style.transformOrigin="50% 50%",div_theaterElement[e].style.imageRendering="auto",putXY(div_theaterElement[e],"50%","50%"),translate(div_theaterElement[e],Center,Center),div_theaterElement[e].style.zIndex=0,div_theaterElement[e].style.opacity=1,Remove(div_theaterElement[e])}let skipOp=0;function skipOpening(){-100==bs&&"openingB"==scene||(k.Start[1]||k.Start[2]||k.A[1]||k.A[2])&&0==skipOp&&(skipOp=1),1==skipOp&&(change_level=.1,soundName[14]="pause",nextScene="title",titlePhase=200,ct=100),0==k.Start[1]&&0==k.Start[2]&&0==k.A[1]&&0==k.A[2]&&2==skipOp&&(skipOp=0)}function skipBlock(){skipOp=0,(k.Start[1]||k.Start[2]||k.A[1]||k.A[2])&&(skipOp=2)}let bestEnding=0;function cardSum(){return energyCardMax[1]+energyCardMax[2]+energyCardMax[3]+energyCardMax[4]}function sceneEnding(){-100==bs&&(0==cheat.bossRush?bestEnding=12==cardSum()&&0==easyLevel?1:0:(bestEnding=0,bossRushRank=brr_C()),1==cheat.ending?(easyLevel=0,bestEnding=0,cheat.ending=0):2==cheat.ending&&(easyLevel=0,bestEnding=1,cheat.ending=0),theaterFrameReset(),theaterElementReset(),sound[10].paused&&(soundName[10]="se/quake"),theaterinfoReset(3),theaterElement[3]={x:"30%",y:0,opa:1,zIndex:0,scale:1},theaterinfoReset(4),theaterElement[4]={x:"65%",y:0,opa:1,zIndex:0,scale:1},theaterinfoReset(5),theaterElement[5]={x:"52%",y:0,opa:1,zIndex:0,scale:1}),shift++,animeFrame(theaterElementSprite[1],3,2);let e=theaterElementSprite[1].p;0==e&&(e=-1),putXY(div_theaterElement[0],720+3*e,"50%"),div_theaterElement[0].style.zIndex=100,setImage(div_theaterElement[0],"image/theater/edA_Maple.png"),putXY(div_theaterElement[1],720+50*e,480-3*e),div_theaterElement[1].style.zIndex=0,setImage(div_theaterElement[1],"image/theater/endingA.png"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window2.png"),30<=shift&&(theaterElement[3].y+=12),40<=shift&&(theaterElement[4].y+=4),80<=shift&&(theaterElement[5].y+=8),putXY(div_theaterElement[3],theaterElement[3].x,theaterElement[3].y),div_theaterElement[3].style.zIndex=1e3,setImage(div_theaterElement[3],"image/theater/edA0.png"),putXY(div_theaterElement[4],theaterElement[4].x,theaterElement[4].y),div_theaterElement[4].style.zIndex=50,setImage(div_theaterElement[4],"image/theater/edA1.png"),putXY(div_theaterElement[5],theaterElement[5].x,theaterElement[5].y),div_theaterElement[5].style.zIndex=1e3,setImage(div_theaterElement[5],"image/theater/edA2.png"),setImage(div_bg,"image/stageSelect.jpg"),130<=shift&&(nextScene=1==bestEnding?"endingB":"endingC")}function sceneEndingB(){-100==bs&&(theaterFrameReset(),theaterElementReset(),theaterinfoReset(1),theaterElement[1].opa=0,soundName[4]="se/hyperChange"),70<=++shift&&(theaterElement[1].opa+=.03,1<=theaterElement[1].opa)&&(theaterElement[1].opa=1),animeFrame(theaterElementSprite[0],3,2),putXY(div_theaterElement[0],"50%","50%"),div_theaterElement[0].style.zIndex=100,setImage(div_theaterElement[0],"image/theater/edB_Maple"+theaterElementSprite[0].p+".png"),putXY(div_theaterElement[1],"50%","50%"),div_theaterElement[1].style.zIndex=120,div_theaterElement[1].style.opacity=theaterElement[1].opa,setImage(div_theaterElement[1],"image/theater/edB_Maple"+(2+theaterElementSprite[0].p)+".png"),setImage(div_bg,"image/theater/endingB"+theaterElementSprite[0].p+".jpg"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window2.png"),130<=shift&&(nextScene="endingC")}function sceneEndingC(){-100==bs&&(theaterFrameReset(),theaterElementReset(),theaterinfoReset(0),theaterElement[0].x=720,theaterElement[0].y=480,theaterinfoReset(theaterElement[0].opa=1),theaterElement[1].x=720,theaterElement[1].y=480,theaterElement[1].opa=1),++shift<100?(theaterElement[0].x=720+Math.floor(21*Math.random())-10,theaterElement[0].y=480+Math.floor(21*Math.random())-10,theaterElementSprite[0].k++,20<=theaterElementSprite[0].k&&(theaterElementSprite[0].p++,theaterElementSprite[0].k=0),3<=theaterElementSprite[0].p&&(theaterElementSprite[0].p=3)):(theaterElement[0].x=720,theaterElement[0].y=480,100==shift&&(theaterElementSprite[0].k=0,theaterElementSprite[0].p=4,soundName[10]="se/blast"),theaterElementSprite[0].k++,13<=theaterElementSprite[0].k&&(theaterElementSprite[0].p++,theaterElementSprite[0].k=0),8<=theaterElementSprite[0].p&&(theaterElementSprite[0].p=8,theaterElement[0].opa-=.1,theaterElement[0].opa<=0)&&(theaterElement[0].opa=0)),div_theaterElement[0].style.zIndex=40,div_theaterElement[0].style.opacity=theaterElement[0].opa,putXY(div_theaterElement[0],theaterElement[0].x,theaterElement[0].y),setImage(div_theaterElement[0],"image/theater/mJblast"+theaterElementSprite[0].p+".png"),(div_theaterElement[1].style.zIndex=20)<=shift&&(animeFrame(theaterElementSprite[1],3,2),--theaterElement[1].x,theaterElement[1].y+=1),putXY(div_theaterElement[1],theaterElement[1].x,theaterElement[1].y),setImage(div_theaterElement[1],"image/theater/edC_Maple"+theaterElementSprite[1].p+".png"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window2.png"),setImage(div_bg,"image/stageSelect.jpg"),200<=shift&&(nextScene="endingD")}function sceneEndingD(){-100==bs&&(theaterFrameReset(),theaterElementReset(),theaterinfoReset(0),theaterElement[0].scale=.1,soundName[4]="se/endingGo",div_theaterElement[0].style.imageRendering="pixelated"),animeFrame(theaterElementSprite[0],4,2),shift++,theaterElement[0].scale+=3e-4*shift,transform(div_theaterElement[0],Center,Center,0,theaterElement[0].scale),1==bestEnding?setImage(div_theaterElement[0],"image/theater/edD_hyperMaple"+theaterElementSprite[0].p+".png"):setImage(div_theaterElement[0],"image/theater/edD_Maple"+theaterElementSprite[0].p+".png"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window0.png"),setImage(div_bg,"image/stageSelect.jpg"),70<=shift&&(nextScene="credits",creditsShift=0,change_level=.03,ct=150)}function sceneEndingE(){-100==bs&&(theaterElementReset(),theaterinfoReset(0),theaterElement[0].scale=.1,div_theaterElement[0].style.imageRendering="pixelated",credits[0].opacity=0),shift++,theaterElement[0].scale+=3e-5*shift,50<=shift&&(credits[0].opacity+=.03),1<=credits[0].opacity&&(credits[0].opacity=1),putXY(div_credits[0],"50%","85%"),setText(div_credits[0],"PRESENTED BY "+copyRight),div_credits[0].style.opacity=credits[0].opacity,transform(div_theaterElement[0],Center,Center,0,theaterElement[0].scale),setImage(div_theaterElement[0],"image/theater/planet.png"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window0.png"),setImage(div_bg,"image/stageSelect.jpg"),1<=theaterElement[0].scale&&0==bs&&(nextScene="endingF",change_level=.05,ct=60)}function sceneEndingF(){-100==bs&&(theaterFrameReset(),theaterElementReset(),theaterinfoReset(0),theaterElement[0].x="50%",theaterElement[0].y=768,theaterinfoReset(1),theaterElement[1].x=0,theaterElement[1].y=480,theaterinfoReset(3),theaterElement[3].x="50%",theaterElement[3].y=0,theaterinfoReset(5),theaterElement[5].x="50%",theaterElement[5].y=588,credits[0].opacity=0),shift++,0==bestEnding?(shift<2e3&&(animeFrame(theaterElementSprite[0],40,2),theaterElement[1].x-=6,setImage(div_theaterElement[0],"image/theater/edF_usara"+theaterElementSprite[0].p+".png")),80<=shift&&shift<2e3&&(theaterElement[3].y+=30,theaterElement[3].y>=theaterElement[0].y&&(shift=3e3),setImage(div_theaterElement[3],"image/theater/edF_Maple.png")),3e3<=shift&&shift<3005&&(div_theaterElement[4].style.zIndex=15,setImage(div_theaterElement[4],"image/theater/endingF.jpg"),setImage(div_theaterElement[0],"image/theater/edF_usara2.png"),Remove(div_theaterElement[3])),3005<=shift&&(Remove(div_theaterElement[4]),setImage(div_theaterElement[0],"image/theater/edF_usara3.png"),credits[0].opacity+=.03),1<=credits[0].opacity&&(credits[0].opacity=1,anyoneConfirm())&&(change_level=.1,soundName[14]="pause",nextScene=0==cheat.noSave||1==cheat.bossRush?"complete":"title",titlePhase=200,ct=100),putXY(div_theaterElement[0],theaterElement[0].x,theaterElement[0].y),translate(div_theaterElement[0],Center,Bottom),div_theaterElement[0].style.zIndex=1e3):(shift<2e3?(animeFrame(theaterElementSprite[3],3,2),theaterElement[1].x-=3,setImage(div_theaterElement[3],"image/theater/edF_hyperMaple"+theaterElementSprite[3].p+".png"),10<=shift&&shift<2e3&&(theaterElement[3].y+=3,theaterElement[3].y>=theaterElement[0].y)&&(theaterElementSprite[3].p=2,theaterElementSprite[3].k=0,shift=3e3,theaterElement[3].y=theaterElement[0].y)):3e3<=shift&&(theaterElement[0].x="37%",theaterElement[0].y=768,setImage(div_theaterElement[0],"image/theater/edF_Cinnamon.png"),theaterElementSprite[3].k++,7<=theaterElementSprite[3].k&&(theaterElementSprite[3].p++,theaterElementSprite[3].k=0),7<=theaterElementSprite[3].p&&(theaterElementSprite[3].p=7),setImage(div_theaterElement[3],"image/theater/edF_hyperMaple"+theaterElementSprite[3].p+".png"),3060<=shift)&&(theaterElement[5].y-=10,putXY(div_theaterElement[5],theaterElement[5].x,theaterElement[5].y),div_theaterElement[5].style.zIndex=995,animeFrame(theaterElementSprite[5],2,2),setImage(div_theaterElement[5],"image/theater/edF_energy"+theaterElementSprite[5].p+".png"),theaterElement[5].y<=0)&&(nextScene="endingG"),putXY(div_theaterElement[0],theaterElement[0].x,theaterElement[0].y),translate(div_theaterElement[0],Center,Bottom),div_theaterElement[0].style.zIndex=998),putXY(div_theaterElement[1],theaterElement[1].x,theaterElement[1].y),translate(div_theaterElement[1],Left,Center),div_theaterElement[1].style.zIndex=10,setImage(div_theaterElement[1],"image/theater/endingF.png"),putXY(div_theaterElement[3],theaterElement[3].x,theaterElement[3].y),translate(div_theaterElement[3],Center,Bottom),div_theaterElement[3].style.zIndex=999,putXY(div_credits[0],"50%","85%"),setText(div_credits[0],"THE END"),div_credits[0].style.opacity=credits[0].opacity,setImage(div_bg,"image/theater/openingE.jpg"),div_theaterElement[2].style.zIndex=2e3,setImage(div_theaterElement[2],"image/theater/window0.png")}function sceneEndingH(){-100==bs&&(credits[0].opacity=0),0==bs&&shift++,15<=shift&&(credits[0].opacity+=.03),1<=credits[0].opacity&&(credits[0].opacity=1,anyoneConfirm())&&(change_level=.1,soundName[14]="pause",nextScene=0==cheat.noSave||1==cheat.bossRush?"complete":"title",titlePhase=200,ct=100),putXY(div_credits[0],"50%","85%"),setText(div_credits[0],"THE END"),div_credits[0].style.opacity=credits[0].opacity,setImage(div_bg,"image/theater/endingH.jpg")}function sceneEndingG(){}function sceneCredits(){}let creditsShift=0;const role=[],staff=[],creditScene=[];let div_credits=[],credits=[];for(let e=0;e<2;e++)document.write("<div id= credits"+e+"> </div>"),div_credits[e]=document.getElementById("credits"+e),defaultSet(div_credits[e],screen),putXY(div_credits[e],200,100*e),translate(div_credits[e],Center,Top),fontSet(div_credits[e],"#DBFFFF","Higashi","50","bold","center"),textEdge(div_credits[e],"5","#36AFC3"),div_credits[e].style.letterSpacing="5px",div_credits[e].style.zIndex=99999,setText(div_credits[e],""),credits[e]={x:0,y:0,opacity:1};function creditsStageChoice(){}function sceneComplete(){}document.write("<div id= alertText> </div>");const div_alertText=document.getElementById("alertText");function sceneAlert(){setImage(div_bg,"sys/startup_alert.png"),t%100<50?div_alertText.style.opacity=0:div_alertText.style.opacity=1,setText(div_alertText,"つづけるには、"+startButton(0,"jpn")+"をおしてください"),anyoneConfirm()&&(ct=20,nextScene=setNextState)}defaultSet(div_alertText,screen),putXY(div_alertText,"50%","80%"),translate(div_alertText,Center,Center),fontSet(div_alertText,"#6DF7FF","Higashi","25","normal","right"),textEdge(div_alertText,"0","#000000"),div_alertText.style.zIndex=1e4,setText(div_alertText,"");let backUpGo=0,eraseGo=0;function sceneBackUp(){}function backUpSave(e){}function backUpLoad(){}function missLoad(){}function okayLoad(){}let dataArchive;const backUpMes=[""];function dataToBinary(e){}function binaryToData(e){}document.write("<div id= errorText> </div>");const div_errorText=document.getElementById("errorText");function sceneError(){-100==bs&&(soundName[14]="pause"),setImage(div_bg,"sys/blueScreen.jpg"),setText(div_errorText,"異常を検出しました。<br>ゲームを再起動して、もう一度お試しください。<br><br>この画面が何度も表示される場合は、ラムネまでお問合せください。<br>※お問合せ先については、同梱の説明書をご覧ください。")}function sceneAllClear(){}function sceneHowToPlay(){if(-100==bs){for(let e=0;e<2;e++)frameReset(howToNextFrame[e]);howToPlay={m:0,x:0,phase:0}}0===bs&&0==howToPlay.m&&0==howToPlay.phase&&(rm[1]||rm[2]?(soundName[0]="se/select",howToPlay.m=1,howToPlay.phase=1):(lm[1]||lm[2])&&(soundName[0]="se/select",howToPlay.m=-1,howToPlay.phase=1)),0!=howToPlay.m&&0!=howToPlay.phase&&(howToPlay.x-=80*howToPlay.m,1==howToPlay.phase&&1440<Math.abs(howToPlay.x)&&(howToPlay.phase=2),(2==howToPlay.phase&&1==howToPlay.m&&howToPlay.x<=0||2==howToPlay.phase&&-1==howToPlay.m&&0<=howToPlay.x)&&(shift=nextPage(),howToPlay.x=0,howToPlay.phase=0,howToPlay.m=0),putXY(div_howToPlayNext,720+howToPlay.x+1440*howToPlay.m,"50%"),putXY(div_howToPlayNext2,720+howToPlay.x+1440*howToPlay.m,"50%"),setImage(div_howToPlayNext,"image/howToPlay/page"+nextPage()+".png")),0==howToPlay.phase&&0==howToPlay.m?(Remove(div_howToPlayNext),Remove(div_howToPlayNext2)):setImage(div_howToPlayNext2,"image/option/window0.png"),setImage(div_bg,"image/option/bg.jpg"),putXY(div_howToPlay,720+howToPlay.x,"50%"),putXY(div_howToPlay2,720+howToPlay.x,"50%");for(let e=0;e<2;e++)0==howToPlay.phase&&0==howToPlay.m?div_howToNext[e].style.opacity=1:div_howToNext[e].style.opacity=0,animeFrame(howToNextFrame[e],10,2),setImage(div_howToNext[e],"image/howToPlay/"+e+"_"+howToNextFrame[e].p+".png");setImage(div_howToPlay2,"image/option/window0.png"),setImage(div_howToPlay,"image/howToPlay/page"+shift+".png"),anyoneCancel()&&0==howToPlay.phase&&0==howToPlay.m&&(nextScene="option",soundName[1]="se/back",ct=5)}defaultSet(div_errorText,screen),putXY(div_errorText,"50%","50%"),translate(div_errorText,Center,Center),fontSet(div_errorText,"#FFFFFF","Higashi","30","normal","center"),div_errorText.style.zIndex=1e4,setText(div_errorText,"");let howToPlay={x:0};document.write("<div id= howToPlay> </div>");const div_howToPlay=document.getElementById("howToPlay"),div_howToPlay2=(defaultSet(div_howToPlay,screen),putXY(div_howToPlay,"50%","50%"),translate(div_howToPlay,Center,Center),div_howToPlay.style.zIndex=100,div_howToPlay.style.mixBlendMode="normal",setImage(div_howToPlay,""),document.write("<div id= howToPlay2> </div>"),document.getElementById("howToPlay2")),div_howToPlayNext=(defaultSet(div_howToPlay2,screen),putXY(div_howToPlay2,"50%","50%"),translate(div_howToPlay2,Center,Center),div_howToPlay2.style.zIndex=10,div_howToPlay2.style.mixBlendMode="multiply",setImage(div_howToPlay2,""),document.write("<div id= howToPlayNext> </div>"),document.getElementById("howToPlayNext")),div_howToPlayNext2=(defaultSet(div_howToPlayNext,screen),putXY(div_howToPlayNext,"50%","50%"),translate(div_howToPlayNext,Center,Center),div_howToPlayNext.style.zIndex=100,div_howToPlayNext.style.mixBlendMode="normal",setImage(div_howToPlayNext,""),document.write("<div id= howToPlayNext2> </div>"),document.getElementById("howToPlayNext2"));defaultSet(div_howToPlayNext2,screen),putXY(div_howToPlayNext2,"50%","50%"),translate(div_howToPlayNext2,Center,Center),div_howToPlayNext2.style.zIndex=10,div_howToPlayNext2.style.mixBlendMode="multiply",setImage(div_howToPlayNext2,"");let div_howToNext=[],howToNextFrame=[];for(let e=0;e<2;e++)document.write("<div id= howToNext"+e+"> </div>"),div_howToNext[e]=document.getElementById("howToNext"+e),defaultSet(div_howToNext[e],screen),translate(div_howToNext[e],Center,Center),div_howToNext[e].style.zIndex=1e3,div_howToNext[e].style.mixBlendMode="normal",setImage(div_howToNext[e],""),howToNextFrame[e]={};const page=3;function nextPage(){let e;return(e=shift+howToPlay.m)>=page?e=0:e<0&&(e=page-1),e}function sceneRamune(){0==bs&&shift++,setImage(div_bg,"sys/ramuneLogo.png"),(shift>=3.5*fps||anyoneConfirm()&&shift>=.3*fps)&&(nextScene="title",titlePhase=200,ct=100)}function sceneSoundTest(){}putXY(div_howToNext[0],"5%","50%"),putXY(div_howToNext[1],"95%","50%");let soundTestNumber=[];function sceneInfo(){-100==bs&&(soundName[14]="bgm/info",div_hpLINK.innerHTML='<a href="'+hpURL+'" target="_blank" style="color: inherit;">'+hpURL+"</a>"),setImage(div_bg,"image/info.jpg"),(anyoneConfirm()||anyoneCancel())&&(nextScene="ramune",soundName[1]="se/confirm",soundName[14]="pause")}let hpURL="https://ramune-spark.booth.pm/";document.write("<div id= hpLINK> </div>");const div_hpLINK=document.getElementById("hpLINK");defaultSet(div_hpLINK,screen),putXY(div_hpLINK,"50%","98%"),translate(div_hpLINK,Center,Bottom),fontSet(div_hpLINK,"blue","Higashi","40","normal","right"),textEdge(div_hpLINK,"2","blue"),div_hpLINK.style.zIndex=1e4,setText(div_hpLINK,""),document.body.addEventListener("touchmove",e=>{1<e.touches.length&&e.preventDefault()},{passive:!1}),window.oncontextmenu=function(e){return e.stopPropagation(),!1};let copyRight="";for(let e=0;e<12;e++)copyRight+=cRTxT[xxxxxxxxxx[e]];let mouseStopTime=0;function mouseCursorHidden(){++mouseStopTime==.8*fps&&(document.body.style.cursor="none")}function checkLoad(){let e=!0;function n(){e=!1}if(e&&!1===exists(dataArchive.file)&&n(),e&&!1===exists(dataArchive.option)&&n(),e&&!1===exists(dataArchive.sys)&&n(),e&&!1===exists(dataArchive.sys.clear)&&n(),e&&!1===exists(dataArchive.sys.battleBall)&&n(),!e||0<=dataArchive.sys.clear||n(),!e||0<=dataArchive.sys.battleBall||n(),e)for(let e=0;e<3;e++)!1===exists(dataArchive.file[e])&&n();if(e)for(let e=0;e<3;e++)!1===exists(dataArchive.file[e].active)&&n(),!1===exists(dataArchive.file[e].level)&&n(),!1===exists(dataArchive.file[e].map)&&n(),!1===exists(dataArchive.file[e].card)&&n();if(e)for(let e=0;e<3;e++)!0!==dataArchive.file[e].active&&!1!==dataArchive.file[e].active&&n(),"normal"!==dataArchive.file[e].level&&"hard"!==dataArchive.file[e].level&&n();if(e)for(let t=0;t<3;t++)for(let e=1;e<=5;e++)!1===exists(dataArchive.file[t].map[e])&&n();if(e)for(let t=0;t<3;t++)for(let e=1;e<=4;e++)!1===exists(dataArchive.file[t].card[e])&&n();if(e)for(let t=0;t<3;t++)for(let e=1;e<=4;e++)0<=dataArchive.file[t].card[e]&&dataArchive.file[t].card[e]<=3||n();if(e)for(let a=0;a<3;a++)for(let t=1;t<=5;t++)for(let e=1;e<=8;e++)!1===exists(dataArchive.file[a].map[t][e])&&n();if(e)for(let a=0;a<3;a++)for(let t=1;t<=5;t++)for(let e=1;e<=8;e++)0<=dataArchive.file[a].map[t][e]||n();return e}function RemoveAll(){allDiv.forEach(e=>{Remove(e)})}document.onmousemove=function(){mouseStopTime=0,document.body.style.cursor="url('sys/point64.cur'), auto"};const loadDebugLocationx=1450;function walkSpriteLoading(a){new Image;for(let t=0;t<4;t++)for(let e=0;e<4;e++)(new Image).src="image/"+a+"P"+waysText[t]+e+".png"}function missSpriteLoading(t){for(let e=0;e<5;e++)(new Image).src="image/"+t+"Pmiss"+e+".png"}function openingILoading(){for(let e=0;e<9;e++)(new Image).src="image/theater/openingI"+e+".png"}function stunSpriteLoading(e){let t;1<(t="stun"==player[e].state||"stunInvincible"==player[e].state||"stunSuper"==player[e].state?playerFrame[e].p+1:0)&&1==e&&(t=0),2==e&&(t=0),(new Image).src="image/"+e+"Pstun"+t+".png"}function weaponBreakLoading(){for(let e=0;e<3;e++)(new Image).src="image/weaponBreak"+e+".png"}function enemyLoading(){for(let e=0;e<3;e++)(new Image).src="image/enemy/D_"+e+".png";for(let a=0;a<enemyAllType;a++)if(1<=enemyNumber[a]||stageEnemyLoading(a)){for(let t=0;t<enemyArts[a];t++)for(let e=0;e<enemyVec[a];e++)1==enemyVec[a]?(new Image).src="image/enemy/"+a+"_"+t+".png":2==enemyVec[a]&&"LR"==enemyFaSt?0==e?(new Image).src="image/enemy/"+a+"_"+t+"_left.png":(new Image).src="image/enemy/"+a+"_"+t+"_right.png":4==enemyVec[a]&&((new Image).src="image/enemy/"+a+"_"+t+"_"+waysText[e]+".png");(new Image).src="image/enemy/"+a+"_D.png"}}function stageEnemyLoading(t){for(let e=0;e<=screenEnemyMax;e++)if(enemy[e].type===t&&0!=enemy[e].m)return!0;return!1}function goalLoading(){let e;var t=new Image;0==goal.m&&(t.src="image/goalAp0.png"),1==goal.m&&(13<=goalSprite.p?t.src="image/goal0.png":t.src="image/goalAp"+(goalSprite.p+1)+".png"),2==goal.m&&(3<=(e=goalSprite.p+1)&&(e=0),t.src="image/goal"+e+".png")}function staggerSpriteLoading(a){for(let t=0;t<4;t++){let e=playerFrame[a].p+1;("stagger"!=player[a].state&&"stagger2"!=player[a].state||2<=e)&&(e=0),(new Image).src="image/"+a+"P"+waysText[t]+"Stagger"+e+".png"}}function drownSpriteLoading(t){for(let e=0;e<2;e++)(new Image).src="image/"+t+"Pdrown"+e+".png"}function bossSpriteLoading(){if("bubbleDolphin"==boss.name){for(let e=0;e<2;e++)(new Image).src="image/boss/"+boss.name+e+".png";for(let e=0;e<2;e++)(new Image).src="image/boss/bubble"+e+".png";for(let e=0;e<3;e++)(new Image).src="image/boss/bubbleBreak"+e+".png"}}function gimmick0SpriteLoading(){let t=!1;for(let e=0;e<8;e++)if(1==gimmick[e].m&&0==gimmick[e].type){t=!0;break}if(t)for(let e=0;e<3;e++)(new Image).src="image/gimmick/0_"+e+".png"}nextScene="alert";const setNextState="ramune",hardMode=(change_level=.1,k2ndTime=40,k3rdTime=8,weaponStun=!0,0);screenOption=1,smooth=0,clearMap=[NaN,[NaN,1,1,1,1,1,1,1,1],[NaN,1,1,1,1,1,1,1,1],[NaN,.5,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0],[NaN,0,0,0,0,0,0,0,0]];let data;function saveData(){}function loadData(){}function deleteData(){}function loadDataActive(){}function saveDataOption(){}function saveFile(e){}function copyFileFunction(e,t){}